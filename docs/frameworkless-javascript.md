# 无框架 JavaScript

> 原文：<https://www.sitepoint.com/frameworkless-javascript/>

*这篇文章由[斯蒂芬·马克斯](https://www.sitepoint.com/author/smax/)和[尼尔森·雅克](https://twitter.com/nilsonjacques)进行了同行评审。感谢 SitePoint 的所有同行评审员使 SitePoint 的内容尽可能做到最好！*

JavaScript 框架提供了许多功能，它们变得越来越流行一点也不奇怪。它们很强大，也不难掌握。通常，我们将它们用于大型复杂的应用程序，但在某些情况下也用于较小的应用程序。在学会了如何使用框架之后，你很想把它用在你想开发的每一个应用上，但是你忘记了有时候仅仅使用旧的好的 JavaScript 就足够了。

在这篇文章中，我将讨论使用框架的利与弊，以及在开始项目之前应该考虑的问题。

## 框架是强大的

框架有其优势。首先，你不必为名称空间、跨浏览器兼容性、编写几个实用程序函数等等而烦恼。你工作在由一些业内最好的开发人员编写的组织良好的代码上。如果你很了解这个框架，你的开发速度会非常快。此外，如果您对任何特性有问题，很容易找到框架的文档、大量免费教程和大社区乐于提供帮助。如果需要更多的人力怎么办？招聘没有任何麻烦。如果你知道一个给定的框架是如何工作的，不管这个项目是关于什么的，你都会有宾至如归的感觉。框架本身的代码每天都在发展，变得更好、更强大、更安全。所以，你可以专注于重要的事情:你的工作。

总之，框架非常强大，提供了很多特性，比如模板、路由和控制器。但问题是:你的项目真的需要它们吗？

通常框架是一个很好的选择，但是这并不适用于每种情况。一个框架有很多有用的功能，这反过来增加了它的重量。不幸的是，在某些情况下，这个权重是不合理的，因为较小的项目只使用了框架的很小一部分。在这种情况下，原始 JavaScript(有时称为普通 JavaScript)可以解决所有问题。

通过使用原始的 JavaScript，你的代码将会更轻，更容易开发和扩展。你也不必花时间去学习一个或多个框架来使用。每个框架都以不同的方式工作，所以即使你已经知道要创建什么特性(可能因为你过去已经做过了)，你也会根据你选择使用的框架以不同的方式实现它。的确，你对 JavaScript 框架越熟悉，学习新框架的速度就越快，但是你总是需要花一些时间来深化这个主题(或多或少取决于你的技能)。此外，您选择的框架总有可能不会流行起来并被抛弃。相反，有了你自己的代码，就没有这种可能性，你也不必为更新和新版本的重大改变而烦恼。

框架有时是多余的，它们使小项目的结构过于复杂。如果你只需要他们的一些特性，你可以自己开发。

例如，现代 JavaScript 框架最流行的特性之一是双向绑定。如果需要，可以自己写实现它的代码。[这里有一个双向绑定的例子，只用了 100 行 JavaScript](https://gist.github.com/jcgregorio/7fa68cdced1181416559) 。一百行，不复杂，效果类似于框架的解决方案，最重要的是，缺少不需要的功能。为了实现这个特性，还有一种更现代的方法。你听说过 [Object.observe()](https://www.sitepoint.com/introduction-object-observe/) 吗？[这里有一个使用此解决方案的双向绑定功能的示例](http://www.html5rocks.com/en/tutorials/es7/observe/)。它可能看起来太超前了，因为不是每个浏览器都支持它，但看看它还是很有趣的。如果你想看另一个解决方案，[你也可以查看 bind.js](https://remysharp.com/2015/06/02/bind) 。类似的功能，但没有`Object.observe()`。

## 不使用框架的缺点

忽略 JavaScript 框架有时可能是一个不错的选择，但是您必须记住这种方法的缺点。

首先，没有一个框架，你就没有一个坚实的基础结构。在你真正开始开发你产品的特性之前，你必须做大量的工作。你想添加的功能越多，你需要的时间就越多。如果你正在为客户开发，这可能是一个非常重要的问题，因为截止日期很少是友好的。

其次，代码质量很重要。显然，这个因素取决于开发人员的技能。如果你很有经验，质量会很好。但是并不是每个人都真正掌握了 JavaScript，你也不希望项目的源代码变得混乱。写得不好的框架不会存在太久，而写得好的框架对于个人和商业项目都保持高质量。

既然说的是代码，就不能忘了 bug。每一个严肃的框架都是不止一两个人做出来的。由于成千上万人的贡献，人们很难不注意到 bug。如果你决定避免使用框架，你的应用程序将只由你和你的团队检查。如果你继续进行深入的测试，你可能会花费更多的时间！

同样的观点也适用于安全性。出于我之前提到的原因，它可能比框架中的要糟糕得多。如果有几个人在同一个项目上工作，就有更多的机会发现安全问题。我们可以说开发一个应用程序并不难，难的是让它变得更好更安全。如果你不觉得自己是专家，或者你担心安全性，框架或库会给你很大帮助。

还有跨浏览器兼容性的问题。有了好的框架，你可以忘记这一点。如果您使用原始 JavaScript，您必须自己处理它或者忽略它(这不是推荐的方法)。

我还想提一个关于雇佣开发者的问题。这可能是一个真正的问题，尤其是如果您想在开发的后期阶段这样做。除非他们有很好的经验，否则在他们开始工作之前，你必须向他们详细解释项目的来源，同样，这需要时间。即使你教他们所有他们需要知道的，通常也没有项目代码的技术文档。如果你的新员工有问题，你有责任提供帮助。当然，你可以自己写一个文档，但是要费时费力。

## 使用还是不使用框架？这就是问题。

根据目前讨论的要点，什么时候应该使用框架？你必须考虑几个方面。

让我们从可能是最重要的一点开始:时间。如果你的客户给你很紧的期限，不使用框架不是一个选择。在这种情况下，你必须开始快速发展，并有信心你有一个坚实的基础。如果你有经验，框架及其现成的解决方案非常适合这项工作。

另一个有趣的例子是大型应用程序。如果你正在构建一个非常大的东西，利用一个好的框架是你能做的最好的选择。它们拥有您可能需要的所有特性，并提供开箱即用的安全且高性能的代码。自己编写所有东西就像重新发明大多数功能的轮子一样，而且非常耗时。

如果你在没有框架的情况下构建复杂的应用程序，你可能会遇到无框架 JavaScript 的所有缺点。其中之一就是可能的 bug。如果你的应用必须可靠，而你又不是专家，框架是个不错的选择。即使你是专家，对一个复杂的应用程序进行深入的测试也会花费你大量的时间。如果你有，并且你的客户不介意，继续写你自己的代码。但通常没有这种安慰。

在某些情况下，官方文档很糟糕，但是如果一个给定的框架足够流行，你将很容易找到你需要的答案。对于初学者来说，用框架开发似乎更简单，因为他们不必自己处理一个结构来开发，他们可以简单地“遵循”框架的规则。

最后，如果你不是一个人，并且你有一个不断变化的大团队，框架就像是天赐之物。例如，如果你的应用程序是用 AngularJS 编写的，并且你雇佣了一个懂这个的开发者，他/她会给你的项目提供很大的支持。如果你使用 *my-company-framework.js* ，事情可能会困难得多。

如果不是很懂 JavaScript，自己写代码只能带来伤害。你的代码可能错误百出，不安全，效率也不够高。但是如果你知道你在做什么，为特定应用程序编写的代码可以更好地工作。对你来说，扩展会更简单，你会避免加载大量未使用的特性。因此，如果您有时间和经验，不使用框架可能是一个不错的选择。

对于拥有大量定制功能的大型应用程序来说，更是如此。您的应用程序面向大量用户这一事实并不意味着源代码一定非常复杂。如果你的应用程序很大但很简单，使用大型框架不需要的特性会让你付出很大代价。在大型应用程序中，你可能会碰到框架的墙壁，不得不开始使用低效的变通方法。如果你的应用程序非常具体，那么最好使用不同的方法。框架非常灵活，但是不能预测所有的场景。你是唯一知道它需要什么的人。

有时候，决定是否使用一个框架完全取决于个人偏好。如果你的应用程序不是很复杂，你可以设置自己的工作空间。为每个项目创建一个特定的工作空间总是更好，但这并不总是可能的。你需要高度熟练才能做到。

## 让我们在路中间见面

既然我已经讨论了框架的利弊，我们来谈谈另一种可能性。假设您有一个小项目，您不想使用大型框架，但是您的期限很紧。你是做什么的？

你不必卷起袖子，每天工作 12 个小时来满足它。当你想到*框架*的时候，你可能会想到一大堆特性，但并不总是这样。有许多小型轻量级框架和库用于要求较低的应用程序。有时候它们可能是最好的选择。

有很多极简主义的 JavaScript 框架可以采用。比如你可以给一个机会 [Sammy](http://sammyjs.org/) 只有 16kB 和 5.2K 压缩和 gzipped。Sammy 是建立在插件和适配器系统上的，它只包含你需要的代码。将您自己的代码提取到可重用的插件中也很容易。这是小型项目的绝佳资源。

作为替代，您可以使用超级小的 [Min.js](https://github.com/remy/min.js/) ，这是一个 JavaScript 库，用于执行简单的 DOM 查询和挂钩事件监听器。由于其类似 jQuery 的风格，它感觉非常直观，使用起来也很简单。它的目标是返回原始的 DOM 节点，然后可以使用`element.classList`、`element.innerHTML`和其他方法对其进行操作。下面是如何使用它的一个小例子:

```
$('p:first-child a').on('click', function (event) {
  event.preventDefault();
  // do something else
});
```

显然，它有一些限制。例如，您不能关闭事件。

你还需要另一种选择吗？这种情况下我可以建议你 [Riot.js](http://riotjs.com/) (1 kB)。Riot.js 是一个有很多创新想法的库，其中一些来自 [React](https://facebook.github.io/react/) 。但是，它尽量做得很小，更浓缩。

让我们以*自定义标签*为例。如果你使用聚合物，你可以用 T2 反应 T3。它允许你编写*人类可读的*代码，然后转换成 JavaScript。在 [Riot.js](http://riotjs.com/) 中，你可以拥有它而不需要任何外部库。

这里有一个来自官方网站的例子，展示了代码在转换前的样子:

```
<body>

  <h1>Acme community</h1>

  <forum-header/>

  <forum-content>
    <forum-threads/>
    <forum-sidebar/>
  </forum-content>

  <forum-footer/>

  <script>riot.mount('*', { api: forum_api })</script>
</body>
```

这只是该框架引以为豪的所有特性中的一个。你可以在网站上找到更多关于这个项目的信息。

还有我非常喜欢的 [Microjs](http://microjs.com/) 。它是“一个微型框架的微型站点”,为您提供了一套简化且快速的 JavaScript 框架和库。他们每个人都做一件事，而且做得很好。您可以根据需要选择任意数量的框架。有大量的模板、Ajax、HTML5 特性的解决方案可供选择。Microjs 帮助您摆脱充满无用特性的框架，并带来了另一个优势。提供的框架和库真的很小很简单。甚至很少能找到大于 3-4Kb 的文件！

回到前面提到的没有大框架的双向绑定的例子，为了在 Microjs 中使用这个特性，你认为我们需要做什么？我们必须访问它的网站，寻找一个可以集成的解决方案。你猜怎么着？它在那里！其中一个解决方案是一个名为[双发射极](https://github.com/tunnckoCore/dual-emitter)的微型库，其大小仅为 3.7kB。

现在，假设我们想要一个简单的模板系统。在搜索框中输入[“templating”](http://microjs.com/#templating)，你会发现一个长长的列表，你可以从中选择你想要的。您还可以将一个微型库与许多其他微型库结合起来，为您的特定项目创建特定的工作空间。你不用自己准备，也不用处理不需要的功能。

有很多可能性可供选择，有些比其他的好。你必须仔细挑选，选择最合适的。

最后，我想提到另一个伟大的项目，叫做 [TodoMVC](http://todomvc.com/) 。如果你很困惑，不知道该在你的项目中使用什么，这就是你需要的工具。制作精良的 JavaScript 框架列表每天都在增长，很难检查每一个框架的特性。 [TodoMVC](http://todomvc.com/) 替你完成工作。这个项目提供了相同的 Todo 应用程序，在当今大多数流行的 JavaScript MV*框架中使用 MV*概念实现。

## 结论

总之，你是否应该使用框架？决定权在你。在你开始开发之前，你必须考虑你真正需要什么，然后衡量每种方法的利弊。

如果你选择了一个框架，那么就寻找最适合你需求的框架。如果没有，寻找隐藏在微框架或微库中的现成解决方案。如果没有适合你的，你想自己开发。没有现成的食谱。你知道你的需求和技能。只有一个建议:专注于你的目标，你会找到正确的解决方案。

你呢？你曾经尝试过这些解决方案吗？哪一个？请在下面的部分分享您的意见。

## 分享这篇文章