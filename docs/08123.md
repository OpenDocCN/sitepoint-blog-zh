# 用 Ruby On Rails 保护网站的技术(第 1 部分)

> 原文:[https://www . site point . com/techniques-to-secure-your-website-with-ruby-on-rails-part-1/](https://www.sitepoint.com/techniques-to-secure-your-website-with-ruby-on-rails-part-1/)

嗯，不…

Rails 提供了一个出色的框架，为我们提供了完成所有这些事情的构件，但是实际的实现取决于我们，如果您不知道自己在做什么，那么很容易撤销所有 Rails 的努力。在这一系列文章中，我将探索如何在 Rails 中构建一个安全的网站，强调信任数据的危险，并探索保护用户的最佳实践。我们将看看 Rails 如何保护我们免受潜在问题的影响，以及如何让您的系统更加健壮。

该系列分为三篇文章:

### 都是数据的问题！

网站都是数据。数据传入、存储，然后呈现给最终用户。在建立网站时，你可能犯的最大错误就是相信那些数据。不要相信它的来源；不要相信它是什么；不要相信渲染时的样子。无论你是在建立一个个人博客，还是一个大型电子商务网站，当你开始受欢迎的时候，有人会试图利用你，他们很可能会通过操纵你的网站使用的数据来做到这一点。

在我们开始研究 Rails 如何处理这些问题之前，请检查您的 Rails 版本是否是最新的。Rails 是一个用来构建网站的库。无论您从事哪个领域的开发，使用最新版本的库都是至关重要的，因为它们通常会提供重要的安全更新。本文假设您使用的至少是 Rails 3.2.5。如果你不是，那么你应该考虑立即升级。

## 什么时候用户不是用户？

您无法知道攻击您的应用程序的数据来自谁或来自哪里。这是建设网站的一个基本原则。身份验证增加了一层安全性，但是您仍然不能保证访问您站点的请求来自经过身份验证的用户。黑客有很多方法伪装成用户，你有责任阻止他们这样做。

### 会话劫持

我坐在咖啡店里写这篇文章。我可以在几分钟内开始监视这里所有人的网络流量。如果您的网站的 url 以“http://”开头，并且有人正在登录您的网站，我可以拦截登录请求并以明文形式看到他们的密码。阻止我这样做的唯一方法是在那个登录页面上使用 [HTTP Secure](http://en.wikipedia.org/wiki/HTTP_Secure) ，它将加密用户和你的网站之间的流量。如果我窥探数据包，我会看到数据被发送，但我将无法理解它。

这保护了用户的凭证，是一个好的开始，但是它仍然不能保护用户的会话。我可以简单地等待，直到我们易受影响的咖啡饮用者登录到您的网站，然后拦截并[劫持](http://en.wikipedia.org/wiki/Session_hijacking)他们的认证会话，让我访问他们的帐户。因此，用 https 加密整个站点是绝对必要的。几年前，这是不鼓励的，因为 https 在处理时间、缓存等方面“昂贵”,但现在它已经成为公认的智慧，安全比速度更重要。事实上，利用现代技术，加密所需的额外时间实际上非常少。在我的网站上，我倾向于看到页面加载时间增加了 20 毫秒。我很高兴为我的用户的安全作出这样的权衡。

那么如何在 Rails 中实现这一点呢？你需要做三件事。首先，你需要[购买一个 SSL 证书](https://devcenter.heroku.com/articles/ssl-certificate)并设置你的网络服务器来支持 SSL。如果你使用 Heroku， [herokuapp 子域现在默认有 SSL](http://blog.heroku.com/archives/2012/5/3/announcing_better_ssl_for_your_app/)。在您自己的域上设置 SSL 很容易，基本上需要两个命令: