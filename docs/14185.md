# PHP 速度优化

> 原文：<https://www.sitepoint.com/php-speed-optimizations/>

Nathan Wong 声称在 PHP 中[单引号比双引号](http://insighttoinjury.com/archives/2005/02/27/php-speed-differences/)要快。

在最近的博客文章中，他试图证明 PHP 在使用单引号时比使用双引号时能够更快地解析和执行字符串常量。提供了基准测试结果和源代码。

这种加速背后的原因是，当 PHP 编译器遇到以双引号开头的字符串常量时，必须对字符串本身进行解析，并且特殊字符(如$、和{)具有特殊的含义。相比之下，如果字符串常量以单引号开始，只有反斜杠有特殊的含义，因此 PHP 不必担心替换嵌入在字符串中的变量和表达式。

Nathan 的结果表明，在他的测试中使用单引号时，速度提高了大约 16%。

这并不是这种优化技术第一次出现。由 [John Lim](http://phplens.com/phpeverywhere/) 撰写的这篇 [PHPLens 文章](http://phplens.com/lens/php-book/optimizing-debugging-php.php)是一篇非常全面的 PHP 小优化指南，并且已经随着时间的推移进行了更新，以反映 PHP 的变化。这篇文章解释说，虽然一些优化可以提高非常小的应用程序的速度，但是同样的优化在扩展到更大的应用程序时可能会产生负面影响。John 用短跑运动员和马拉松运动员的类比来描述对速度和可伸缩性有效的优化。

然而，有趣的是，John 将“单引号对双引号”的问题放在一个名为“无用优化”的附录中(靠近底部)。

> var= '。$var 比" var=$var"
> 更快，这在 PHP 4.2 和更早的版本中是正确的。这个问题在 PHP 4.3 中得到修复。注意(2004 年 6 月 22 日):显然 4.3 的修正降低了开销，但不是完全降低。然而，我发现性能差异可以忽略不计。

因此，虽然使用单引号而不是双引号可能会稍微提高性能，但其效果可以忽略不计，他正确地指出，还有许多其他优化将对应用程序的速度和可伸缩性产生更大的影响。

我推荐你[阅读文章](http://phplens.com/lens/php-book/optimizing-debugging-php.php),因为这是一篇很好的文章，写得很好。

当优化任何代码时，应该只关注那些占用大量运行时间的应用程序区域。优化一段只执行一次的代码并不像优化一段执行多次的代码那样值得你花费时间。因此，如果你有一个循环，它的内容将被多次执行，那么优化循环内部的内容是值得的。

在代码优化中要注意的另一点是，您需要比较进行优化的成本(您的时间，或者程序员的时间)和升级服务器硬件的成本。硬件相对便宜。

在我搜索实际的基准测试数据时，我发现了这个关于 [PHP 基准测试](http://www.php.lt/benchmark/phpbench.php)的页面。有趣的是，这个页面上显示的统计数据是实时的——显示的原始数据是服务器在您每次加载页面时计算出来的。

许多测试总共只持续几毫秒，因此基准测试的准确性可能不可靠。然而，即使这些也有助于说明哪些优化不是非常重要。最能说明问题的统计数据是遍历数组的各种方法，最慢的方法花费的时间是最快方法的八倍。

## 分享这篇文章