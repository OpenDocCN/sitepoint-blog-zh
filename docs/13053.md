# 制作“IE6 友好”的 PNG8 图像

> 原文:[https://www.sitepoint.com/making-ie6-friendly-png8-images/](https://www.sitepoint.com/making-ie6-friendly-png8-images/)

尽管最近 IE8 测试版引发了诸多热议和泡沫，但令人略感沮丧的现实是，在可预见的未来，IE6 仍将占据我们更多的思考(和噩梦)。即使 IE7 已经开始获得市场份额，我也不能说我花在编写 IE6 专用代码上的时间比两年前少了。悲伤却真实。

同样，如果我们曾经认为我们已经遇到了 IE6 提供的所有恶魔，我们也错了，正如乔治·赖利在上周的一次有趣的阅读中所述。

尽管乔治拥有 7 年的“微软内部”经验，但他花了 5 个月的时间试图消除持续的“应用杀手”IE6 浏览器在使用普通的[png 32 alpha-transparency hack](http://24ways.org/2007/supersleight-transparent-png-in-ie6)时挂起的问题。

事实上，即使他最终承认失败，并把他的图像转换为 PNG8 可以被视为一个清醒的教训，我们所有人。你能 100%确定你的 PNG32s 不会锁定至少部分 IE6 用户的浏览器*？*

 *当然，这些东西往往是一种取舍。

*   你会为大多数**IE6 用户选择更高质量的 PNG32 图像，并接受你可能会强行关闭一部分用户的事实吗？**
***   或者你在使用 PNG8 时很安全，但不得不勉强接受 IE6 中经常出现的丑陋、块状图像边缘？**

 **这似乎是一个魔鬼和深蓝的问题。

今天，我想我可能会运行我一直采取的方法之一，以改善 IE6 中的这些图像。

## 问题

![Two images- foreground PNG8 to be places over the blueprint background](../Images/849f9ac9ae1dcf7bd89289fbc043b144.png)

让我们举一个相对简单的例子，你可能会从网站上认出来。

左侧是便利贴图形(部分透明的 PNG8 ),我们打算将其覆盖在右侧的蓝图背景上。

![Nice edges in modern browsers](../Images/8aa031d76c3299af0bb1bb087b792a92.png)

正如我们所料，在所有现代的 hip'n'groovy 浏览器中，我们都可以看到黄色便利贴和蓝色背景之间的平滑融合。放大的部分显示了一个调色板，其中可能有 12 种黄色、蓝色和灰色，它们共同创造出一种柔和干净的过渡效果([这里用一个实例来测试](https://www.sitepoint.com/examples/png8-ie6/))。

![Ouch!  The render in IE6 is a show-stopper](../Images/bb9bf8f718a583a3d2771919cc3b6001.png)

不幸的是，在 IE6(和更低版本)中呈现的同样的图像是一个重大的失望，在我看来，是一个展示停止。

问题是所有与蓝色混合的半透明黄色和阴影灰色都被 IE6 渲染成了 100%透明。我们的像素不是黄色就是蓝色——而不是介于两者之间。

公平地说，这个例子中的互补色确实代表了绝对最坏的情况——“蓝色上的对角亮黄色”。尽管如此，最坏的情况一直在发生，所以我们仍然需要能够产生一个更可接受的结果。

## 方法

虽然我们永远无法在 IE6 中再现透明阴影，但我们确实需要一种方法来沿着边缘生成更多的黄色/蓝色混合颜色。我发现最简单的方法是在我们的黄色形状中加入一点点背景。

![Matched corder colors](../Images/22cdeb272997efb4716c0112b4a32de3.png)

在上图中，我:

1.  首先在原来的基础上复制主要的黄色形状
2.  设置它的填充颜色为“透明”,这样原来的形状就可以显示出来了
3.  将它的边框颜色设置为背景蓝色
4.  使用 Fireworks 中的刀具工具将新边框分成 4 条单独的线。这让我可以分别给每种边框颜色上色。
5.  导出了图形

当然，您可以选择通过将边框应用于实际笔记来简化该过程，但是将边框保持在单独的形状上可以让您在需要时有更多的自由来重新着色每个边缘。

![Final Graphic](../Images/b0432076028e454f85f54292add99f92.png)

这是最终的 IE6 友好的 PNG8 图形，[这是一个在蓝色背景前使用的例子](https://www.sitepoint.com/examples/png8-ie6/ie6-friendly.php)用于你自己的浏览器测试。

最后，这里是我之前准备的几个浏览器屏保。

![Final Ssreencaps](../Images/b30416219f1b91cd67967a3a5b89c683.png)

如你所见，火狐或者任何现代浏览器都没有明显的图像质量损失。透明的阴影还是一如既往的光滑有用。

然而，很明显 IE6 的结果比我们最初的结果超前了好几光年。没有阴影，但边缘清晰如我们所愿。

## 总结

正如你可能已经意识到的，这是一个更好的 PNG8 的“通用方法”,而不是解决 png 8 所有问题的灵丹妙药。的确，通过将我们的图形“烘焙”成特定的背景颜色，我们永久性地降低了它的灵活性。有*会有*这种方法不是一种选择的情况。

但是同样肯定的是，在许多情况下，这种方法(或其变体)将帮助您将笨重、难看、不可用的 IE6 渲染转换为完全可以接受的结果。

希望你能从中受益。

###### 最初发布于设计视图#43。

## 分享这篇文章***