# jQuery ICEpush 集成

> 原文：<https://www.sitepoint.com/jquery-icepush-integration/>

## **集成 jQuery**

jquery.icepush.js 为 Java Web 应用程序的 jquery 客户端提供了一个扩展库。

## **页面包含和初始化**

1.您需要在 Java web 应用程序中包含 icepush.jar。

2.ICEpush javascript 代码必须在应用程序中任何需要 push 的 HTML 页面的 head 标签中声明。

 `3.jQuery 库和 ICEpush jQuery 插件必须在 ICEpush javascript 之后声明。

 `## **jQuery ICEpush 插件 API**

 ****

## **全局函数**

$ . push . listen group(group name，callback)；

上面的函数将客户端页面添加到一个推送组，向 ICEpush 桥注册回调提供的侦听器。当指定组发生推送通知时，将触发回调的监听程序。

## **自变量**

**组名:**正在加入的 ICEpush 组名。

**Callback:** 这是一个监听器函数，当事件通知加入的组时，它将被调用。

## **例子**

假设客户机向一个名为“time”的 ICE 组注册了自己，并提供了一个匿名回调监听器函数。组“时间”不必在客户端的服务器上声明，它将在注册时由 ICEpush 桥创建。如果组“time”的任何通知发生，ICEpush bridge 将调用该函数，该函数将使用＄. fn . load(URL)jQuery 函数调用服务器，并更新页面上 id 为“timeElem”的元素。这些推送事件可以通过调用 ice.push.notify(groupName)在客户端触发；或者在 Java API 的帮助下从服务器获得。

```
$.push.listenToGroup("time", function(){
$("#timeElem").load('./time');
});
```

$ . push . stoplistingtogroup(group name，callback)；

这个特定的函数将从加入的组中删除客户端页面，从组中取消注册它。

## **自变量**

**组名:** ICEpush 组名。

**回调:**这是之前注册的监听器。如果不存在，将删除 ICEpush 组中的所有回调侦听器。

## **例子**

单击该按钮时，它将从“time”组中删除客户端页面，并且还将删除为该组注册的所有回调。

 `<input type="button" value="Stop Clock" onclick="$.push.stopListeningToGroup('time');">

[/抄送]

假设您有多个注册到时间组的不同回调函数，我们可以这样有选择地删除单个函数:

```
**成员函数**
fn.loadPushUpdates(组名，url)
这将向 ICEpush 组注册客户端页面，并在注册组发生 ICEPush 事件时调用自动提供的 url。当 push 事件发生时，将对提供的 url 发出 HTTP GET 请求，HTML 响应将被加载到从 jQuery 对象中选择的所有元素中。

## **自变量**

**组名:**加入的 ICEpush 组名。

 **url:** 这是组的推送事件将调用的 url。

## **例子**

开始的 jQuery 选择器代码是$('div.time ')，它选择脚本顶部的两个 div。的。loadPushUpdates('time '，')。/time’)；向 ICEpush 组“time”注册客户端页面。当“时间”组出现 ICEpush 通知时，url。将使用 HTTP GET 请求调用“/time ”,得到的响应将放在所选的两个 div 元素中。

```
$.fn.appendPushUpdates(组名，url)
上面的函数将使用 ICEpush 组注册客户端页面，并在注册的组发生 ICEPush 事件时调用自动提供的 url。同样，当 push 事件发生时，将对所提供的 url 发出一个 HTTP GET 请求，HTML 响应将被附加到 jQuery 对象的所有选定元素中。

## **自变量**

**组名:**加入的 ICEpush 组名。

 **url:** 将在组的推送事件中调用的 url。

## **例子**

这和$('div.time ')完全一样。loadPushUpdates("time "，"。时间”)；在上面的例子中，虽然内容将被追加到所选的元素中。在这种情况下，即使在任何更新之后，每个 div 的名称也将保持不变，因此从以前的更新中追加到元素中的任何内容也将保留。

```
 `## 时间戳

## 第二组时间戳` 

## 分享这篇文章

```

```

``````