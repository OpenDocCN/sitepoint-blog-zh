# 案例研究:AO.com 用 MongoDB 构建单一客户视图

> 原文：<https://www.sitepoint.com/case-study-ao-com-builds-single-customer-view-with-mongodb/>

*本文最初发表于 [MongoDB](https://synd.co/2MTByAK) 。感谢您对使 SitePoint 成为可能的合作伙伴的支持。*

**借助运行在 AWS 上的 MongoDB Atlas 和 Apache Kafka，转变客户体验、打击欺诈并满足 GDPR 的需求。**

在一个在线零售的标准和速度越来越高的世界里，作为一家零售商，focus 一直能够围绕其核心焦点:客户体验来区分自己。

在 2017 年初，很明显存在更有效地利用客户数据的巨大机会，以推动:

1.  持续改善客户体验
2.  更快识别欺诈
3.  符合欧盟新的 [GDPR 个人隐私法规](https://www.mongodb.com/blog/post/gdpr-impact-to-your-data-management-landscape-part-1)

AO 成立了一个新团队，授权他们为所有客户数据构建一个 360 度的单一视图平台。

为了确保他们能够快速行动并让团队专注于业务目标，团队选择在云中使用 [MongoDB Atlas 数据库服务](https://www.mongodb.com/cloud/atlas)。我们采访了 AO.com 的软件开发团队负责人 [Jon Vines](https://www.linkedin.com/in/jonathan-vines-26b30573/) ，他讲述了构建单一客户视图应用程序的经验、他的开发理念以及它对 AO 的影响。

### 你能先给我们讲讲 AO.com 吗？

AO.com 是英国领先的在线电器零售商之一。在 AO，真正推动我们并使我们与众不同的是我们对客户体验的执着。我们确保我们的员工有权做出对每一位客户最有利的决定，这意味着联络中心没有脚本或规则，我们只是做我们认为正确的事情。我们的向导总是问我们的妈妈是否会为我们每天所做的决定感到自豪，我们是否会以同样的方式对待我们自己的奶奶。

这一理念一直延伸到我们做出的核心技术决策。例如，我们三个核心业务模式支柱中的第三个是基础设施。我们知道拥有可扩展的系统非常重要，同时确保我们从投资和长期增长中获得运营杠杆和节奏的所有好处。

### 质量基础设施是 AO 战略的重要组成部分，您的团队想要实现什么目标？

我们的任务是整合 AO 内部的众多客户信息来源，为我们的每个客户构建一个单一的整体视图。我们的数据分布在许多不同的部门，每个部门都使用自己的技术。

最终目标是为所有客户数据提供一个真实的来源，以驱动大量新的和增强的应用程序和业务流程。这使我们的员工在拥有适当权限的情况下，能够从一个位置访问我们公司的所有有用数据，并且全部来自一个易于使用的运营数据层。

### 你能告诉我们一些关于哪些应用会使用单一视图的信息吗？

我们今天提供三个核心应用:

*   呼叫中心:对我们来说，一切都是为了客户，并不懈地努力让我们的客户满意。对我们的联络中心系统的评估表明，我们可以通过展示更多目前我们的代理无法获得的数据点来改善我们的客户之旅。这使我们能够提供更好的客户体验。
*   **欺诈**:欺诈灰色区域中的任何东西都会被传递给我们的欺诈团队，以便进行个人接触。随着公司的发展，我们不断寻找更高效、更有效的方法。这就是单一视图的由来。高吞吐量、低延迟功能以及多个不同数据源的聚合使其成为为我们的欺诈团队提供额外决策支持和异常检测的完美工具。
*   GDPR:我们需要能够告诉客户我们存储了他们的哪些个人数据。我们的营销团队需要能够在与我们的沟通中看到客户的偏好。单一视图使这一切变得更加容易。

这只是开始。还有更多项目正在开发中。

### 那么你是如何开始单视图项目的呢？

该团队成立于 2017 年 5 月，我们的第一项任务是确定源数据并定义我们正在运营的领域。我们有许多历史数据资产需要与实时数据混合。这意味着要使用微软 SQL Server 的多个实例，以及亚马逊网络服务(AWS)上托管的各种数据仓库和消息队列，包括 SQS。我们必须找到一种干净地提取数据的方法，而不影响源系统。

在转向原型和技术选择之前，我们花了几个月的时间对我们的数据资产进行编目。我们在 2017 年 10 月开始开发，仅仅三个月后的 2018 年 1 月投产。这一开发速度的关键是我们为单一视图平台选择的底层技术。

### 您使用什么从源系统移动数据？

作为一项业务，我们已经在 AWS 中运行，所以我们首先关注 Kinesis，但决定使用 Apache Kafka 和 Confluent 开源。我们可以使用 Kafka 的 Connect API 通过现有数据源上的变更数据捕获流提取数据，Kafka 将源数据流式传输并转换到我们的单视图数据模型中。这允许我们提取数据而不依赖其他团队，否则我们将不得不依赖他们来发布这些数据，或者让我们访问他们的源系统。

一旦数据进入 Kafka，它就开启了大量潜在的下游应用。单一客户视图只是其中的第一个。我们还可以使用 MongoDB 中的 oplog 将数据提取到 Kafka 中，这允许我们以非常自然的方式分离我们的微服务架构。

### 数据库层怎么样？

很明显，遗留的关系数据库永远不会提供我们需要的模式灵活性，所以我们探索了更现代的数据库选项。

在选择 MongoDB 之前，我们研究了许多不同的非表格数据库。很快就清楚了，MongoDB 的文档模型是我们的最佳选择。它支持丰富的客户对象，我们可以在任何阶段进一步丰富这些对象，而无需昂贵的模式迁移。强类型时态数据格式对我们的应用程序很有价值。就整体功能而言，对于我们的用例，MongoDB 是帮助我们实现目标的明确选择。

我们还找到了 [MongoDB 的构建单一视图的 10 步方法指南](https://www.mongodb.com/collateral/10-step-methodology-to-creating-a-single-view-of-your-business)——很明显许多客户之前已经用 MongoDB 做到了这一点——他们提供了专业知识、流程和技术的独特组合来帮助我们交付。

考虑到所有这些，将我们的数据和代码从早期的原型系统转移到 MongoDB 只花了不到一天的时间，从那里，我们没有回头。

### 你能告诉我们你为什么决定在 MongoDB Atlas 上运行吗？

我们是一个小型 DevOps 团队，有三名开发人员和一名业务分析师。我们拥有端到端的单一视图平台，从原型制作和开发一直到部署、安全性和持续运营。我们需要专注于满足业务需求，而不是管理数据库，Atlas 给了我们这一点。所有的运营最佳实践都包含在其中。我们不必担心数据库操作、监控或备份。Atlas 将所有这些服务自动化，这与我们在 AO.com 开发人员第一的精神完全吻合。

### MongoDB Atlas 对你来说表现如何？

Atlas 自推出以来一直坚如磐石。我们在 AWS Ireland 运行一个副本集，能够按需扩展和扩展，没有应用程序宕机。这一点尤其重要，因为我们目前在单一视图平台中管理着数百万订单和客户对象，并且现在正计划添加点击流数据，这将显著增加所管理的数据。

我们可以在大约 10 毫秒内处理复杂的查询，在 5 毫秒内完成写入。 [Atlas 提醒](https://docs.atlas.mongodb.com/monitoring-alerts/)非常棒——如果有任何需要注意的事情，我们会收到即时通知，并且我们可以根据需要添加自己的定制提醒。[性能顾问](https://docs.atlas.mongodb.com/performance-advisor/)对团队来说非常有价值——任何未编制索引的查询都会被捕获并提醒我们，因此如果需要，我们可以在几分钟内添加新的索引。总的来说，这些功能意味着我们可以对生产环境中发生的任何事情做出实时反应。

我们还计划开始使用用于 BI 的 [MongoDB 连接器](https://www.mongodb.com/products/bi-connector)来可视化单一视图上所有客户数据的指标。

### 你能告诉我们更多关于 AO.com 的发展理念吗？

实际上，这一切都围绕着为企业提供产品这一主题。我们的理念[遵循“三种方式”](https://itrevolution.com/the-three-ways-principles-underpinning-devops/):

1.  从左到右的流程——我们专注于尽快将想法投入生产。我们正在减少团队之间的依赖性，投资于持续集成和交付工具，并做出明智的技术选择来提高开发人员的生产力。我们的目标是在 30 分钟内从代码提交到产品化。
2.  扩大反馈循环–建立流程，以便我们能够不断与业务部门合作，确定哪些可行，哪些不可行。
3.  持续改进——尽早验证假设，使用反馈回路并做出改变。我们正在走向混沌工程。MongoDB Atlas 在这方面是一个很好的资产，因为它允许我们触发故障转移实验和其他条件来提高代码和平台的弹性。

如果这听起来像是你想要合作的那种开发团队，[那么我们正在招聘](https://www.ao-jobs.com/)！

### 最后，您如何衡量单一视图平台对业务的影响？

这仍处于早期阶段，我们看到这对企业有许多重大好处。短期内，我们将重点关注几个非常具体的指标:

*   **呼叫中心体验**–我们能够减少客户打电话的次数，因为我们的代理可以立即访问他们需要的所有数据。我们还致力于将平均电话处理时间减少 40%。
*   **欺诈**–我们正在帮助缩短欺诈检测周期，并积极监控潜在的欺诈趋势。我们还降低了拒绝率，减少了假阳性的数量。所有这些都释放了资源，更重要的是，改善了客户体验。
*   **GDPR 合规**–显然，有许多团队参与确保我们为此做好准备，但确保我们有一个可以轻松回答法律部门问题的平台至关重要。

当然，这一切只是开始。接下来，我们将关注数据分析，将单一视图数据作为服务提供给更多应用程序，并自动化更多业务流程。

### Jon，感谢你与 MongoDB 社区分享你的故事

如果你想了解更多，想看看 Jon 在 MongoDB Europe 上的表现，那么[请在这里](https://www.mongodb.com/europe18)预订您的门票。使用代码 **AO20** 享受八折优惠

要开始自己的单视图项目，请下载我们的 [10 步方法指南](https://www.mongodb.com/collateral/10-step-methodology-to-creating-a-single-view-of-your-business)。

## 分享这篇文章