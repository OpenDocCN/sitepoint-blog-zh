# 使用控件适配器进行更好的标记

> 原文:[https://www . site point . com/better-markup-with-control-adapters/](https://www.sitepoint.com/better-markup-with-control-adapters/)

在所有著名的服务器端语言中，ASP.NET 无疑是设计师中名声最差的。ASP.NET 的许多控件依赖于表格结构、内嵌样式和其他各种各样的东西，这使得网页设计师的生活很困难。为了在 ASP.NET 2.0 中缓解这个问题，微软引入了一个新的主题系统。不幸的是，对于这些主题，您唯一能做的就是改变分配给表结构的类名。

幸运的是，ASP.NET 有一个很棒的特性叫做控件适配器，它允许开发者对控件生成的标记有更多的控制。事实上，几个月前微软发布了一整套预建的 [CSS 友好控件适配器](http://www.asp.net/cssadapters/)。这些预建的适配器是清理许多 ASP.NET 服务器控件的标记的好方法，但它们可能不是您想要的。这篇文章将对构建你自己的控制适配器的过程有所启发。
 *在深入这个过程之前，您应该下载并测试 CSS 友好适配器集；它们在构建您自己的适配器时提供了很好的参考。*

使用控件适配器的主要目的是改变内置控件的呈现方式。使用这些适配器需要两样东西:一个适配器类和一个浏览器定义文件。适配器类定义如何呈现控件，浏览器定义文件确定哪些浏览器或代理应该使用适配器。

适配器类用于重写原始控件的呈现功能。该类必须从 WebControls 继承适当的适配器。adapters 命名空间(例如，菜单控件的适配器将继承 WebControls。适配器. MenuAdapter)。基本适配器类包含您将在控件适配器中重写的呈现函数。还应该创建一个包含 WebControlAdapterExtender 类实例的属性。extender 类将使您免于编写大量代码，并有助于确保您的改编控件仍能正常工作。

您将使用的主要函数是 RenderBeginTag、RenderEndTag 和 RenderContents。如果您的控件需要访问任何 javascript，您也可以使用 RegisterScripts 函数将它们添加到标题中。

RenderBeginTag 和 RenderEndTag 可以使用扩展器生成。扩展程序将创建一个 div，其 ID 是代码隐藏和其他控件可以识别的。RenderContents 函数是您实际生成标记的地方。您可以通过控件属性访问正在呈现的服务器控件的任何属性，并使用 writer 参数输出标记。CSS 友好适配器中的 MenuAdapter 类是如何呈现控件内容的一个很好的例子。它读取菜单的 Items 属性，并使用一对函数来呈现无序列表或列表项。

RegisterScripts 函数用于附加您可能需要的任何 javascript 文件。使用 RegisterScripts 的好处是，它会将 javascript 文件的脚本标记放在页面的页眉而不是正文中。它还可以防止同一文件被多次引用。如果出于某种原因，您需要将 javascript 放在主体中，这通常是不好的，您可以在 RenderContents 函数中呈现它。

希望这篇文章能对如何在你的 ASP.NET 应用中使用控制适配器有所启发。这些适配器肯定会帮助你创建一个更符合标准的网站，并且会让你的设计者满意。

## 分享这篇文章