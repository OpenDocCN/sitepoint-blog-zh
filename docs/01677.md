# 如何使用 Bit 在项目间轻松共享代码

> 原文：<https://www.sitepoint.com/managing-code-components-bit/>

在你的存储库和项目之间共享代码是我们产品成功的关键。

当您的团队无法共享代码时，您最终会在您的代码库中留下重复的代码——这必然会减慢交付周期，并使维护成为一场噩梦，因为每个更改都需要在多个地方进行长时间的重构。你还浪费了宝贵的时间和精力，并重新发明轮子，而不是建立新的东西。

![Share code between projects with Bit](img/b8a8e25165b67481e7100ff41f58e2c3.png)

随着您的团队和项目开始扩展，这个问题变得更加棘手。

Javascript 生态系统正在努力让代码共享变得更简单，出现了像 [Bit](https://bitsrc.io) 、 [Lerna](https://github.com/lerna/lerna) 等新技术。

让我们快速地看一下如何在 multirepo 和 monorepo 架构中作为一个团队轻松地共享代码。

## 共享代码的开销

代码共享的主要障碍是开销。

假设我们有一个存储库，我们希望将它的一部分作为一个包共享。
传统的工作流程迫使您将现有的存储库分成两个 repos，并使用其中一个来设置和发布包。现在假设您有 500 个包，您想从 50 个存储库中共享。

当您需要对这些包进行更改时，您将不得不在 500 多个存储库中进行更改，这势必会很快变得非常混乱，很可能最终会陷入依赖地狱。

如果您选择将整个项目重组为一个巨大的 monorepo，您可以使用 Lerna 将这些包保存在一个存储库中。这可以帮助减少在多个回购中进行更改的开销，但仍然会迫使您在回购中设置和维护这些包，手动处理它们的依赖关系树，并且仍然每个更改都必须通过原始回购的上下文作为事实的来源。

不管架构如何，这种类型的开销通常足以让代码共享变得非常困难。

Bit 通过让您以完全可控和可扩展的方式轻松共享、更改和使用来自任何回购或项目的代码，打破了这种开销。让我们看看怎么做。

## Bit:更快、可扩展的代码共享

![Bit - the fastest way to share code](img/e8d130aec049c4d1b7c3b687655ea699.png)

[Bit](https://bitsrc.io) 打破了我们所知的共享代码的开销，为每种类型的代码库架构提供了终极的代码共享体验。

您可以使用 Bit 直接从任何现有的存储库中共享您的部分代码(就像现在这样),并使用 npm 将它们安装在其他项目中，而不是分割您的代码库或强迫您去 monorepo(除非您想这样做)。

您根本不需要重新构建您的项目或者配置任何包环境。相反，您可以简单地将 Bit 指向您想要共享的代码组件(文件集)，让它为您定义它们的依赖树，然后将它们共享到一个称为作用域的共享位置。您还可以添加[构建测试环境](https://docs.bitsrc.io/docs/building-components.html)并让 Bit 确保您的组件准备好部署到生产环境。

从那里，您可以使用 npm 和 Yarn 安装不同的代码组件，就像任何其他包一样。
这里有一个包含这个[英雄组件](https://bitsrc.io/bit/movie-app/components/hero)的 React [作用域](https://bitsrc.io/bit/movie-app)的例子，它是从 GitHub 上的这个[应用程序共享的——它根本没有被改变。我也不需要把它分成更多的回复。](https://github.com/itaymendel/movie-app)

![Bit - the fastest way to share code](img/cdc4f46022568611135016d39f6f8734.png)

正如你所看到的，我的整个团队现在可以根据有用的视觉信息、测试结果、实时渲染(alpha)等来查找和选择组件。

现在真正酷的部分来了。

假设在使用 npm 的另一个项目中安装了这个组件后，我想对它进行一点修改。我所要做的就是使用`bit import`命令将它的实际源代码放入我的任何 repos 中的任何路径，并修改代码。Bit 将继续跟踪代码，即使是在我的项目中，并更新我的代码库的变更。

然后我也可以简单地将它共享回作用域(或一个新的作用域),甚至将组件重新作为我的项目的包依赖项。

分享代码花了大约 30 秒，并且没有对我的代码库进行任何修改。安装它是简单的使用 npm，没有位。改变它甚至更简单，直接从我的消费项目的上下文。

## 结论

在项目之间共享代码极其重要，但也很复杂。有了[位](https://bitsrc.io)，你可以轻松分享你项目的任何部分，并以你选择的任何方式在其他项目中使用它。你不必重组你的代码库，在多个回购或样板文件包中进行混乱的修改。

这是一个[开源项目](https://github.com/teambit/bit)，所以请随意开始，建议反馈，并了解更多！

[https://www.youtube.com/embed/vm_oOghNEYs](https://www.youtube.com/embed/vm_oOghNEYs)

## 分享这篇文章