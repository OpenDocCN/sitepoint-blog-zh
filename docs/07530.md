# 日志管理即服务

> 原文:[https://www.sitepoint.com/log-management-as-a-service/](https://www.sitepoint.com/log-management-as-a-service/)

# 什么和为什么:云中的日志管理

日志记录通常不是应用程序中最令人兴奋的部分，但绝对是重要的部分。在多节点集群环境中，记录和管理日志变得更加重要，因为日志分布在多个节点上。登录到每个节点来检查节点上发生了什么，或者跟踪可能分布在多个节点上的事务，这并不是一个非常有效的建议。此外，在节点上过滤和解析日志的能力受到本地工具的限制，例如*nix 系统上的 grep。有没有更好的解决办法？绝对的！欢迎使用日志管理或集中式日志记录，在下图中进行了高级演示

![Log management](../Images/df1cf04659f5da3af9146ccf450cb522.png)

这对于设置来说可能听起来很复杂，但是让我们看看它的好处，然后看看设置日志管理有多简单。

## 生产故障排除和应用程序调试

如果您正在对一个正在运行的应用程序进行故障诊断，日志将是拯救您一天的生命线。在开发环境中，有足够多的工具可以让应用程序的调试变得更加容易。但是对于生产中的应用程序，日志提供了关于应用程序中正在发生的事情的关键信息。另一方面，过于冗长的日志记录可能会影响应用程序的性能，但这是一个单独的话题，有一些工具可以根据环境来控制日志记录的级别。

> “调试语句留在程序中；调试会话是暂时的”

如果您将应用程序部署在私有/公共云中，或者甚至以集群方式部署在企业内部，那么如果可以在一个地方搜索和解析您的所有日志，那么对应用程序进行故障排除和调试将会容易得多。通过多个节点滚动数千行原始数据并试图将点连接起来的低效率将由日志管理系统解决，该系统提供所有日志的统一视图和丰富得多的查询界面。

## 数据分析

一个正在运行的应用程序有多个正在运行的用户交互和事务，能够从中收集实时信息是非常有价值的。可以将应用程序设计为记录关于事务的所需信息，并且可以实时分析和监控来自日志的这些信息。想象一下，如果一家零售公司的首席执行官可以实时统计实际购买中有多少购物车被转换。虽然分析本身是一个巨大的领域，但你会想到可能性。

## 监控和警报

能够实时报告错误、异常和崩溃可以导致减少停机时间的行动，并对实时应用中的问题做出更多主动响应。可以根据严重性级别设置警报，并采取相应的措施。

# 日志管理系统的功能

虽然每种产品和服务都有不同的特色，但我们在这里总结了一些你应该注意的特色。

### 向下钻取功能

基于时间的向下钻取是任何日志管理系统的一个非常标准的功能，它提供了查看相对于时间绘制的模式的能力，可以进一步向下钻取。例如，看看 LogStash 的截图:

![](../Images/01f4de728cb1ecf85a4ded64eb79e78e.png)

### 正则表达式和过滤

能够过滤随机文本，或者能够点击 UI 上显示的结果中的字符串，使得导航和查找相关日志更加容易和快速。此外，像 grok 这样的正则表达式库(例如 LogStash 附带的)有助于使用正则表达式，这是一项更简单的工作。

### 警报和通知

一个好的日志管理系统应该能够挂钩多个系统，比如电子邮件、websockets 来传递信息。这增加了系统的覆盖范围和有用性。

### 应用程序接口

最后但同样重要的是，在某些情况下，公开日志管理系统的 API 可以极大地提高平台的采用率和可扩展性。

# 要考虑的因素

这是一份明确的调查问卷，您应该在选择日志管理系统时进行分析:

*   您有哪种类型的应用程序？您有足够的钩子插入日志管理系统吗？例如，如果您希望 Android 应用程序将数据记录到日志管理服务器，您是否有支持相同功能的轻量级库？
*   开发应用程序的语言是否有更容易的方式与日志管理服务器通信？例如，log4j 有 SysLogAppender，它可以与 Syslog 对话，而 Syslog 又可以与日志管理系统对话。
*   您想要设置自己的日志管理系统，还是想要使用日志管理提供商的服务？(两种方法请参考以下章节)
*   如果您的应用程序托管在 PaaS 平台上，您能否将该平台与您自己的或托管的日志管理服务器集成在一起？

# 日志管理:自我设置

如果您计划建立自己的日志管理系统，无论是在企业内部还是在托管环境中，您都有很多选择。如果您的组织有购买支持的预算，并且希望企业级系统没有团队来维护系统，那么 [Splunk](http://www.splunk.com/) 可能是一个不错的选择。如果你有一个内部团队，他们已经准备好照看这个系统，并且更喜欢 DIY 方法，那么你可以从一组工具中为每个特定的目的进行选择。日志存储和索引可以在 MongoDB、ElasticSearch 中完成。像 [LogStash](https://www.elastic.co/products/logstash) 、 [Kibana](http://kibana.org/) 、 [Graphite](http://graphite.wikidot.com/) 、 [Greylog2](http://graylog2.org/) 这样的工具提供了不同的功能，你可以根据自己的需要混合搭配。

# 日志管理即服务

如果你想将日志管理作为一项服务添加到你现有的云端应用中，你可以在主要参与者中选择 [Loggly](http://loggly.com/) 、 [papertrail](https://papertrailapp.com/) 、 [logentries](https://logentries.com) 。虽然我们不会在本文中详细讨论它们，但是每一种都提供了自己独特的日志管理策略。

# 结论

您可以决定在您的应用程序中不给予日志足够的重视，但是日志和一个好的日志管理系统的好处是深远的。在一个横向扩展的环境成为常态、云每天都在被采用的世界里，一个好的日志管理系统是必要的，但也可以被证明是一个差异化因素。从生产调试到分析，组织已经开始从日志管理系统中获益。你的公司已经开始旅程了吗？让我们知道你的想法。

## 分享这篇文章