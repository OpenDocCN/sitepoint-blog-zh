# 抛弃 ERB:液体使用指南

> 原文:[https://www . site point . com/ditching-erb-a-guide-to-use-liquid/](https://www.sitepoint.com/ditching-erb-a-guide-to-using-liquid/)

![](../Images/312c5e969ff7351fcf4396cdda2ed664.png)

自从 rails 1.0 在疯狂的 2000 年代中期推出以来，传统 Rails 应用程序中的视图层没有发生太大变化。当然——你可能已经从 Prototype 转换到 jQuery，从 XHTML 转换到 HTML5，从 CSS 转换到稍微好一点的响应式 CSS——但是一直推动这一切的是我们的好朋友 ERB。也许是改变的时候了？

## 但是，ERB 怎么了？

ERB 对于某些类型的应用程序来说很棒——但它确实有一些缺点，无论是审美还是实用。

### 全红宝石色

有什么说法？权力越大，顾虑就越少。ERB 几乎可以让你接触到 Ruby 的全部强大功能。诱惑总是接近于调戏与视图代码中调用无关的模型和库。当然，只有一次不是犯罪，但诱惑是存在的，滑坡也是如此。

此外，能够在视图中执行任意代码意味着您的视图层被困在内部。你不能让外部人员为你的应用程序创建主题(如果这是你希望他们做的事情)，因为他们只是一个背叛者，而且如果你和他们闹翻了，糟糕的服务器不会造成一些真正的损害。

### 事情可以变得更好

如果说 Ruby 社区有一件事是真实的——也许有时是错误的——那就是人们普遍渴望代码变得漂亮。ERB 并不漂亮，但像小胡子和 HAML 这样的作品在美学上有所改进的同时，也保留了 ERB 的很多力量。

## 使用液体

我喜欢的模板语言是 Liquid。液体是从 Shopify 中提取的，为他们的店铺建设工作提供动力。我对 liquid 的欣赏有两个方面:首先，它提供了很好的安全模板，我可以让(超级)用户像 Shopify 一样进行编辑。第二，它使得应用程序的数据层和表示层之间的区别更加清晰。

### 入门指南

与大多数 Rails 一样，安装是一件轻而易举的事情(前往 Liquid 主页[获取最新说明](http://liquidmarkup.org/))。
一般来说，液态模板被解析，然后用上下文渲染。在大多数简单的情况下，上下文只需要是一个散列。编写模板时，散列中的每个键都成为变量名，其值对您完全可用。这些键的替换可以通过使用双曲线来实现: *{{x}}*