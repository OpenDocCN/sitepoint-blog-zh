# 替换 CreateTimeSpan()

> 原文：<https://www.sitepoint.com/replacing-createtimespan/>

*…发帖人* [大卫·梅德洛克](https://www.sitepoint.com/forums/member.php?u=24385) *:*

我最近在工作中阅读了一些 ColdFusion 优化技术，我发现可以通过消除 cfquery 标记的 CachedWithin 属性中使用的 CreateTimeSpan()函数来提高缓存查询的效率。

现在，我声明:这不是我的主意。我上周看到了它，但我无论如何也找不到它，我也不记得它在哪里了。(看起来像是融合之家，但我没有看到它，除非我错过了。)对于提出这本书的作者，如果你读了这篇文章，请让我知道，这样我就可以给予应有的赞扬。这很酷，我想我应该和这里的观众分享一下。

CreateTimeSpan 只需将日、小时、分钟和秒转换成十进制数。这是基于天数的。所以一天是 1，1 天 1 小时是 1.0416666666667 等等。因此，您可以通过自己做一点初中数学来消除对 CreateTimeSpan()的函数调用:

1 天:1

1 小时:0.041666666667

1 分钟:0.000001363666

1 秒钟:1.153746748741

如果你想自己算出各种分数，你只需要这样做:

小时:(h / 24) =时间跨度

分钟(m / 24) / 60 =时间跨度

秒= (s / 24) / 60 / 60 =时间跨度

这将为您提供一个数字，您可以将它放入 cachedWithin 中，以避免进行额外的函数调用。这是否有明显的不同，我不能说。如果您有很多缓存的查询，就有可能，特别是如果它们被频繁刷新的话。与任何优化技术一样，随着应用程序的增长，您将真正开始注意到这种差异，即使您在应用程序初期可能看不到这种差异。

**更正:**
居功至伟，这其实是在[融合之家](http://www.houseoffusion.com/)上我想的。实际上，它在一个我没有看的地方:头版。在优化过度杀伤下，你会找到更多的信息。感谢作者迈克尔·迪诺维茨指出。

## 分享这篇文章