# 从一开始就进行前端优化，第 2 部分

> 原文:[https://www . site point . com/front-end-optimization-from-the-get-go-part-2/](https://www.sitepoint.com/front-end-optimization-from-the-get-go-part-2/)

在优化你的网站的第二部分中，我们将讨论如何处理你的 CSS，并从中获取每一盎司的性能。如果你错过了，请阅读第一部分。在任何网页中，浏览器下载内容的顺序都很简单:它检索 HTML，告诉它从服务器请求的其他文件，而 CSS 提供所有样式，使其根据需要显示。提高前端性能会对整体转化率产生影响，包括点击率、平均停留时间、销售额，甚至[谷歌排名](http://www.mattcutts.com/blog/site-speed/)。

## 减少请求

![](../Images/ef82a4d6c2404d297d946ede2e6ec2a2.png "Even Darth Vader reduces requests.")Even Darth Vader reduces requests.

我喜欢把我的 CSS 放在很多文件中。仅用于我的页面的页眉或页脚的文件，用于主页——用于我的网站的每个部分。当然，这意味着如果我将它们包含在文档的头部，将会有大量的请求。因此，处理这个问题最简单的方法是将文件连接起来。这个有很多应用:[涡轮](http://turbine.peterkroener.de/)(看起来很像 CSScaffold)[榨汁机](http://cjohansen.no/en/ruby/juicer_a_css_and_javascript_packaging_tool)(听说过好东西，但还没试过)，还有我最喜欢的，CSScaffold(目前离线，但由 [Anthony Short](http://anthonyshort.com.au/) 创作)。这些将你的 CSS 连接成更少的文件(一个文件，如果适合你的设置)，这意味着你有更少的请求。

## 缩小和压缩

缩小规模可以节省很多钱。它通过删除所有不必要的空格和换行符来压缩您的 CSS，并将您的代码减少到尽可能少的行。这通常是在你让你的代码活起来的时候完成的，因为精简的代码非常难以处理。Gzipping 是一种服务器端压缩技术，可以节省大量成本。所有的现代浏览器都支持它，尽管[需要一点时间来设置好运行](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)，但这是值得的。上面列出的应用程序通常会有缩小和压缩选项来进一步减小文件大小。

## 将样式表放在顶部

这是一个显而易见的问题，你们大多数人已经在做了。通过在 HTML 头部链接样式表，用户的浏览器会尽快开始设计页面样式，使网页看起来像是正在加载。这可以让你的用户不再认为什么都没发生，不再沮丧，不再离开，因为他们确信浏览器正在响应。

## 使用`link`标签代替`@import`

一些性能的提高并没有让网站变得更快；他们只是让你的最终用户觉得网站*看起来*更快。使用样式时，应该使用`link`标签(`<link href="styles.css" type="text/css" />`)而不是`@import` ( `<style type="text/css">@import url("styles.css");</style>`)。它们是相同的，但是`link`标签会尽快显示 CSS，而`@import`会等到页面完全下载后才会在一些浏览器中显示。

## 避免内嵌样式

有人建议在 HTML 中内嵌一些(或全部)CSS，从而减少请求的数量。这听起来是一个好主意，而且有时它很方便；然而，以这种方式处理时，HTML 不会被缓存。通过将它保存在一个外部文件中，用户的浏览器将保存它，这样当用户返回时，它将使用该文件，而不是下载该文件的另一个副本。

## 特征

在优化讨论中，CSS 特异性是一个奇怪的话题。特异性就是某一种风格有多*强*；一个元素(例如，锚点、段落或表单)被一个类(“`.post`”)覆盖，该类又被一个 ID(“`#header`”)覆盖。安迪·克拉克说得很漂亮，他用《星球大战》主题的三层*形象解释了这个概念:西斯尊主代表身份(价值 100 分)，达斯·瓦德是职业(10 分)，风暴突击队是元素(1 分)。除此之外，特殊性(或者更重要的是，您倾向于编写的类有多具体)会对文件大小产生真正的影响！我们都做过这样的事情:编写包含两三个 id 的 CSS，可能是一两个类，然后是一个元素，所有这些只是为了样式化页面上的一个块。在理想的情况下，90%的样式应该只包含一个 ID、一个类，也许还有一个元素。即使这种风格的特异性得分为 111，也足以对抗其他风格。例如，`#container #content #header h1.logo`的强度为 311，但就文件大小而言，它的长度为 35 个字符。它可以很容易地减少到`#header h1` (101 分)，这使它减少到 10 个字符，因为应该只有一个 h1 元素。即使在可以有多个 h1 元素的 HTML5 下，包含多个 h1 元素的标题也没有什么意义。你可能会问，那又怎样？我们已经保存了 25 个完整的角色。但是扩展到两三千个字符的样式表(大多数大型网站最终都会扩展到这个长度，即使它被分割到多个文件中)。这可能是一个真正的大小节省等待发生。而且，像所有遗留代码一样，它只能做对一次——否则就会变成一场噩梦。诀窍是编写在整个样式表中使用更少细节点的样式，这样您就不需要在单独的样式中使用它。*

## 结论

我已经讨论了大多数能让你的 CSS 运行更快的规则。其中大多数都很容易实现，您会注意到页面加载速度的不同。在接下来的几篇文章中，我将介绍 JavaScript 和图像的处理，敬请关注。

## 分享这篇文章