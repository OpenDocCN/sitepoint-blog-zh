# ColdFusion 中的数据结构简介

> 原文:[https://www.sitepoint.com/data-structures-coldfusion/](https://www.sitepoint.com/data-structures-coldfusion/)

**我知道这是大家最喜欢的话题。当我拿到一本新的*学习<在这里插入语言>两分钟*书时，这肯定是我要找的第一章。**

嗯，好吧——也许不是。但是可怕的事实是，数据结构是我们作为开发人员存在的核心。无论您是构建一个运行在*nix 机器上的 shell 脚本还是一个成熟的 Windows 桌面应用程序，您都需要某种类型的数据结构。

任何对 ColdFusion 稍有了解的人都可能见过最基本的数据结构和变量。变量通常这样设置:

```
 <cfset myVariable = \"This is my variable.\">
```

许多人没有体验过 ColdFusion 更高级的数据结构的强大功能。不过，这没关系，因为在本文和下一篇文章中，我将向您介绍 ColdFusion 数组和结构(或 CF 中的“结构”)。

##### 数组

我们将从讨论 ColdFusion 如何处理数组开始。如果你曾经用其他语言开发过软件，你肯定对数组及其各种用途很熟悉。如果没有，也没关系——我会在这里解释它们。

数组只是一个容器，其中保存了几个同名的变量。例如，假设你有一碗水果，你想为每种水果创建一个变量。你从苹果开始:

```
 <cfset fruit = \"apple\">
```

现在，你有了一个水果，就是苹果。太好了！你继续看橙色:

```
 <cfset fruit = \"orange\">
```

等等！现在你有一种水果是橘子，但没有苹果。这是因为在第二个`<cfset>`中，你用“橙色”覆盖了“苹果”。那么，我们如何描述我们所有的水果，但仍然把它归类在同一个类别:水果？我们用一个数组来做这个:

```
 <cfset fruit = ArrayNew(1)>
```

这将创建一个名为`fruit`的数组。它使用函数`ArrayNew`，该函数接受一个必须是整数的参数。对于那些熟悉其他编程语言(例如 Visual Basic)的人来说，这个参数是有欺骗性的。这里的参数不是定义数组将包含多少个元素，而是定义它将有多少个维度。在我们谈论更多的维度之前，让我们继续讨论一维数组。现在我们已经创建了这个，我们可以添加我们的水果到它:

```
 <cfset fruit[1] = \"apple\"> 

  <cfset fruit[2] = \"orange\"> 

  <cfset fruit[3] = \"banana\">
```

完美！现在我们已经在一个变量名称中列出了整碗水果，所以我们可以很容易地跟踪它。让我们进一步研究一下。首先，在 ColdFusion 中，阵列都是动态的。这意味着 ColdFusion 不需要您预先告诉它您的数组将有多少个元素(其他语言，如 Java，需要这样做)。其次，数组索引从 1 开始，而不是从 0 开始。像 Java 和 C++这样的语言会通过设置`fruit[0] = "apple"`来开始上面的数组。

现在，让我们来讨论如何显示一个数组。真的很简单。我们将使用一个`<cfloop>`和`ArrayLen`函数。

```
 <cfloop from=\"1\" to=\"#ArrayLen(fruit)#\" index=\"i\"> 

    <cfoutput>#i# = #fruit[i]#<br></cfoutput> 

  </cfloop>
```

这并不难，是吗？这三行代码简单地转储数组的内容，每行一个元素。注意如何访问每个元素，在变量名的末尾使用`i`。这里发生的事情是，我们从 1 开始循环，将该值赋给变量 I。然后我们显示我们当前所在的位置，然后访问`fruit[1]`并显示它。接下来，它将 I 递增到 2，显示变量，依此类推，直到 I 等于数组的长度。

对于所有的 Java/C++程序员，我们循环到数组的实际长度，而不是长度减一。在 Java 中，这会抛出数组越界异常，因为索引从 0 开始，一直到长度减 1。

##### 多维数组

对于那些不熟悉数组的人来说，数组中存储的每个值都称为一个元素。每个元素几乎可以是任何类型的数据:变量(整数、字符串、布尔等。)、结构或另一个数组。当一个数组中的一个元素包含另一个数组时，就有了一个多维数组。请记住，如果您创建一个多维数组，如二维数组，第一维只能包含其他数组，而不是实际的文本数据(即字符串或整数)。

例如，让我们考虑我们上面创建的水果数组。现在，我们想跟踪每种水果的颜色。为了做到这一点，我们将在一个多维数组中跟踪我们的颜色。它看起来会像这样:

```
 <cfset colors = ArrayNew(2)>  

  <cfset colors[1][1]  = \"green\">  

  <cfset colors[1][2] = \"red\">  

  <cfset colors[1][3] = \"yellow\">  

  <cfset colors[2][1] = \"orange\">  

  <cfset colors[3][1] = \"yellow\">  

  <cfset colors[3][2] = \"green\">
```

这看起来可能有点复杂，但实际上并不复杂。我们所做的就是:

1.  定义二维数组
2.  为每个数组的第二维赋值

这是一个突击测验:我们总共有多少个数组？答案是:四个。有一个名为 colors 的数组保存着另外三个数组，分别叫做`colors[1]`、`colors[2]`和`colors[3]`。我们像对待水果数组一样对待最后三个数组，给索引赋值。我们现在可以像这样显示每种水果的颜色:

```
<cfloop from=\"1\" to=\"#ArrayLen(colors)#\" index=\"outer\">  

    <cfoutput><b>#outer# = #fruit[outer]#</b></cfoutput>  

    <blockquote>  

      <cfloop from=\"1\" to=\"#ArrayLen(colors[outer])#\" index=\"inner\">  

        <cfoutput>#inner# - #colors[outer][inner]#</cfoutput>  

      </cfloop>  

    </blockquote>  

  </cfloop>
```

这里，我们所做的是循环遍历顶级数组(第一维)并显示水果名称(来自水果数组)。警告:这样做不是一个好主意。水果的维度可能没有颜色多。这仅用于演示目的。

##### 真实生活

除非您正在创建一个非常简单的电子水果摊，否则当您尝试在现实生活中使用数组时，上面的示例不会给您太多帮助。这是一个我在某些场合如何使用数组的例子。

有时候，创建下拉框会很乏味，特别是对于一年中的几个月或者一周中的几天。这里有一个简单的方法来消除任务的单调。首先，我们将创建并填充数组。

```
<cfparam name="selectmonth" default="1">  

<cfset months = ArrayNew(1)>  

<cfloop from="1" to="#DateFormat("12/31/2003", "mm")#" index="j">  

  <cfset months[j] = DateFormat("#j#/1/2003", "mmmm")>  

</cfloop>
```

上面的代码确保一月将是所选择的月份。根据您的应用程序，您可以为此使用 URL 或表单变量。然后，我们创建一个从 1 到 12 的循环。注意，我们使用一年的最后一天，并将其输入到`DateFormat()`中，以获得月份号，即 12。然后，我们用月份名称从 1 到 12 指定每个指数。因此，当我们调用 DateFormat("5/1/2003 "，" mmmm ")时，它获取日期 2003 年 5 月 1 日，然后只提取月份名称。现在，我们将显示我们的选择框:

```
<select name="month">  

  <cfloop from="1" to="#ArrayLen(months)#" index="i">  

    <cfif selectmonth eq i>  

      <option value="#i#" selected>#months[i]#</option>  

    <cfelse>  

      <option value="#i#">#months[i]#</option>  

    </cfif>  

  </cfloop>  

</select>
```

这从数组的开始索引循环到结束索引以创建下拉框。它检查是否选择了当前月份，并在必要时将其标记为当前月份。就这么简单！您可以简单地复制并粘贴代码，在任何需要的地方创建下拉框。

这就是我们在 ColdFusion 中使用各种数组的概述。这些方便的数据结构在你会遇到的几乎每一种语言中都是必不可少的，所以要非常熟悉它们。你永远不知道什么时候你可能需要它们！

在我们的下一篇文章中，我们将深入讨论 ColdFusion 结构，所以不要错过它！

## 分享这篇文章