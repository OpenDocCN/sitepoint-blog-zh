# PHP 到 Sinatra

> 原文：<https://www.sitepoint.com/php-to-sinatra/>

谈到原型设计，没有理由说它不能用 PHP 来完成。我自己的核心 web 开发是用 PHP，但是我越来越发现我想要更好的东西。更好，也就是说，让 web 应用程序以最小的代价运行。

在本文中，我将假设您的起点和我的起点一样:精通 PHP 和 web(HTML 和 CSS)，但是正在寻找一个巧妙的原型工具。我们将安装 Ruby 和 Sinatra，然后我们将创建一个简单的博客，它不需要数据库，但是支持 [Markdown](http://daringfireball.net/projects/markdown/) 。

## 获取设置的选项

开始并不需要太多东西，主要组件是 Ruby 编程语言。Ruby 到处都有，但是设置起来有点麻烦。例如，如果你使用的 Mac 已经安装了 Ruby，但是没有你想要使用的版本。出于某种原因，苹果保留了 1.8.7 版本作为安装版本，甚至在 Mountain Lion 上也是如此。

### Mac 和 Windows

Ruby 1.9.3 是当前版本，那么我们如何安装它呢？如果你用的是 Windows 或 Mac，你很幸运。一个相对较新的选项叫做 [Rails 安装程序](http://railsinstaller.org)可用。它为您提供了一个可安装的程序，可以毫不费力地自动添加您需要的所有组件。你可能想知道为什么我建议你安装 Rails，而我们想要的是 Sinatra。答案很简单。Rails 安装程序也(几乎)提供了使用 Sinatra 所需的一切。

Rails 安装程序就像 WAMP 的 T1 或 T2 的 MAMP T3，如果你使用其中任何一个，你就会明白了。

例如，它将安装 Ruby、Git、Sqlite、你需要的编译器和 Ruby 版本管理器(RVM)。RVM 是一种在你的系统上管理红宝石的神奇方法。它的好处是，它安装在一个“沙箱”中，不会与系统中的任何东西发生冲突。

### Linux 呢？

如果你使用的是 Linux，Ruby 将会出现在你所选择的发行版的存储库中。你可能会发现 Ruby 的版本会很旧，所以我建议安装 RVM。最好的指导可以在 RVM 网站上找到。

### 红宝石

Ruby 使用一个称为 gems 的库系统。你可以把它们想象成类似于 PEAR 库的东西。无论你是通过 Rails 安装程序安装，还是直接通过 RVM 安装，你都需要安装 Sinatra gem。

再简单不过了。进入命令行并执行以下操作:

```
gem install sinatra 
```

现在，我不知道你怎么想，但这感觉比“发现”梨频道要轻松得多，不是吗？

顺便说一下，安装一个叫做瘦的漂亮的光滑的网络服务器也是值得的。如果安装了 Sinatra，它会自动拾取:

```
gem install thin 
```

## 构建应用程序——开始

如果你和我一样，你可能会通过一个框架进行大部分的 PHP 开发。这通常意味着将框架文件放到一个文件夹中，然后开始你的布局，或者数据层，或者任何需要先做的事情。它可能是设置配置选项和添加连接参数。而辛纳屈则没有这些。

> Sinatra 不是一个框架，它是一种特定领域的语言，这意味着它是为解决特定问题而设计的。

哦，当我这么做的时候，尝试比较 PHP 和 Sinatra 是不实际的。我所做的唯一判断是，我们多快可以让一些东西开始运行。

好了，该编码了。创建一个名为 *sinatra_projects* 的新文件夹，然后在里面创建一个名为*的博客*。使用你最喜欢的文本编辑器，创建一个名为 *main.rb* 的文件，并将其保存到*博客*文件夹中。接下来，创建一个名为 *public* 的子文件夹，以及另一个名为 *views* 的子文件夹。

*public* 文件夹将存储诸如样式表和图像之类的资产，而 *views* 文件夹将包含我们的用户将看到的界面。虽然可以将 Sinatra 应用程序拆分成多个文件，但大多数情况下这是不必要的。对于经典的 Sinatra 应用程序，只需在*博客*文件夹中创建一个名为 *main.rb* 的文件。

然后，我们将需要添加一些宝石，让事情的工作。因此，在 *main.rb* 文件的顶部，您只需添加:

```
require 'sinatra' 
```

Sinatra 通过响应 GET、POST、PUT 等 http 动词来工作。，所以很容易得到一些工作。在 *main.rb* 中，添加一个这样的方法: