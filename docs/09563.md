# 微软在 IE10 中删除条件注释

> 原文:[https://www . site point . com/Microsoft-drop-ie10-conditional-comments/](https://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/)

多年来，微软为 Internet Explorer 添加了许多功能。其中一些彻底改变了网络(XMLHttpRequest、DOM、XML 工具、字体嵌入、浏览器插件)。有些从未流行起来。有些真的很糟糕。

该团队打算删除 IE10 中几个不太成功的遗留功能(也许他们在 [*微软让我们再次爱上 IE 的 10 种方式*](https://www.sitepoint.com/10-ways-microsoft-could-make-us-love-ie/) 中读到了第 7 点)？)我怀疑您从未编写过 XML 数据岛和元素行为，但是您几乎肯定使用过条件注释。他们即将永远从 IE 中消失。

## 条件注释 101

确保你的网站或应用程序在所有浏览器中都能正常工作是很困难的。当你必须支持旧版本的 Internet Explorer 时，这变得尤其困难。IE6 发布于 2001 年，IE7 发布于 2006 年，IE8 出现于 2009 年。无论你对微软的看法如何，期望一个 10 年前的浏览器能像 Firefox 5 或 Chrome 12 一样渲染是不合理的。

网络开发者对 IE6 尤其苛刻。人们花了好几个月的时间来构建精彩的网站和应用程序，结果却发现它们在最后一刻被 IE6 破坏了。幸运的是:

*   IE6 的错误被很好地记录了下来,克服大部分问题是可能的——特别是如果你尽早并且经常测试的话。
*   微软提供了[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=VS.85%29.aspx),这样开发者可以针对 IE 的特定版本添加定制 CSS 和脚本修复。

检查几乎所有 HTML5 页面的源代码，您会在`head`中找到这段代码:

```
 <!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

它在 IE8 和更低版本中加载了一个垫片，允许开发人员设计新的 HTML5 元素，如`header`、`article`和`footer`。在 IE9 和其他具有原生 HTML5 支持的浏览器中不需要它——它们忽略了这个脚本。

条件注释非常有用，但就我个人而言，使用它们时我总是感到有点不舒服:

1.  它们闻起来有点像[浏览器嗅探——很臭](https://www.sitepoint.com/why-browser-sniffing-stinks/)。
2.  他们很少是必要的。IE6 的大多数问题都可以用一个*显示来解决:inline*这里还是一个*的位置:相对；*那里。虽然竞争浏览器不需要这些属性，但除了几个字节的额外带宽之外，它们没有负面影响。我更喜欢把我的 CSS 属性放在一个地方，而不是分布在两个或更多的文件中。
3.  条件注释被滥用。我曾不幸地在这样的系统上工作过，在那里开发人员创建了三个或四个单独的针对不同浏览器的样式表。简单的属性更新需要对每个文件进行更改。

## 为什么要删除条件注释？

IE8 通常表现良好，你只需要 HTML5 填充程序([见上面的](#html5shim))。除了几个 CSS3 例外，IE9 可以像任何其他浏览器一样进行渲染。希望 IE10 能赶上——甚至超过——火狐、Chrome、Opera 和 Safari。

不需要条件注释。没有必要使用*【if IE 10】*因为页面在所有现代浏览器中呈现(大部分)都是一样的。

也就是说，这并不是特征检测和渐进增强的终结。并非每个浏览器都支持 CSS3 转换、web 套接字、地理位置和客户端存储。即使有支持，用户通常也可以禁用或拒绝某项操作的权限。

另外，条件注释不会从 IE6、7、8、9 中消失。如果需要的话，你仍然可以把这些浏览器作为目标，但是随着时间的推移，这种需要会变得越来越少。

我为微软的决定鼓掌。这是一个大胆的举动，因为他们可以轻松地保留有条件的注释，我怀疑它的删除会让一些开发者感到害怕。然而，该公司坚持其*“相同标记”*理念，并确保 HTML、CSS 和 JavaScript 在任何浏览器或版本下都能正常工作。

这样做是对的。让我们希望 ActiveX、兼容性视图和旧的 IE7 工具栏的消亡不会太远！

## 分享这篇文章