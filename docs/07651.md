# 扩展您的 Web 应用程序:VPS 与 PAAS

> 原文:[https://www . site point . com/scaling-your-web-application-VPS-vs-PAAs/](https://www.sitepoint.com/scaling-your-web-application-vps-vs-paas/)

您已经将 Rails 应用程序部署到您的 VPS 或 Heroku。随着人们对你的应用程序越来越感兴趣，流量也开始增加。接下来，它就像病毒一样传播开来。然后您的应用程序崩溃…

关于 Rails 的可伸缩性或其他方面已经讨论了很多。传统观点认为，不是 web 应用程序本身由于高流量而崩溃，这只是缺乏硬件资源的一个简单例子。那么，在 VPS 上扩展您的应用程序有哪些选择呢？那赫罗库呢？让我想想…

### 首先，Rails 可以提供哪些帮助？

最佳建议是，我们应该尽可能地为我们的 Rails 应用程序打开页面缓存。我们在 Rubysource 上有一篇文章[提供了大量关于 HTTP 缓存的信息。](https://www.sitepoint.com/page-caching-with-http/)

底线是:页面缓存有助于服务器负载，因为正常的请求/响应周期是这样的:

*   来自客户的请求
*   Apache 传递请求说，杂种
*   Mongrel 将响应发送给 Apache
*   响应被发送到客户端

Mongrel 每秒可以处理大约 20-50 个请求，这对于一天 200 万次点击来说是不错的。通过打开页面缓存，Apache 可以(通常)从我们应用程序的公共目录中提供缓存页面，而不需要进一步请求 Mongrel。

对于 Rails，我们有三种选择:

#### 1.页面缓存

打开页面缓存后，web 服务器(Apache 或 nginx)可以完全避开 Rails 堆栈。这只适用于某些场景——例如，它不能用于需要认证的页面。

#### 2.动作缓存

动作缓存通过向 Rails 栈发送请求解决了上面提到的问题。使用 before 过滤器配置的操作包可以在提供缓存之前运行。这是一个强大的功能，因为这意味着身份验证可以在从缓存副本提供页面之前运行。

#### 3.片段缓存

片段缓存允许视图的一部分包含在缓存块中，并在缓存存储之外为每个请求提供服务。

例如，如果视图的一部分包含博客文章列表，您希望缓存该列表: