# JavaScript 和嵌入式系统:它们是好的组合吗？

> 原文：<https://www.sitepoint.com/javascript-embedded-systems-good-fit/>

嵌入式系统无处不在。他们操作你的洗碗机，控制你家里的温度，确保你的汽车引擎正常运转，并在紧急情况下帮助你刹车。嵌入式系统是硬件和软件的组合，执行非常具体的、预定义的任务。电子设备本身通常封装在其控制的设备内。它们通常配备有传感器和致动器来执行任务。有些有用户界面，但大多数没有，或者可能只有几个发光二极管来告诉它在做什么。

## 嵌入式系统功能

嵌入式处理器的处理能力通常取决于它们必须执行的任务。处理器可以从简单的 8 位或 16 位处理器(如 PIC、AVR、MSP 和 H8 等系列)到更强大的 32 位系统(如 ARM Cortex 或 SuperH)不等。由于价格降低，ARM 内核越来越受欢迎，简单的处理器大多对大批量产品感兴趣。它们的时钟频率通常不是很高——8 到 25 MHz 之间很常见，尽管 32 位系统通常以更高的速度运行。当然，也有一些应用更高功率的处理器，如 ARM7/9 或+500MHz 的 MIPS。

嵌入式操作系统的列表很长，但是嵌入式系统通常不使用操作系统。一个简单的“任务调度程序”通常就足够了，因为他们的任务相对简单，他们不需要一个真正的操作系统。

今天的问题是:我们能在这些嵌入式系统上用 JavaScript 做什么？

## 一些支持 JavaScript 的选项

有一些项目旨在使用 JavaScript 对嵌入式系统进行编程。我们都是 JavaScript 爱好者，当然也能看到一些好处。这些系统都实现了 JavaScript 解释器，并为硬件特定的功能提供了 API。

我要提到的第一个系统是 [Tessel](https://tessel.io/) 。它由一个基板组成，可以通过网站购买硬件模块进行扩展。基板配备齐全；它有一个 WiFi 模块和大量的可用内存。扩展模块也非常有趣——摄像头、蓝牙 LE、GPRS、micro SD 和相当多的传感器。唯一不幸的是，大多数都缺货或预购。但不要让这破坏了你的乐趣。他们的文档看起来非常好，并且有大量的代码示例可供选择。另一个好处是软件包管理是通过 npm 完成的。

然后就是 [Espruino 板](http://www.espruino.com)。像 Tessel 一样，它由 CortexM3 处理器驱动，将为您提供出色的性能。这个项目的主要区别是没有扩展板可用。然而，你可以通过连接电子设备把东西连接到系统上。这听起来像是一个消极的观点，但这并不一定。有相当多的库可用于特定的 ic。不过它们主要用于传感器和显示器。内存可能是这个系统的一个问题，因为你必须使用处理器的嵌入式内存。

## JavaScript 是正确的选择吗？

我觉得有必要问这个问题——在嵌入式系统上运行 JavaScript 是个好选择吗？如果你是一个业余爱好者，或者想尝试技术，而 JavaScript 是你的事情，我会说去吧。这两个项目都有潜力和可能性来创建有趣的应用程序。然而，如果你想要一个专业的解决方案，我会说:不(事实上是用大写字母)。嵌入式系统应该是可靠的和可预测的。运行在解释器上的代码无法保证正确的计时和响应时间。在内存很少的系统中，内存管理是另一件非常重要的事情。

## JavaScript 和网络界面

JavaScript 是为嵌入式设备提供 web 界面的完美方式。JavaScript 可以利用网络浏览器的力量创造一种设备本身永远无法产生的体验。为了能够提供任何服务，至少必须满足两个条件:

1.  该系统需要某种网络连接。
2.  系统必须能够通过该网络连接接受和响应 HTTP 请求。当然，HTTP 请求可以由其他系统代理。

大多数嵌入式处理器都有嵌入以太网控制器或外部接口的家族成员。大多数嵌入式操作系统都有 TCP/IP 库。在其他情况下，[轻量级 TCP/IP 栈](http://savannah.nongnu.org/projects/lwip/)是一个很好的选择，可以很容易地集成。这些贡献包括一个 HTTP 服务器示例。看看 WebSockets 是否可用，或者是否可以在平台上实现，这可能也很有趣。

系统和浏览器之间的交互最好使用 Ajax 调用来完成。它们相对简单，服务器的响应也很简单。这减少了嵌入式设备必须完成的工作量。它所要做的就是用参数解析请求的 URL，在其配置中设置一个值，或者返回请求的值。

我们可以使用 jQuery、AngularJS 等流行的 JavaScript 库来实现这一点。只需构建基本的页面，让库处理请求来填充值和处理表单。如果还有更多的东西要展示，那么一个更结构化的方法可能是创建一个使用 MVC 方法的应用程序。棱角分明是我的选择。

## 其他考虑

安全性是一个问题。大多数嵌入式系统没有很多库和能力来运行 SSL/TLS，所以一个重要的问题应该是，这是可以接受的吗？接下来，您可能需要进行身份验证。Ravi Kiran 在 SitePoint 上写了一篇关于[在 AngularJS](https://www.sitepoint.com/implementing-authentication-angular-applications/) 中实现认证的非常好的文章，如果你需要的话，我推荐这篇文章。

如果可能的话，您还会希望从嵌入式系统为应用程序提供服务。如果你不这样做，你会遇到与[同源政策](http://en.wikipedia.org/wiki/Same-origin_policy)的问题。如果系统只有有限的可用空间，或者 web 应用程序很大，您可以使用某种内容交付网络。仅在系统上托管初始 HTML 文件，并从 CDN 获取 JavaScript、CSS 和图像。这也允许您以后更容易地更新您的 web 应用程序。

## 结论

你完全可以在 JavaScript 上运行你的嵌入式系统。我提到的项目的硬件看起来很有前景。这有很多可能性。你对嵌入式系统和 JavaScript 有什么体验和想法？

## 分享这篇文章