# 如何编写更快的 JavaScript 条件表达式

> 原文:[https://www . site point . com/faster-JavaScript-condition-expressions/](https://www.sitepoint.com/faster-javascript-condition-expressions/)

JavaScript 中有一个有趣的优化特性，不一定适用于其他语言。考虑以下代码示例:

```
 var x = 10;
var y = true;

if (x*x > 1000 || y) alert("true!"); 
```

如您所料，因为 y 为真，所以输出“真”——即使第一个条件不满足。

JavaScript 解释器按顺序分析每个条件。如果我们将 x 改为 100，x*x 将大于 1000，计算结果为真。但是，因为我们使用的是逻辑 OR (||)，所以解释器永远不需要分析 y——表达式必须为真，这样才会显示警报。

因此，我们可以优化表达式，以确保首先分析那些需要最少处理的表达式，即

```
 if (y || x*x > 1000) alert("true!"); 
```

如果 y 为真，解释器将永远不需要计算第二个条件。这可以节省相当多的时间，尤其是当我们调用一个函数、执行密集计算或分析 DOM 时。

同样的优化也适用于逻辑 AND (&&)。在这种情况下，第一个计算结果为 false 的表达式将使整个条件为 false —无需进一步处理。

## 条件内的赋值

詹姆斯·爱德华兹最近写了一篇文章[赋值在一个条件](https://www.sitepoint.com/assignment-inside-a-condition/)里面，他讨论了代码，比如…

```
 if (summary = document.getElementById("post-summary")) {
	alert(summary.innerHTML);
} 
```

`summary`变量被设置为 ID 为“post-summary”的 HTML 元素。如果元素存在，则条件评估为真，并出现警报。如果找不到元素，则条件评估为 false，并且不执行任何条件代码。

这是一种有用的技术，尽管根据评论，很少有开发人员喜欢这种做法，因为它使 JavaScript 更难阅读和调试。

然而，还有另一个问题——如果有两个或更多的条件，你的赋值可能永远不会执行。例如:

```
 if (x || y = functionY()) {
	alert(y);
} 
```

如果 x 的值为真，解释器永远不会给 y 赋值，警报将总是抛出一个错误。

我们可以通过颠倒条件来解决这个问题，因此 y 总是被计算，例如

```
 if (y = functionY() || x) … 
```

即使这样，它仍然会引起混乱，因为这些条件的顺序不是很重要。阅读了本文上半部分的开发人员甚至可能试图通过首先评估 x 来优化代码！

总之，如果你想在条件中使用赋值，那就去做吧——但是要绝对肯定这是你需要的唯一条件！

## 分享这篇文章