# 保持你的 Rails 应用干净

> 原文:[https://www.sitepoint.com/keeping-your-rails-app-clean/](https://www.sitepoint.com/keeping-your-rails-app-clean/)

![](../Images/8b504270d293df71a182cae26497a471.png "railway")

图片来自 Fotolia(点击查看详情)

早在 17 世纪，天文学在欧洲风靡一时，这主要归功于望远镜的发明和生产。

结果，各种各样的人能够更多地了解并教给社会更多关于明星之类的东西，这一切都进展得非常好。但是，天文学不仅仅是看美丽的光；有很多计算。同样，这些也不是你在脑子里做的 114 加 26 的计算；它们任务繁重，有大量的数字和令人恐惧的运算链。

据推测，当时天文学的“研究生”被分配了围坐在一起为更有经验的天文学家处理数据的任务。

然后，一个叫约翰·耐普尔的人改变了一切。通过略微降低计算的精确度，他开发了(或者至少在欧洲引入了)“对数”系统，这使得算术变得容易得多(这是计算尺背后的基本思想)。

这就是 Rails 对 web 应用程序所做的。通过对如何编写代码和应用程序如何为用户服务做一些小的假设，它使得开发和部署高质量 web 应用程序的过程变得不那么痛苦。

但是，当你完成了前七八个月的 web 应用程序后，这种情况似乎开始改变了。模板分散，控制器臃肿，模型无所事事。缓慢但肯定的是，你的开发时间变慢了，特性交付越来越慢，最糟糕的是，开发 web 应用程序的乐趣消失了。

你肯定不希望这种事发生在你身上。

如果你愿意从一开始就投入一点时间，你也许能够防止这种情况发生。

所以，让我们从一些你在为这个将改变世界的令人敬畏的新应用程序编写代码时应该记住的事情开始吧。

## 模板中没有业务逻辑

模板不是用来为你的应用程序做“处理工作”的！不要把你所有的代码都推到模板上！

具体来说，业务逻辑就是你对数据做的任何事情。所以，如果你在计算一个人的年龄，这就是商业逻辑。

这样做的吸引力是存在的；每次只需要处理一个文件。如果你需要解决一些关于/用户/注册的问题，你知道问题在视图中，因为控制器和模型几乎是空的！

但是，还有其他问题会扼杀你的生产力。首先，代码的可读性受到很大影响，因为您用 HTML 输出来表达一切。

其次，它破坏了 MVC 的要点，即模块化。Rails 的很多生产力来自 MVC
结构，所以，尽你最大的努力保持并遵循它。

此外，将所有逻辑放在视图中会使抽象操作变得非常困难。例如，如果我想在我的应用程序中多次计算一个人的年龄，我可以编写一个方法来抽象这个计算。然而，当你把所有的东西都塞进视图中时，那是行不通的，你会不断重复。

考虑这个模板: