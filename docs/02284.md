# 为什么我使用 JavaScript 风格指南，为什么你也应该这样做

> 原文:[https://www.sitepoint.com/why-use-javascript-style-guide/](https://www.sitepoint.com/why-use-javascript-style-guide/)

*这篇文章由[蒂姆·塞韦里安](https://www.sitepoint.com/author/tseverien/)进行了同行评审。感谢 SitePoint 的所有同行评审员使 SitePoint 的内容尽可能做到最好！*

让我们来看看由 [@feross](https://twitter.com/feross) 撰写的 [JavaScript 标准样式](https://github.com/feross/standard)，这是一本越来越受欢迎的 JavaScript 样式指南。它可能会帮助你减少团队中的摩擦，增加程序员的快乐。

这是一套[规则](http://standardjs.com/rules.html)，使 JavaScript 代码更加*一致*，并可以防止对制表符优于空格的无聊讨论。这是你可以采用的众多风格之一，与其他 JavaScript linters 如 [JSLint](http://jslint.com/) 、 [JSHint](http://jshint.com/about/) 和 [ESLint](http://eslint.org/docs/rules/) 属于同一类别。

如果你不确定什么是 linters，或者为什么你需要一个，看看我们的[JavaScript 林挺工具的比较](https://www.sitepoint.com/comparison-javascript-linting-tools/)

## 风格的重要性

如果你已经写了一段时间的代码，毫无疑问你会有一种风格，你已经发展到像 T1 一样的风格。这就是当你成百上千次地编写某些模式时所发生的事情，你开始发现你的编码方式在美学上令人愉悦。突然有其他人出现，开始在奇怪的地方留下括号，并在行尾留下空格。可能需要有文字。**深呼吸**，你对括号的放置或空白的选择并不会让你的程序更正确，这是*个人的*偏好。

每种编程语言都有一种占主导地位的风格，有时就像 Python 一样，官方的 T2 风格指南被认为是编写程序的正确方式。等等，你说的是缩进的 4 个空格吗？

用一种语言的主导风格编码将有助于你的程序适应这种语言的生态系统。您还会发现，如果事情是熟悉的，并且在一开始就达成一致，那么为开源项目做出贡献以及让他人为您自己的项目做出贡献会更容易。

JavaScript 没有官方的风格指南，也许事实上的标准来自道格拉斯·克洛克福特的[好的部分](https://www.youtube.com/watch?v=hQVTIJBZook)。他的书介绍了一种编写可靠的 JavaScript 程序的方法，并强调了我们应该积极避免的特性。他发布了 JSLint 来支持这些观点，其他 linters 也纷纷效仿。大多数棉短绒是高度可配置的，让你选择最适合你的风格，更好的是，把它强加给别人！JavaScript 标准风格不同。你最喜欢的风格是*不相干*，重要的是选择大家都能理解和配合的东西、*任何东西*。

[![JavaScript Style Guide](../Images/82f31ce582d03b7e59ff8b111a405781.png)T2】](http://standardjs.com/)

> 采用标准风格意味着将代码清晰和社区约定的重要性排在个人风格之上。这对于 100%的项目和开发文化来说可能没有意义，但是开源对于新手来说可能是一个充满敌意的地方。建立清晰的、自动化的贡献者期望使项目更加健康。

如果你正在为自己写一个程序，没有其他人必须为之做出贡献，使用让你最快乐的工具和风格。在团队中工作时，你应该尽可能减少摩擦，要专业，不要为小事伤脑筋。

在引入您自己的风格之前，花时间了解现有代码库的风格。

## JavaScript 标准样式

*   2 个空格–用于缩进
*   字符串的单引号——除了避免转义
*   没有未使用的变量——这个可以捕获*吨*的 bug！
*   没有分号
*   不要以`(`、`[`或```开始一行
*   关键词后的空格`if (condition) { ... }`
*   函数名后的空格`function name (arg) { ... }`
*   总是使用`===`而不是`==`——但是允许`obj == null`检查`null || undefined`。
*   始终处理 Node.js `err`函数参数
*   总是用`window`作为浏览器全局前缀——除了`document`和`navigator`都可以
    *   防止意外使用命名不当的浏览器全局变量，如`open`、`length`、
        、`name`。

参见[完整的规则列表](http://standardjs.com/#the-rules)

最有争议的规则无疑是**无分号**。多年来，分号应该*总是*出现以避免错误一直被认为是最佳实践，Crockford 做了很多推广，但它也深深植根于 C 语言中，在 C 语言中分号是严格要求的，否则程序不会运行。

JavaScript 标准风格改变了我的想法，无分号的 JavaScript 很好。

自动分号插入是 JavaScript 的一个特性，可以减少噪音和简化程序，我从未在 T2 遇到过因为缺少分号而导致的错误，我相信你也不会。参见[JavaScript 中分号是必须的吗？](https://www.youtube.com/watch?v=gsfbh17Ax9I)了解更多相关信息。

并不是每个人都同意，著名的福克斯[半标准](https://github.com/Flet/semistandard)和[快乐](https://github.com/JedWatson/happiness)带着复仇之心带回了分号。我觉得这些叉子有点可悲，因为它们似乎错过了整个标准点。

> 我不同意 X 规则，你能改变它吗？
> 
> 不。标准的全部意义在于避免对风格的偏离。网上有很多关于制表符和空格的争论。那将永远无法解决。这些争论只会分散完成工作的注意力。在一天结束的时候，你必须“随便挑点什么”，这就是标准的全部哲学——它是一堆明智的“随便挑点什么”的意见。希望用户看到为自己的观点辩护的价值。

就我个人而言，我已经变得像没有分号的编码一样*，也许这是因为我花时间编写了需要较少语法的 Ruby、Python 和 CoffeeScript。不管是什么原因，我发现节目越少看越清晰。*

## 马克的好程序层次结构

程序员应该重视:

1.  正确性
2.  可读性
3.  快乐
4.  效率

事实证明，采用像 standard 这样的风格指南在这些方面都有好处。

### 正确性

要在所有程序中发挥作用，必须按照你的意图去做，并且没有错误。风格不会让程序变得更正确，但是 linter 可以在程序发布之前发现错误。

### 可读性

作为一名专业开发人员，除了提供一个工作程序，你的代码的可读性是最重要的。花在阅读和试图理解程序上的精力比写程序要多得多，所以为你未来的自己和其他继承你代码的人进行优化。

清晰可预测的风格使代码更容易阅读和理解。

### 程序员快乐

我最喜欢的一点是，它把焦点放在了人而不是机器上。它排在第三位的唯一原因是团队对可读的、功能性的代码的需求应该放在我们自己的幸福之前，尽管这不需要以牺牲自己的幸福为代价。

> 你想享受生活，不是吗？如果你能很快完成工作，而且你的工作很有趣，那就很好，不是吗？从某种程度上说，这就是生活的目的。你的生活会更好。
> 
> –松本幸弘

生命太短暂，不能因为个人偏好的不同而激动，设定一个标准，然后继续前进。如果一个标准的风格可以防止团队中的分歧和摩擦，你会更高兴。

### 效率

名单上的最后一个，但不是最不重要的。

如果你不得不在这些点上做出权衡，你应该重视正确的、可读的代码，让人们更喜欢*而不是*快速的代码。

电脑很快。如果程序足够高效，那就没问题。如果你注意到糟糕的性能*,那么*花时间寻找瓶颈并使代码更有效。

人类很慢。让事情变得更有效率对我们来说更有价值。采用标准风格所获得的清晰性使您的代码更容易理解和贡献。花在争论上的时间也少得多，这是最受欢迎的。

## 实现 JavaScript 标准样式

你可以不借助任何工具采用标准，只需通读[规则](http://standardjs.com/rules.html)并记下不同的规则。试用一个星期，看你喜不喜欢。如果没有，那就用吧！

还有一个林挺你的 JavaScript 代码的 npm 包。

```
npm install standard --global 
```

运行`standard`将通过 linter 运行目录中的所有 JavaScript 文件。

此外，还有针对所有常见问题的[文本编辑器插件](http://standardjs.com/#text-editor-plugins)，下面是如何在 Atom 中安装 linter。

```
apm install linter
apm install linter-js-standard 
```

![Screen shot of the plugin highlighting errors in Atom](../Images/60bd7bd0cf568b3b3e7b1877a1c204ed.png)

就我个人而言，我发现当你打字时程序自动林挺真的会让人分心。如果你有同样的感觉，你可能更喜欢在完成工作后使用这些棉绒。`standard`命令还有一个标志，可以自动修复某些样式错误，这可能会节省您一些时间。

```
standard --fix 
```

## 采用 JavaScript 标准风格

你应该采用标准风格吗？这完全取决于你。

如果你没有合适的风格指南，那就做好意见冲突的准备。

如果你已经完善了你的理想规则集，并且想在整个代码库中强制执行，那么 ESLint 可能就是你正在寻找的。

如果你不想把时间浪费在无聊的语法细节上，那就试试 JavaScript 标准风格，在下面的评论中告诉我们你的想法。

## 分享这篇文章