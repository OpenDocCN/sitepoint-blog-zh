# 构建 RESTful APIs 的 13 个最佳实践

> 原文:[https://www . site point . com/build-restful-APIs-best-practices/](https://www.sitepoint.com/build-restful-apis-best-practices/)

脸书、GitHub、谷歌和许多其他巨头需要一种服务和消费数据的方式。在今天的开发环境中，RESTful API 仍然是服务和消费数据的最佳选择之一。

但是你有没有考虑过学习一下行业标准？设计 RESTful API 的最佳实践是什么？理论上，任何人都可以在不到五分钟的时间内快速构建一个数据 API 无论是 Node.js、Golang 还是 Python。

我们将探讨在构建 RESTful API 时应该考虑的 13 个最佳实践。对于那些不熟悉 REST API 的人来说，看看什么是 REST API？查看简介和易于理解的示例。

## 设计第一个 RESTful API 的最佳实践

本文为您提供了 13 个最佳实践的可行列表。让我们一起探索吧！

### 1.正确使用 HTTP 方法

我们已经讨论了可以用来修改资源的 HTTP 方法:GET、POST、PUT、PATCH 和 DELETE。

尽管如此，许多开发人员倾向于滥用 GET 和 POST，或者 PUT 和 PATCH。我们经常看到开发人员使用 POST 请求来检索数据。此外，我们看到开发人员使用 PUT 请求来替换资源，而他们只想更新该资源的单个字段。

确保使用正确的 HTTP 方法，因为这会给使用 RESTful API 的开发人员带来很多困惑。最好坚持既定方针。

### 2.命名规格

理解 RESTful API 命名约定将对您有组织地设计 API 有很大帮助。根据你服务的资源设计一个 RESTful API。

例如，你的 API 管理作者和书籍(是的，一个经典的例子)。现在，我们想添加一个新作者或访问一个 ID 为`3`的作者。为此，您可以设计以下路线:

*   api.com/addNewAuthor
*   api.com/getAuthorByID/3

想象一下，一个 API 拥有许多资源，每个资源都有许多属性。可能的端点列表将变得无止境，并且对用户不太友好。因此，我们需要一种更有组织性和标准化的方法来设计 API 端点。

RESTful API 最佳实践描述了端点应该以资源名开始，而 HTTP 操作描述了操作。现在我们得到:

*   api.com/authors 邮报
*   去找 api.com/authors/3

如果我们想访问 ID 为`3`的作者写过的所有书籍，该怎么办？对于这种情况，RESTful APIs 也有一个解决方案:

*   去找 api.com/authors/3/books

最后，如果您想为 ID 为`3`的作者删除 ID 为`5`的书，该怎么办。同样，让我们遵循相同的结构化方法来形成以下端点:

*   删除 api.com/authors/3/books/5

简而言之，利用 HTTP 操作和资源映射的结构化方式来形成可读和可理解的端点路径。这种方法的最大优点是，每个开发人员都了解 RESTful APIs 是如何设计的，他们可以立即使用 API，而不必阅读每个端点上的文档。

### 3.使用多种资源

资源应该总是使用它们的复数形式。为什么？假设您想要检索所有作者。因此，您可以调用下面的端点:`GET api.com/authors`。

当您阅读请求时，您无法判断 API 响应是只包含一个作者还是包含所有作者。因此，API 端点应该使用多种资源。

### 4.正确使用状态代码

状态码在这里不只是为了好玩。他们有明确的目的。状态代码通知客户端请求成功。

最常见的状态代码类别包括:

*   200 (OK):请求已被成功处理并完成。
*   201(已创建):表示资源创建成功。
*   400(错误的请求):表示客户端错误。也就是说，请求格式不正确或缺少请求参数。
*   401(未授权):您试图访问您无权访问的资源。
*   404(未找到):请求的资源不存在。
*   500(内部服务器错误):每当服务器在请求执行期间引发异常时。

完整的状态代码列表可以在 Mozilla 开发者网站上找到。别忘了查看“我是茶壶”状态代码(418)。

### 5.遵循大小写约定

最常见的是，RESTful API 提供 JSON 数据。因此，应该实践驼峰式大小写约定。但是，不同的编程语言使用[不同的命名约定](https://www.chaseadams.io/posts/most-common-programming-case-types/)。

### 6.如何处理搜索、分页、过滤和排序

搜索、分页、过滤和排序等操作并不代表独立的端点。这些动作可以通过使用 API 请求提供的查询参数来完成。

例如，让我们检索按姓名升序排序的所有作者。您的 API 请求应该如下所示:`api.com/authors?sort=name_asc`。

此外，我想检索名为“Michiel”的作者。请求看起来像这样`api.com/authors?search=Michiel`。

幸运的是，许多 API 项目都有内置的搜索、分页、过滤和排序功能。这会节省你很多时间。

### 7.API 版本控制

我不经常看到这种情况，但这是对 API 进行版本化的最佳实践。这是向用户传达重大变化的有效方式。

通常，API 的版本号包含在 API URL 中，比如:`api.com/v1/authors/3/books`。

### 8.通过 HTTP 头发送元数据

HTTP 头允许客户端在请求中发送附加信息。例如，`Authorization`头通常用于发送认证数据以访问 API。

所有可能的 HTTP 头的完整列表可以在这里找到。

### 9.限速

速率限制是一种控制每个客户端请求数量的有趣方法。以下是您的服务器可以返回的可能的速率限制标头:

*   X-Rate-Limit-Limit:表示在指定的时间间隔内客户端可以发送的请求数量。
*   X-Rate-Limit-Remaining:告诉客户端在当前时间间隔内还可以发送多少请求。
*   X-Rate-Limit-Reset:告诉客户端速率限制将在何时重置。

### 10.有意义的错误处理

万一出错，向开发人员提供有意义的错误消息是很重要的。例如，Twilio API 返回以下错误格式:

```
{
    "status": 400,
    "message": "Resource books does not exist",
    "code": 24801,
    "more_info": "api.com/docs/errors/24801"
} 
```

在这个例子中，服务器返回状态代码和一条可读的消息。此外，还会返回一个内部错误代码，供开发人员查找特定的错误。这允许开发人员快速查找关于错误的更多信息。

### 11.选择正确的 API 框架

对于不同的编程语言，存在许多框架。选择一个支持 RESTful API 最佳实践的框架很重要。

对于 Node.js，后端开发人员喜欢使用 [Express.js](https://expressjs.com/) ，而对于 Python， [Falcon](https://falconframework.org/) 是一个很好的选择。

### 12.记录您的 API

最后，写文档！我不是在开玩笑；这仍然是传递关于新开发的 API 的知识的最简单的方法之一。

尽管您的 API 遵循了 RESTful APIs 的所有最佳实践，但是仍然值得您花时间记录各种元素，比如您的 API 处理的资源或者适用于您的服务器的速率限制。

想想你的开发伙伴。文档极大地减少了学习 API 所需的时间。

### 13.保持简单！

不要让你的 API 过于复杂，保持资源简单。正确定义 API 处理的不同资源将有助于避免将来出现与资源相关的问题。定义你的资源，还要准确定义它的属性和资源之间的关系。这样，对于如何连接不同的资源就没有争论的余地了。

如果你喜欢这篇解释 API 最佳实践的文章，你可能也会喜欢学习从零开始构建 RESTful API。

## 分享这篇文章