# 采访:SitePoint 如何管理和优化监控

> 原文:[https://www . site point . com/manage-and-prioritize-systems-monitoring/](https://www.sitepoint.com/manage-and-prioritize-systems-monitoring/)

*本文由 [PagerDuty](http://www.pagerduty.com/) 赞助。感谢您对使 SitePoint 成为可能的赞助商的支持！*

像许多开发人员一样，我希望东西能正常工作… *当它不能正常工作时，我会大发脾气！*在幕后，许多技术人员正在施展他们的魔法，将硬件、软件和服务集成到可工作的内聚系统中。在本文中，我采访了 Jude Aakjaer，了解他在 SitePoint 的 DevOps 职责和经历。

克雷格·巴克勒:嘿，裘德！*(抱歉，忍不住了。)*能告诉我们你是谁，你在 SitePoint 做什么吗？

裘德·阿克尔:嘿，克雷格。没问题——不出所料，我经常收到这样的问题！

我是 SitePoint 和 Learnable 的产品和系统开发人员之一。这意味着用 Ruby 和 PHP 进行后端编程，但也包括 DevOps 任务。

**CB:** 您每天面临的最大挑战和问题是什么？

**JA:** 明确的从噪音中分拣出信号。如果我们跳过每一封包更新邮件和网站异常，我们将永远无法完成任何工作！

除了更新，我们还需要修复代码中的问题和错误。无论您的代码有多好或多健壮，都会出现错误。挑战在于确定哪些问题需要立即关注，哪些问题可以作为更广泛的重构任务的一部分进行检查。

**CB:** 您从哪里收到警报？

**JA:** 我们使用各种工具来监控应用和服务的不同部分。

对于我们的 Ruby on Rails 网站，我们使用了一个通知程序 gem ( [Airbrake](https://airbrake.io/) )，它会在我们的代码抛出异常或出现其他意外事件时提醒我们。我们还使用外部监控网站( [Wormly](https://www.wormly.com/) )，该网站被配置为检测某些 HTTP 响应。最后，我们使用 [AWS CloudWatch](http://aws.amazon.com/cloudwatch/) 监控服务，提醒我们硬件问题或故障。

警报主要通过短信和电子邮件发送。可以想象，许多应用程序会从不同的角度发出消息。我们一直在寻求改进我们的监控工具。

**CB:** 您如何确定警报的优先级？你是根据商业价值影响、长期重要性、难度、谁喊得最响还是其他因素来确定他们的重要性？

**JA:** 警报优先级与上下文相关，我们手动确定顺序。很明显，如果我们的一个网站瘫痪了，那是最重要的！其他警报(如磁盘空间达到特定级别)被安排到每周审查任务中，并以更轻松的方式处理。

许多流程已经存在多年，我们可以快速确定需要做什么。例如，蠕虫警报总是很重要。Airbrake 报告特定于应用程序的问题，我们将检查问题频率，以决定何时应该修复它。

我们鼓励我们的开发人员在每次 sprint 中至少解决一个重复出现的错误。这也使我们能够将错误报告噪声保持在最低水平。

**CB:** 您如何计划新系统和服务的监控？

**JA:** 监控有多种方式，但必须从一开始就考虑到。

首先，我们希望监控应用程序运行的实际服务器。由于我们使用 AWS 进行部署，内置的 CloudWatch 统计数据让我们能够发现一些问题，例如持续的高 CPU 和内存使用率、磁盘空间不足或服务器无响应。

然后我们监控程序代码本身。这些工具报告应用程序中的致命异常或意外事件。

最后，我们监控外部世界看到的应用程序。监控系统向关键页面发送 HTTP 请求，并将其与已知的响应(如成功的请求、重定向甚至错误)进行比较。

我们所有的新应用和服务都应该遵循这个流程。当然，有时有些东西会漏掉。当这种情况发生时，我们编写额外的测试来检测未来的事件。问题第一次出现就被绊倒是一回事——如果问题出现两次，你就麻烦了！

我们使用各种工具和技术，但是自然地，我们的需求也在发展。工具与我们一起成长很重要。

**CB:** 你会给团队中过渡到 DevOps 模式的人什么建议？

JA: 这是一个宽泛的问题，但本质上，它是关于理解开发人员和系统管理员所关心的问题。开发人员希望有一个可以快速构建和部署的环境，这样他们就可以继续处理更有趣的应用程序开发问题。系统管理员希望确保创建最佳实践的安全性、隐私性和可扩展架构。有时这两种关注会发生冲突；建议采用务实的方法。

至关重要的是，您应该不断地构建和部署应用程序和服务器。您的编排和部署脚本必须不断得到锻炼和改进。你应该避免那些很少有人理解或能重现的 [*雪花*](http://martinfowler.com/bliki/SnowflakeServer.html) 系统。理想情况下，瞄准 [*凤凰*](http://martinfowler.com/bliki/PhoenixServer.html) 系统，团队中的任何人都可以在接到通知的瞬间烧毁并重生。

像对待牲口一样对待您的服务器，而不是宠物！它会让您有信心按需创建新堆栈或快速扩展。

**CB:** 谢谢裘德。我们感谢您为保持 SitePoint.com 服务正常运行所做的一切努力。

## 传呼机职责:阻止事件变成紧急事件

不是每个公司都有专家团队随时准备应对每一个警报。[page duty](http://www.pagerduty.com/)有助于管理事故、提高可见性和改善协作。核心功能:

*   PagerDuty 可以快速设置并与 100 多个系统集成
*   监控集中在一个位置，所有内容都可以在一个控制面板上查看
*   提醒是有效的——使用短信、推送通知、电话、电子邮件或任何适合你的方法
*   可以定义自动上报策略规则—系统可以为您排定工作的优先级
*   您可以轻松安排、协作和分析您的系统。

欲了解更多信息，请访问[PagerDuty.com](http://www.pagerduty.com/)。

## 分享这篇文章