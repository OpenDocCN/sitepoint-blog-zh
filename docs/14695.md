# 基于磁盘的查询缓存

> 原文:[https://www.sitepoint.com/disk-based-query-caching/](https://www.sitepoint.com/disk-based-query-caching/)

*…发帖人* [大卫·梅德洛克](https://www.sitepoint.com/forums/member.php?u=24385) *:*

我今天碰巧在 Macromedia 的 ColdFusion 开发人员中心注意到了这一点。我想这篇文章已经发表了一段时间，但是我想我应该把链接放在这里给感兴趣的人。

[使用 ColdFusion 将查询缓存到磁盘或内存](http://www.macromedia.com/devnet/mx/coldfusion/articles/query_cache.html)

这个作者还提供了一个定制标签来为你做所有的脏活。我从几个方面考虑了查询缓存:

假设您有 1，000 个客户端或用户，您构建了一个复杂的动态报告，以便用户 1 登录并查看该报告。其中有类似于(其中 UserID = #UserID#)的内容来为该用户提取报告。

好了，你可以开始看到问题了:1000 个用户= 1000 个复杂的报表。如果您使用 cachedWithin 缓存这些报告，那么您将很快破坏您的服务器。

基于磁盘的方法可能更好，但是首先，您仍然必须至少运行一次每个查询。如果您的数据经常变化，那么您需要每 x 小时运行一次，这取决于您的客户/用户希望或需要信息的速度。

无论如何，我一直在办公室处理一个巨大的报告，它来自我们所有最大的表(有些表有几百万行，并且每秒钟都在快速增长)。这个报告对系统造成了相当大的压力，所以我们把它移到了备份服务器上，这样它就不会在活动服务器上杀死我们。这样做没问题，因为备份服务器每天晚上都会更新。

嗯，这一切都很好，除了报告仍然是一个怪物。因此，在这种情况下，我采用了一种以前行之有效的方法:在一夜之间将一个报告构建到一个表中。然后，我所要做的就是查询一个表，并将结果显示在屏幕上。连夜构建报告可能会很乏味。这需要对您正在使用的 DBMS 和数据库的结构有很好的了解，但是它可以在您最忙的时候减轻大量的服务器负载。

总之，我的废话说够了。我只是想和你分享一下。对于那些经常处理非常大的系统和大量数据的人来说，它可能会使您的工作变得更加容易。

## 分享这篇文章