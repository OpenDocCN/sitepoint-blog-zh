# 以太坊的卡斯帕:赌注问题的幽灵证明

> 原文:[https://www.sitepoint.com/ethereum-casper-proof-of-stake/](https://www.sitepoint.com/ethereum-casper-proof-of-stake/)

每个复杂的社会都有许多需要大量参与者达成共识的情况。这样一个社会的主要优势是人们可以在不同的问题上达成一致并共同行动，可以解决比个人单独解决更多更大的问题。

社会是建立在共识基础上的。贸易、外交、金融——它们都有这个共识的先决条件。这就需要不同的治理机制达成共识。随之而来的，往往是大量的滥用，操纵和流氓球员。

为了防止不同的操纵，我们有了中央集权的机构，这给了我们达成共识和做出决策的效率。在不同政府模式的学生中，民主和效率之间的必要权衡是众所周知的。

虽然不同层次和不同模式的中央决策使我们成为一个成熟的、运转良好的社会，但它也导致权力和资源集中在少数人手中。在现代，像互联网和密码学这样的东西给了我们探索达成共识的新模式的力量。

[区块链](https://www.sitepoint.com/blockchain-what-it-is-how-it-works-why-its-so-popular)是现代发明之一，它应该使我们能够在没有集权和可信方的情况下达成共识。它的许多化身仍处于婴儿阶段，但我们可以有把握地说，如果它兑现了它的一部分承诺，它将帮助我们建立一个更有效率的社会，而无需进行权衡。

## 拜占庭容错

当我们开始设计(或想象)去中心化的机构、去中心化的组织时，我们可以将所有相关的逻辑和数据结构简化为*投票*和决策/投票的*分类账*。

分散化的理想包括健壮的、没有单点故障的应用程序。没有中央权威，而且*还没有*，我们应该能够保证账本的完整性。例如，我们需要知道我们的银行账户，或者投票结果，或者一些在线文本，或者一些在线对话的内容，或者一些数字身份*没有被篡改*。

没有核心的、可信的玩家，这可能会很困难。

在一个分散的、不可信的环境中，我们需要为流氓玩家提供[种情况，他们将试图操纵共识。简而言之:每个人都需要投票，但是没有人能够利用他们的投票权来欺骗系统。](https://en.wikipedia.org/wiki/Byzantine_fault_tolerance#Byzantine_Generals%E2%80%99_Problem)

当一个去中心化的系统——其中*由不可信方*组成——能够在其中存在背信弃义方的情况下运行时，我们说它具有[拜占庭容错能力](https://en.wikipedia.org/wiki/Byzantine_fault_tolerance)。

在创建一个去中心化的金融系统或关键决策系统的情况下，*欺骗系统*的动机是巨大的，所以这些系统需要防弹。

近年来的加密货币解决方案通过各种共识机制解决了“拜占庭将军问题”，结合了[密码学](https://www.sitepoint.com/cryptography-deep-dive)和各种[博弈论](https://en.wikipedia.org/wiki/Game_theory)策略。

## 共识机制

在区块链应用中——更狭义地说，加密货币——[不同的共识机制](https://bitfalls.com/2018/04/24/whats-the-difference-between-proof-of-work-pow-proof-of-stake-pos-and-delegated-pos/)实际上是解决我们上面概述的不可信系统的“流氓玩家”问题的方法——拜占庭将军问题。这些算法是阻止玩家欺骗系统的不同方法。这些玩家通常被称为 **[节点](https://bitfalls.com/2017/11/26/whats-bitcoin-node-mining-vs-validation/)**——具有区块链实例的计算机系统，或者验证新交易和*挖掘*新块的计算机系统。

设计共识机制是为了让欺骗系统变得无利可图，或者不值得努力。

在本帖中阅读更多关于这些机制的内容。

## 以太坊共识算法

![Ethereum logo](../Images/341a058c278fbac6786d4edd51bc45ea.png)

也许现在最主流的共识算法是 PoW(工作证明)。这种算法将网络的完整性押在解决哈希难题所需的难度上。对 BTC 工作证明的最基本解释是，挖掘节点获取事务，并尝试用一个数字(一个 **nonce** )将它们散列在一起，以便得到的散列以预定数量的零开始。起始零的数量越多，难度越高。挖掘节点通过强力尝试找到最小可能的随机数，该随机数与块中的事务一起散列，满足给定的条件。

以太坊开发者将去中心化和民主化作为其目标——因此，与比特币相反，ASIC 抵制。这导致了使用 [ETHASH](https://github.com/ethereum/wiki/wiki/Ethash) ，这是一种强调操作内存的速度而不是原始计算能力的算法，这为使用显卡提供了一些优势，并减少了开发 ASICS(专用集成电路)的动机——专用的、专门的硬件，专门为解决特别是区块链的功耗问题而开发。

以太坊 PoW 的另一个功能是 *Ghost 协议*，实现该协议是为了通过为孤立块分配奖励来打击集中化，这些孤立块是由矿工挖掘的，这些矿工在首先创建下一个块的比赛中失败，但仍然挖掘了一个有效块。

“Ghost”是[Greedy heavy Observed Subtree](https://github.com/ethereum/wiki/wiki/White-Paper#modified-ghost-implementation)的缩写，是解决我们提到的问题的一种相当复杂的方式。

工作证明有很多瑕疵。为了让系统正常工作，理想情况下，每个节点都必须能够验证区块链交易的完整性，也就是说，它必须存储和验证整个区块链历史。正如[以太坊的维基所说](https://github.com/ethereum/wiki/wiki/White-Paper#scalability)，以太坊和比特币一样，

> 其缺点是网络中的每个节点都需要处理每个事务。

此外，工作证明的能源效率非常低，而且网络运行需要大量的能源，这成为一个巨大的负担，网络[变得脆弱](https://bitfalls.com/2017/08/21/is-bitcoin-unstoppable/)。工作证明(即使有 ETHASH)也仍然在与集中化趋势作斗争，矿工集中他们的资源，网络依赖这些矿池，以及其他[基础设施问题](https://bitfalls.com/2017/11/29/new-threat-bitcoin-internet-service-providers/)。

## [卡斯帕，“友好的幽灵”](https://blog.ethereum.org/2015/08/01/introducing-casper-friendly-ghost/)

![Casper logo](../Images/03e3b8e22b797816f7b74cb33a118073.png)

以太坊即将发布的 Serenity 版本计划将以太坊区块链过渡到 PoS(利害关系证明)共识协议。这个协议被称为 Casper，因为它实现或修改了我们提到的 Ghost PoW 的许多原则。目前，Vitalik Buterin 和 Vlad Zamfir 都在开发这个版本，许多最终细节仍未最终确定。

卡斯帕的精髓是押赌注和下注。验证节点将投入一定数量的加密货币——比如说 1000 ETH，或者更多——这将使它们能够参与交易和区块生产的验证。通过消除对密码难题解决方案的搜索，我们可以期待网络更大的可扩展性。

验证节点将产生块，并且*在事务的有效性上下注*。这些事务/块随后将由其他节点验证。如果验证节点将赌注押在将一些无效交易提升为有效交易上——换句话说，如果验证节点*试图欺骗*——他们将失去他们的赌注，以及他们在验证过程中的位置。

这种*下注*，并且可能*输掉股份*的方法，是以太坊解决*无风险问题*的方式，当验证者的最佳策略是在不冒任何风险的情况下支持区块链历史(交易)的每一个可能版本时，就会出现这种情况。换句话说，就是打击矿商支持欺诈交易的积极性。

如果没有这个解决方案，如果矿工们只有通过支持任何版本的区块链历史获得回报的前景——正如[以太坊的 PoS FAQ](https://github.com/ethereum/wiki/wiki/Proof-of-Stake-FAQ) 所说的那样——

> 如果所有参与者都是狭隘的经济理性，那么即使没有攻击者，区块链也可能永远不会达成共识。如果有一个攻击者，那么攻击者只需要制服利他节点(他将独占原始链上的股份)，而不是理性节点(他将在原始链和攻击者的链上都有股份)，与工作证明相反，攻击者必须制服利他节点和理性节点

因此，这是确保区块链分类账及其交易完整性的一种方式。

当节点的赌注达到 1000+ ETH 时，他们的动机主要是保住他们的股份。请记住，验证节点是随机选择的，所以流氓玩家不能确定他们将能够超越验证过程，这使得即使试图欺骗系统也是非常昂贵的。

在未来，所需的股份可能会减少，以允许网络的更大分散。以太坊的创始人提到随着时间的推移，它有可能下降到 10 以太。

## 股权证明的优势

*   它很节能。

*   由于开采新区块的成本更低(无论是能源方面还是硬件方面)，保持网络运行所需的激励更少。

*   激励需求的减少解决或减少了电力系统中需要解决的一系列问题，如难度调整，并且通常降低了调节网络所需的机制的复杂性。

*   与 PoW 系统中 51%的攻击相比，攻击者不会失去他们的主要攻击武器和硬件，试图超越以太坊网络的攻击者会失去他们力量的主要来源——他们的股份。

## PoS 的问题

人们指出的关于 PoS 的一个主要问题是，某种程度的集中，或“富人越来越富”的问题。来自网络的回报只会给那些已经拥有大量资本的人。

最近在库拉索岛举行的一次会议上，VMware 著名的分布式系统专家 Dahlia Malkhi [指出了这些问题](https://www.coindesk.com/fundamentally-vulnerable-ethereums-casper-tech-takes-criticism-curacao/)，强调这是“给有钱人权力”。

但那些在过去几年中关注加密行业的人已经看到了“鲸鱼游戏”和市场操纵的公平份额，即使是在那些以其不同的去中心化机制而自豪的加密货币中。很难声称任何机制将固有地确保公平*和*效率*和*安全性和容错性。

因此，也许在这里成为完美主义者是不现实的，对不同设计决策的后果的推测并不总是可靠的。此外，富人也越来越有钱。事实上，只有当你富有时，你才有可能成为一名高效的矿工。在以太坊，每个人都将有能力成为一名“矿工”。

## 结论

我们仍然不知道以太坊升级的最终形式，甚至它的核心开发者[似乎也不总是在同一页面上](http://cryptobible.io/vlad-zamfirs-ethereum-casper-upgrade/)。围绕着有两个[版本，但是](https://ethereum.stackexchange.com/questions/31797/casper-ffg-vs-casper-ghost-cbc) [Serenity 即将到来](https://github.com/ethereum/wiki/wiki/Releases)，随之而来的还有 Casper 和协议的其他改进，提高了它的可扩展性和效率。如果它与“君士坦丁堡”更新一起推出——正如猜测的——我们可以看到 Casper 在 2018 年底出版。

## 分享这篇文章