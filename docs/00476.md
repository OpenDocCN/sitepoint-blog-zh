# 如何正确组织代码库中的文件&避免混乱

> 原文:[https://www.sitepoint.com/organize-project-files/](https://www.sitepoint.com/organize-project-files/)

主库、数据、UI、文档和 wiki、测试、遗留组件和第三方组件……我们如何跟踪和维护所有这些内容的顺序？组织代码库中的文件可能会成为一项艰巨的任务。

放松——我们有这个！在本文中，我们将回顾小型和大型项目中最常见的系统，以及一些易于遵循的最佳实践。

## 何必呢？

与几乎所有与[项目管理](https://www.sitepoint.com/premium/books/effective-project-management-traditional-agile-extreme-hybrid-8th-edition?utm_source=blog&utm_medium=articles)相关的任务一样——文档、软件提交、部署——你将从有意识的、程序化的方法中获益。*这不仅能减少现在的问题，还能为你和你的团队节省宝贵的时间*，在将来你需要快速访问和查看东西的时候。

无论你现在正在编写什么，你肯定能从脑海中回忆起函数名，并迅速找到你需要编辑的文件，并敏锐地分辨出什么有用，什么没用——或者你是这么认为的。但是你能对你去年做的那个项目说同样的话吗？

让我们承认:**软件项目可能会持续几个月，甚至几年**。一个简单的[自述文件](https://en.wikipedia.org/wiki/README)可以为*你的同事或者你未来的自己做很多事情*。但是让我们想一想你可以组织你的项目的其他方法，并且建立一些基本的规则来命名文件，处理项目文档，并且在某种程度上组织一个可以经受时间考验的有效的工作流程。

## 理解事物

我们将为组织项目中的文件建立一个“基线”——在软件开发范围内的许多情况下，这个逻辑将为我们服务。

正如我们关于[以正确的方式](https://www.sitepoint.com/committing-changes-right-way/)提交代码库变更的规则一样，这些规则都不是一成不变的，不管怎样，你和你的团队可能会提出不同的指导方针。无论如何，*一致性是游戏的名字*。确保你理解(并讨论或争论)这些规则是什么，一旦达成共识就遵守它们。

### 强制设置

这是几乎每个软件项目都应该有的文件参考列表:

*   **README** :这是 GitHub 在源代码树下呈现给你的内容，它可以*很长时间*解释这个项目是关于什么的，文件是如何组织的，以及在哪里可以找到更多的信息。
*   变更日志(CHANGELOG):列出每个版本或修订版中的新内容、修改内容或停产内容——通常为了方便起见，按时间倒序排列(最后修改的放在最前面)。
*   **复制许可证**:包含软件许可证全文的文件，如有必要，还包括一些额外的版权信息(如第三方许可证)。
*   **。gitignore** :假设您使用了 [Git](https://git-scm.com/) (您很可能会这样做)，这也是告诉哪些文件不要与存储库同步所必须的。(参见 [Jump Start Git's primer on。gitignore](https://www.sitepoint.com/premium/books/jump-start-git/read/2/jyzj6fb9?utm_source=blog&utm_medium=articles) 和[文档](https://git-scm.com/docs/gitignore)获取更多信息，看看[有用的收藏。gitignore 模板](https://github.com/github/gitignore)获取一些想法。)

#### 配角

根据项目的不同，您还可以考虑包括一些附加文件:

*   `AUTHORS`:对参与编写代码人员的表扬。
*   `BUGS`:已知问题和报告新发现 bug 的说明。
*   `CONTRIBUTING` / `HACKING`:准贡献者指南，对开源项目特别有用。
*   你已经知道那是什么了。；)
*   `INSTALL`:如何在不同系统上编译或安装软件的说明。
*   `NEWS`:类似于`CHANGELOG`文件，但是面向最终用户，而不是开发者。
*   `THANKS`:致谢。
*   `TODO` / `ROADMAP`:计划即将推出的功能列表。
*   `VERSION` / `RELEASE`:描述当前版本号或发布名称的一行代码。

### 组件或子系统的文件夹

我们经常会遇到一组可以归入一个概念的功能。

一些例子可能是:

*   国际化(i18n)和本地化(l18n)
*   认证模块
*   第三方加载项
*   通用工具和 cron 作业
*   用户界面(UI)和图形用户界面(GUI)

所有这些都可以组织到一个单一的“组件”或“子系统”目录中——但是不要发疯！

**我们希望限制目录的创建，以保持可管理性**，包括根目录(主要组件所在的位置)和递归目录(每个目录内部)。否则，我们可能会花费大量的时间例行公事地浏览精心组织的目录中的文件。

### 请将源代码树中的*去掉*

尽管我们希望项目整洁有序，但我们还是希望将某些类型的文件完全排除在外。

**数据**。您可能想在源代码树中为 CSV 文件等创建一个`data/`目录，尤其是当它们只占用几千字节时。但是，如果它们占用兆字节甚至千兆字节(这在当今并不罕见)呢？你真的想把那个提交给你的代码库，就像它是代码一样吗？号码

**二进制文件**。你不希望视频或编译后的可执行文件出现在源代码旁边。这些不是开发文件，它们根本不属于这里。与数据文件一样，它们最终也会占用大量空间。

**设置**。这是另一个大问题。你不应该在你的代码库中放入凭证、密码，甚至是安全令牌。我们不能在这里介绍解决这个问题的方法，但是如果你是 Python 开发者，可以考虑使用 [Python 解耦](https://github.com/henriquebastos/python-decouple)。

## 案例 1: Web 应用程序

让我们考虑一个 [web 应用程序](https://en.wikipedia.org/wiki/Web_application)——运行在 web 服务器上的软件，你可以通过浏览器在你的台式电脑或移动设备上访问它。假设这是一个 web 应用程序，它提供了访问各种高级服务的会员资格——可能是独家报道、旅行提示或视频库。

### 文件结构

```
├── .elasticbeanstalk
├── .env
├── billing
├── changelog.txt
├── locale
│   ├── en
│   └── zh_Hans
├── members
├── readme.txt
├── static
│   ├── fonts
│   ├── images
│   ├── javascript
│   └── styles
├── templates
│   ├── admin
│   └── frontend
├── todo.txt
└── tools 
```

### 分析

这是一个支持两种语言的 web 应用程序的基本结构—mainland China 的英语和简体中文(`locale`目录)。还有两个主要组件，`billing`和`members`。

如果你对网站开发有一点点熟悉的话，`static`和`templates`文件夹的内容可能对你来说很熟悉。也许唯一不寻常的元素可能是`.elasticbeanstalk`，它存储亚马逊 Web 服务(AWS)的部署文件，以及`.env`，它只在本地*存储项目的设置，比如数据库凭证。其余的，比如`README`和`TODO`，我们已经讨论过了。*

目录是一个有趣的目录。在这里，我们可以存储脚本，例如，清理数据库，或检查支付状态，或将静态文件呈现到缓存中——本质上，任何不是应用程序本身但有助于它正常工作的东西。

关于命名，如果我们将图像目录命名为`images/`或`img/`，或者将样式目录命名为`styles/`或`css/`，或者将`javascript/`目录命名为`js/`，这并没有太大的区别。最重要的是结构是合乎逻辑的，我们总是遵循某种约定，或者是长的描述性名称，或者是短的名称。

## 案例二:桌面应用

现在，让我们考虑一个可以下载并安装在计算机上的应用程序。假设应用程序接受一些输入，比如 CSV 文件，然后提供一系列报告。

在这个例子中，我们将让 sourcetree 变大一点。

### 文件结构

```
├── .gitignore
├── data
├── doc
├── legacy
│   ├── dashboard
│   ├── img
│   └── system
├── LICENSE
├── README
├── tests
├── thirdparty
├── tools
│   ├── data_integration
│   └── data_scraping
├── ui
│   ├── charts
│   ├── css
│   ├── csv
│   ├── dashboard
│   ├── img
│   │   └── icons
│   ├── js
│   ├── reports
│   └── summaries
├── VERSION
└── wiki 
```

### 分析

从本质上来说，`ui/`文件夹是应用程序的核心。子文件夹的名称很大程度上是自我描述的(另一个好习惯)。与我们的 web 应用程序示例不同，这里我们选择了缩写名称(如`js`而不是`javascript`)。再说一次，真正重要的是我们在项目中保持一致。

早些时候，我建议将数据文件放在 sourcetree 之外，但是那里有一个`data/`文件夹。怎么会这样把这棵树想象成一个开发者的盒子，它需要数据来正确地测试应用程序。但是根据在`.gitignore`文件中设置的规则，这些数据仍然不在存储库同步之内。

`legacy/`文件夹是应用程序的一部分，它已经停止使用，但仍然提供一些可能会派上用场的功能，直到它被完全重构到新系统中。因此，它提供了一种将旧代码与当前代码分开的好方法。

这里新增的还有`tests/`，它提供了一个用单元测试进行质量保证的地方，还有`thirdparty/`，一个存储软件需要的外部库的地方。

注意这里有`doc/` *和* `wiki/`文件夹，看起来可能像是重复的。然而，拥有一个面向最终用户的文档文件夹和一个面向开发团队的 wiki 也是完全可能的——甚至是合理的。

## 包裹

一个好的信息值得重复:**有条理，即使是单独工作**。希望这篇文章已经给了你一些想法，你可以马上开始实施到你的工作流程中，以防止随着应用程序中文件数量的增加而出现混乱。

如前所述，指导方针可能会到处改变，因为(几乎)每个项目都是不同的，团队也是如此。理想情况下，您或您的团队将决定如何构建项目——添加一个描述这种结构的推理的小文档——然后从现在起您将与这些规则保持一致。

请记住，根据这里的大多数指导原则，选择破折号或下划线来命名文件(从多个主题中选择一个主题)并不重要。一致性是关键。

### 进一步阅读

*   [构建你的项目](https://docs.python-guide.org/writing/structure/)，来自 Python 的搭便车指南。
*   管理项目文件夹结构的系统方法，来自 UX 集体。
*   [有效的项目管理:传统、敏捷、极限、混合](https://www.sitepoint.com/premium/books/effective-project-management-traditional-agile-extreme-hybrid-8th-edition?utm_source=blog&utm_medium=articles)

## 分享这篇文章