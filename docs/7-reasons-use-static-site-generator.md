# 使用静态站点生成器的 7 个理由

> 原文：<https://www.sitepoint.com/7-reasons-use-static-site-generator/>

在过去的十年里，静态现场发电机 (SSGs)变得越来越受欢迎。本文讨论了您的站点如何从静态站点提供的开发人员友好的构建过程、更容易的部署、改进的性能和更好的安全性中获益。

首先，让我们确定术语“静态站点生成器”的含义…

## 什么是静态站点？

回想一下你建立的第一个网站。大多数开发人员从创建包含在单个 HTML 文件中的一系列页面开始。每一个都将调用图像、CSS 等资产，也许还会调用少量的 JavaScript。您可能直接从文件系统启动这些文件，而不需要 web 服务器。生活很简单。

随着你的网站变得越来越大越来越复杂，困难也随之而来。考虑导航:它可能在每个文件中都是相似的，但是添加一个新的页面需要更新其他的页面。随着文件夹结构的发展，甚至对 CSS 和图像的引用也会变得笨拙。您可能考虑过诸如服务器端包含或 PHP 之类的选项，但更简单的选项可能是内容管理系统(CMS) …

## 什么是内容管理系统？

CMS 通常提供管理控制面板。这些允许作者编写存储在后端数据库中的内容。当访问者请求 URL 时，CMS:

1.  已确定需要哪个页面
2.  从数据库中请求适当的内容
3.  加载 HTML 模板(通常来自文件系统)
4.  呈现模板中的内容，并且
5.  将格式化的 HTML 页面返回给访问者的浏览器。

这几乎是瞬间发生的。该模板可以包括根据导航层次结构生成菜单的代码。生活是甜蜜的，超过十分之四的人选择 PHP/MySQL 驱动的开源 CMS 来管理他们的网站。

不幸的是，CMS 引发了一系列不同的问题:

*   你需要坚持 CMS 的工作方式。添加自定义文本或组件可能会很麻烦。
*   服务器正在做更多的工作，性能可能会受到影响。
*   还有其他故障点。软件升级或数据库故障会使您的网站瘫痪。

## 什么是静态站点生成器？

SSG 是使用手工编码的静态站点和完整的 CMS 之间的折衷，同时保留了两者的优点。本质上，您使用类似 CMS 的概念(如模板)生成一个静态的基于 HTML 页面的网站。内容可以从数据库、降价文件、API 或任何实际的存储位置提取。

当更改被推送到代码存储库时，站点生成可以发生在您的开发机器、临时服务器上，或者使用服务来构建。然后，生成的 HTML 文件和其他资源被部署到一个活动的 web 服务器上。

“静态”一词并不意味着“不变”。一个 SSG 构建一个页面一次，而一个 CMS 在每次请求时构建它。最终结果是一样的，用户永远不会知道区别。

一个相关的概念是“无头的”或“分离的”CMS。它们使用 WordPress 这样的接口来处理内容管理，但允许其他系统通过一个 [REST API](https://en.wikipedia.org/wiki/Representational_state_transfer) 或一个 [GraphQL API](https://en.wikipedia.org/wiki/GraphQL) 来访问数据。因此，像 Eleventy 这样的 SSG 可以[使用从内部服务器提取的 WordPress](https://www.sitepoint.com/wordpress-headless-cms-eleventy/) 页面内容建立一个静态网站。产生的 HTML 文件可以上传到 web 服务器，但是 WordPress 的安装不需要从组织外部公开访问。

术语[**jam stack**](https://www.sitepoint.com/learn-jamstack/)(JavaScript、API 和标记)也用于静态站点。它指的是框架、无服务器功能和相关工具的兴起，这些工具生成静态文件，但允许创建更复杂的交互性。

流行的静态站点生成器有[杰基尔](https://jekyllrb.com/)、[十一](https://11ty.dev/)、[盖茨比](http://gatsbyjs.org/)、[雨果](http://gohugo.io/)和[金属匠](http://www.metalsmith.io/)。SSG 适用于大多数语言(更多信息请参见 [StaticGen](http://www.staticgen.com/) )。像 [Next.js](https://nextjs.org/) 这样的框架尽可能静态地呈现页面，但也允许开发人员在必要时运行服务器端代码。

让我们来看看使用 SSG 的好处…

## 1.灵活性

CMSs 通常会限制您的选项，因为它们与具有特定字段的数据库相关联。如果你想在一些页面上添加一个 Twitter 小部件，你通常需要一个插件，一个短代码，或者一些自定义功能。

在静态站点中，小部件可以简单地直接插入到文件中，或者使用部分/代码片段。限制很少，因为你不受 CMS 强加的限制。

## 2.更好的性能

大多数 CMS 应用程序都提供内置或插件驱动的缓存系统，以确保在可能的情况下生成和重用页面。这是有效的，尽管管理、验证和重新生成缓存页面的开销仍然存在。

静态站点可以创建永远不会过期的预缓存页面。文件也可以在部署前缩小，以保证最小的负载，并通过全球内容交付网络(cdn)轻松部署。静态网站总是比使用类似模板的 CMS 版本表现更好。

## 3.更少的服务器端依赖

典型的 WordPress 安装需要:

*   合适的操作系统，如 Ubuntu 或 CentOS
*   Apache 或 NGINX 之类的 web 服务器
*   带有相关扩展和 web 服务器配置的 PHP
*   关系型数据库
*   WordPress 应用程序
*   任何必要的插件
*   主题/模板代码。

必须安装和管理这些依赖项。WordPress 比其他一些应用程序需要更少的努力，但是一次更新仍然有可能引起混乱。

静态站点生成器可能需要同样多的依赖项，但是它们可以在开发人员的 PC 上运行，而不会部署到生产服务器上。SSG 生成客户端 HTML 文件和相关资产，这些文件和资产可以托管在任何 web 服务器上。不需要安装、管理或维护其他任何东西。

## 4.提高可靠性

CMS 很复杂，有许多移动部件和故障点。无论运行一个 WordPress 站点多长时间，你几乎肯定会遇到可怕的*“未能建立数据库连接”*错误。无法预见的 CMS 问题可能由突然的流量激增引起，这会使服务器过载、使数据库崩溃或限制活动连接。

为静态站点提供服务的强度较低。在许多情况下，服务器只需返回平面文件，因此根据流量需求进行缩放变得很简单。仍然有可能使 web 服务器崩溃或使 API 过载，但是这将需要更多的并发请求。

## 5.卓越的安全性

有人想要攻击你的网站有几个原因。流量劫持、恶意广告、链接、真实性欺骗和恶意软件托管都允许未经授权的用户获得金钱和/或荣誉。

CMS 开启了许多攻击媒介。最明显的是登录屏幕:它的安全性取决于最弱的用户密码。请注意，任何运行服务器端代码的页面都有潜在的漏洞，例如通过您的联系表单发送垃圾邮件。某人获得了访问权可能并不明显；最恶劣的罪犯想要隐藏起来。

静态站点可能需要很少或不需要服务器端功能。一些风险仍然存在，但它们很少成为问题:

*   有人可以通过 SSH 或 FTP 访问服务器，篡改页面或上传文件。然而，检查更改(可能使用`git status`)清除整个站点，并重新生成它通常很简单。
*   静态站点调用的 API 在浏览器中公开，可以以与任何服务器端代码相同的方式被利用——例如表单电子邮件程序。良好的安全实践、 [CORS](https://developer.mozilla.org/docs/Web/HTTP/CORS) 和 [CSP](https://developer.mozilla.org/docs/Web/HTTP/CSP) 将会有所帮助。

## 6.客户端控制注意事项

你可以花几周的时间为客户建立一个有吸引力的 CMS 主题，在几分钟的移交时间内将他们的网站清空！使用 CMS 并不容易，它为内容编辑者提供了相当大的权力。你可以锁定插件安装等权利，但这不会阻止某人改变字体，引入冲突的颜色，添加糟糕的照片，或破坏布局。

静态站点可以是有限的，也可以是灵活的，由您选择。如果您使用 Markdown 或类似的平面文件，编辑器就不太可能出错或对页面样式产生负面影响。有些人会错过 CMS 内容管理面板，但您可以:

1.  使用他们现有的 CMS 并在生成之前清理数据，或者
2.  提供更简单的工作流程，例如在 [StackEdit](https://stackedit.io/) 或 [Hackmd.io](https://hackmd.io/) 中编辑基于 Git 的文件。

## 7.版本控制和测试

数据库数据是不稳定的。CMS 允许用户随心所欲地添加、删除或更改内容。只需点击几下鼠标，即可擦除整个网站。您可以备份数据库，但是，即使定期备份，您仍有可能丢失一些数据。

静态站点通常更安全。内容可以存储在:

*   平面文件:然后可以使用 [Git](https://git-scm.com/) 或类似的系统对它们进行版本控制。旧内容得以保留，更改可以快速撤消。
*   **私有数据库**:只有当网站生成时才需要数据，因此它不需要在公共服务器上公开。

测试也变得更加容易，因为网站可以在任何地方生成和预览——甚至在客户的 PC 上。

只需稍加努力，您就可以实现部署系统来远程构建站点，并在新内容被推送到存储库、经过审查和批准后更新实时服务器。

所以在静态站点世界里一切都是好的。或者是？阅读我关于[不使用静态站点生成器](https://www.sitepoint.com/7-reasons-not-use-static-site-generator/)的 7 个理由的后续帖子。

有关使用静态场地生成器构建场地的实际演示，请参见:

*   [如何使用 Metalsmith 创建静态站点](https://www.sitepoint.com/create-static-site-metalsmith/)
*   [十一月入门](https://www.sitepoint.com/getting-started-with-eleventy/)
*   [如何使用 WordPress 作为 Eleventy 的无头 CMS](https://www.sitepoint.com/wordpress-headless-cms-eleventy/)

## 分享这篇文章