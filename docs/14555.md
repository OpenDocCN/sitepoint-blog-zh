# PHP 认证和访问控制库

> 原文：<https://www.sitepoint.com/php-authentication-and-access-control-libraries/>

我收到一封电子邮件，询问关于 PHP 认证和访问控制库的建议，在这封邮件的提示下，我一直试图确定这种库需要做什么。坦率地说，我不确定我能 100%推荐一个单独的库；我对自己动手做很有罪恶感——上一次 a 真的研究这个，大约一年半以前，没能找到任何真正让我信服的东西。

从我的角度来看，认证(验证有效用户)和访问控制(有效用户是否有权限这样做)是不同的事情，库需要反映这一点。在应用程序的“全局”级别上，身份验证通常先于其他任何事情发生，而访问控制可以贯穿所有事情，例如，菜单只显示允许用户执行的项目。用户*管理*(注册、维护等)也应该是独立的功能(如果提供的话)。

对“梦想”安全库的一些想法/要求。

它必须是安全的。显而易见，我知道，但有很多陷阱(例如共享 web 服务器上的会话文件)需要小心。理想情况下，会有很多人关注源代码，并且会被[单元测试](http://www.lastcraft.com/simple_test.php)很好地覆盖。

–认证“协议”(浏览器和 web 服务器之间的机制)应该灵活，允许不同的方法；会话(cookie)机制、HTTP Basic 和 HTTP Digest 都应该是可能的。用户应该能够使用他们自己的“插件”，允许他们满足自己的设计要求，例如如果认证失败，将用户重定向到另一个页面

–应独立于用于验证用户身份的数据源–数据库、平面文件、LDAP、XML-RPC、SOAP 等。还应该允许不同的“模式”,而不是拘泥于特定的列名等。有些用户通过三种方式进行身份验证，例如:用户名、密码和某种临时访问码，由“智能卡”生成。

–如果访问控制逻辑不总是需要硬编码就好了，即代替；

 `if ( $User->hasPermission('taskName') ) {
// Do the task
} else {
echo 'Permission denied';
}`

…您可以(可选地)使用其他访问控制机制，例如，与 PHP 脚本同名的. ini 文件，或者基于 URL 的文件。或许类似于 Unix 文件系统权限的东西会有所帮助。

–允许不同的访问控制“组织”——例如，
用户< = >权限
用户< = >角色/组< = >权限

–灵活性:适用于任何 PHP 编码风格，从普通 PHP 到框架

–身份验证和访问控制机制如何通信。

–快速(当然)–尽管它打包了所有功能，但您只需为您正在使用的东西付费

对理想的安全库还有什么其他要求吗？

如果我要推荐什么的话，我会推荐梨图书馆。在[认证](http://pear.php.net/packages.php?catpid=1&catname=Authentication)类别中有许多包，与本讨论最相关的两个是；

–[PEAR::Auth](http://pear.php.net/Auth)–只关注认证。使用用户名/密码组合，实现针对多个数据源进行身份验证的目标。使用会话/表单来维护状态。由 [PEAR::Auth_HTTP](http://pear.php.net/Auth_HTTP) 扩展为 HTTP 基本/摘要认证。得到了大量的筛选，这是个好消息。性能？因为一些我现在记不清的原因，我一直对 PEAR::Auth 有偏见，可能是因为我看了一个早期版本。看看代码就知道这似乎是一个合理的选择。

–[PEAR::live user](http://pear.php.net/LiveUser)–提供认证和访问控制。用户会话来维护状态，并且能够处理许多不同的访问控制组织方案。我以前尝试过这种方法，并努力理解它的预期用途，但它仍在发展中，并有很大的前景。

你推荐其他图书馆吗？

## 分享这篇文章