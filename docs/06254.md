# 画布上的代数图形

> 原文:[https://www.sitepoint.com/algebraic-graphs-canvas/](https://www.sitepoint.com/algebraic-graphs-canvas/)

我们如何在网页中包含一个图表？也许显而易见的选择是离线绘制，使用`<img>`元素将它保存为包含在 web 页面中的图像文件。或者用 Flash 画出来，用`<object>`包含进去。另一种选择是 SVG，但是它从未得到广泛支持。图像和 Flash 已经被广泛使用了很多年，但是今天 HTML5 给了我们一个更好的选择——T2 元素。

在本文中，我将展示如何使用`canvas`元素使得用几行 JavaScript 创建图表变得容易。本文将通过使用简单的代数方程来生成图表的数据点，从而避免对某种描述的数据输入的需要，当然，所涉及的绘图技术也可以很容易地用于基于直接从数据库读取的数据的图表。

## 方格纸

首先，让我们看看我们将在本文中构建什么。下图显示了两个相当简单的图表。都是直线剧情，都是概念上容易把握，都没有复杂的曲线。

![two graphs](../Images/c2adf3077894b73362d684069c5af761.png)

即使粗略的目测也会发现有一个共同的组成部分——轴和它们的单位。所以让我们从一些简单的 HTML 和 JavaScript 开始，在`canvas`上绘制这些内容。

## x 和 Y 轴

我们需要什么 HTML？对于任何使用 HTML5 的 canvas 元素的绘图，我们需要用 HTML 编码的只是`canvas`元素本身。举个例子，

```
<canvas id="axes"></canvas>
```

就像艺术家从空白画布开始，然后用画笔和颜料在上面绘画一样，我们将对空白画布进行编码，并使用 JavaScript 在上面绘画。最好使用`canvas.width`和`canvas.height`属性在 JavaScript 中设置画布的尺寸，因为这将避免浏览器缩放的任何问题。

当在`canvas`元素中绘制任何东西时，我们需要记住默认情况下原点在左上角。然而，对于本文中使用的图形，我们希望原点在图的中心。这需要一点点的偏移思维。axes.html 和 axes.js 文件显示了我们将要使用的基本区域。

## 一个简单的等式

对于我们的第一个图表，让我们从简单的直线方程 y = x 开始。文件 equation1.html 与 axes.html 有相同的 HTML，但增加了一个单独的画布来绘制方程。分离画布绘制的各种组件并不是必需的，但在构建复杂的渲染时确实有所帮助。它也不是一种新的或不寻常的技术，因为分层是在 Photoshop、GIMP 和其他类似的图形软件中构建复杂渲染的不可或缺的一部分。CSS z-index 属性可用于按所需顺序定位图层。

线条画的一个限制是当前可用的端帽类型:只有对接、圆形和方形是 HTML5 规范的一部分。但是我们需要一个箭头来表示 x 轴和 y 轴的端盖。这是我们第一次定制编码来解决当前的`canvas`限制。

本例中的文件是 equation1.js 和 equation1.js

## 给图表加阴影

方程 2 比第一个方程稍微复杂一点，但也没有大到我们不能从方程 1 中学到什么。在第二个例子中，我们需要一条虚线来显示等式中缺少等式，我们需要阴影来显示等式所适用的图形部分。

如果浏览器支持 HTML5 的`setLineDash()`,画一条虚线会容易得多。事实并非如此，所以我们需要定制编码来画一条虚线。这可以很简单地通过把一条连续的线看作由一系列首尾相连的小线段组成来实现。

我们拥有的一个 canvas 特性是填充一个区域的能力，我们将用它来给图形加阴影。为了确保任何阴影不会遮蔽图形的其他组件，我们可以使用 CSS 或画布的`globalAlpha`属性来调整不透明度。注意`globalAlpha`，顾名思义，适用于整个画布——不可能改变画布上绘制的单个笔画的不透明度。分层的另一个好理由。

本例中的文件是 equation2.js 和 equation2.js

## 三角引子

本文的重点是代数图，但是没有理由说明这里所涉及的技术不能应用于其他形式的图。等式 3 是一个简单的三角方程 y = 2 sin π x。虽然这显然是一个曲线图，但上面提到的绘制折线的技术也可以用来绘制非常好的曲线，如本例所示。

本例中的文件是 equation3.js 和 equation3.js

本文的所有代码示例都可以作为一个压缩文件从[下载。](https://uploads.sitepoint.com/wp-content/uploads/2013/11/canvas-code-samples.zip)

## 实时数据

我在介绍中提到，本文中介绍的简单技术可以用于从数据库中读取数据。使用`canvas`以任何形式显示任何数据，无论是折线图、饼图、条形图等。，相对来说仍然是一个未被探索的话题，因为这个 HTML 增强还很年轻。

一些实时的例子可以证明`canvas`是理想的，包括显示来自气象站的数据、医用平板电脑上的病人血细胞计数数据、交易期间的股价变化等。

动态生成图形 gif 的日子已经屈指可数了。

## 摘要

在本文中，我们介绍了使用 HTML5 的`canvas`元素在浏览器中绘制图形的几个基本方面。我们看到，我们可以从其他软件中已经使用的图形工作中转移概念，例如分层。尽管 HTML5 规范的实现仍然是不完整的，但是我们可以编写变通方法来达到我们需要的结果。

`canvas`还很年轻，但它有巨大的潜力来改变数据在浏览器中的呈现方式。

## 分享这篇文章