# C 语言中的数据输入和输出，第 1 部分

> 原文:[https://www . site point . com/data-input-and-output-in-c-part-1/](https://www.sitepoint.com/data-input-and-output-in-c-part-1/)

C 语言附带了一组库函数，其中包括许多输入/输出函数。这些功能用于允许计算机和标准输入输出设备之间的信息传输。基本输入/输出功能有`getchar`、`putchar`、`puts`、`scanf`和`printf`。前两个函数`getchar`和`putchar,`用于传输单个字符。下一个函数`puts`用于输出字符串，最后两个函数`scanf`和`printf`允许传递单个字符、数值和字符串。

输入/输出函数可以从程序中的任何地方访问，只需简单地写下函数名，后跟一个用圆括号括起来的参数列表。参数表示发送给函数的数据项。一些输入/输出函数不需要参数，尽管空括号仍然必须出现。

那些返回数据项的函数的名字可能出现在表达式中，就好像每个函数引用是一个普通的变量(例如，`c=getchar();`)，或者它们可能作为单独的语句被引用(例如，`scanf(...);`)。有些函数不返回任何数据项。这些函数就像是独立的语句一样被引用(例如，`putchar(...);`)。

c 包含一个头文件集合，提供支持各种库函数的必要信息。每个文件通常包含支持一组相关库函数的信息。这些文件通过程序开始时的`#include`语句进入程序。通常，标准输入/输出库函数所需的头文件称为 stdio.h。

## 单字符输入:getchar 函数

`getchar`函数是标准 C 输入/输出库的一部分。它从标准输入设备(通常是键盘)返回单个字符。该函数不需要任何参数，尽管单词`getchar`后面必须有一对空括号。

一般来说，函数引用应该写成:

```
character variable = getchar( );
```

其中**字符变量**指的是一些先前声明的字符变量。

使用`getchar`函数读取字符时，如果遇到**文件结束**条件，符号常量`EOF`的值将自动返回。(该值将在 stdio.h 文件中赋值。通常，EOF 将被赋予值-1)。以这种方式检测`EOF`提供了一种方便的方法来检测文件的结尾，无论它何时何地出现。然后可以采取适当的纠正措施。

通过在多次循环中一次读取一个字符，也可以使用`getchar`函数读取多字符串。

## 单字符输出:putchar 函数

使用 C 库函数`putchar`可以显示单个字符。该功能是字符输入功能`getchar`的补充。

类似于`getchar`的`putchar`函数是标准 C 输入/输出库的一部分。它将单个字符传输到标准输出设备(计算机屏幕)。被传输的字符将被表示为字符类型变量。它必须表示为函数的一个参数，放在括号中，跟在单词`putchar`后面。

一般来说，函数引用应该写成:

```
putchar(character variable)
```

其中**字符变量**指的是一些先前声明的字符变量。

下面给出了一个演示`getchar`和`putchar`用法的简单示例:

```
#include<stdio.h>

int main()

{

char c;

printf("n Please enter a character:");

c=getchar();

printf("n The character entered is: ");

putchar(c);

return 0;

}
```

在上面的程序中，语句`c=getchar();`接受用户输入的一个字符，并将其存储在变量`c`中。用户输入的字符可以是 C 字符集中的任何字符。语句`putchar(c);`打印存储在变量`c`中的字符。

通过将字符串存储在一维字符型数组中，`putchar`函数可用于输出字符串常量。然后，每个字符可以在一个循环中单独写入。最方便的方法是使用 for 语句，我们将在以后讨论。

## 输入输入数据:scanf 功能

输入数据可通过 C 库函数`scanf`从标准输入设备输入。该函数可用于输入数值、单个字符和字符串的任意组合。该函数返回已成功输入的数据项的数量。

一般来说，`scanf`函数可写成:

```
scanf(control string, arg1, arg2,.........,argN) 
```

其中**控制字符串**是指包含某些所需格式信息的字符串，而 **arg1，arg2，…。，argN** 是代表单个数据项的参数。(实际上，自变量代表**指针**，指示计算机内存中数据项的**地址**。我们将在以后的文章中更详细地讨论指针，但在此之前，记住这样一个事实会很有帮助，即`scanf`函数中的参数实际上代表了输入的数据项的地址。)

控制字符串由称为**格式说明符**的单个字符组组成，每个输入数据项对应一个字符组。每个字符组必须以百分号(%)开头，后跟一个表示数据项类型的**转换字符**。在控制字符串中，多个字符组可以是连续的，也可以由空白字符(即空格、制表符或换行符)分隔。

下面列出了最常用的转换字符:

```
Conversion Character     Data type of input data

c                        character

d                        decimal integer

e                        floating point value

f                        floating point value

g                        floating point value

h                        short integer

i                        decimal, hexadecimal or octal integer

o                        octal integer

x                        hexadecimal integer

s                        string

u                        unsigned decimal integer

[. . .]                  string which may include whitespace characters
```

`scanf`函数的参数被写成变量或数组，其类型与控制字符串中相应的字符组相匹配。每个变量名前面必须有一个**符号(& )** 。但是，字符数组名称不以&符号开头。参数的实际值必须在数量、类型和顺序上对应于`scanf`函数中的参数。

如果输入了两个或多个数据项，它们必须用空白字符隔开。数据项可以延续到两行或更多行，因为换行符被认为是空白字符，因此可以分隔连续的数据项。

示例 1:

```
#include<stdio.h>

int main()

{

char a[20];

int   i;

float b;

printf(" n Enter the value of a, i and b");

scanf("%s %d %f", a, &i, &b);

return 0;

}
```

在上面的程序中，在`scanf`函数中，**控制字符串**是`"%s %d %f"`。它表示三字符组或格式说明符。第一格式说明符`%s`表示第一参数`a`表示字符串(字符数组)，第二格式说明符`%d`表示第二参数`i`是整数，第三格式说明符`%f`表示第三参数`b`是浮点数。

还要注意，前面没有&符号的唯一参数是`a`，因为`a`表示一个字符数组。

**s 型**转换字符适用于**一个由空白字符**结束的字符串。因此，**包含空白字符**的字符串不能以这种方式输入。为此，有两种方法:

1.s 类型转换字符由方括号中的字符序列替换，指定为[。。。].字符串中还包含空白字符，以便可以读取包含空白字符的字符串。

当程序执行时，只要每个输入字符与方括号中的一个字符匹配，就会继续读取连续的字符。方括号中的字符顺序不必与输入的字符顺序一致。一旦输入字符与括号中的字符不匹配，`scanf`函数将停止读取更多的字符并终止字符串。然后，空字符将自动添加到字符串的末尾。

示例:

```
#include<stdio.h>

int main()

{

char line[80];

scanf(" %[  ABCDEFGHIJKLMNOPQRSTUVWXYZ]", line);

printf("%s", line);

return 0;

}
```

如果输入数据是:

读取包含空格的字符串

那么整个数据将被分配给数组`line`。但是，如果输入是:

读取包含空格的字符串

那么只有大写字母(R，A，S，W，S)将被分配给 line，因为控制字符串中的所有字符都是大写的。

2.要输入包含空格以及大写和小写字符的字符串，我们可以使用**扬抑符，即(^)** ，后跟一个在括号内的换行符。
举例:

```
scanf("[^n]", line);
```

抑扬符导致方括号内的后续字符以相反的方式解释。因此，当程序执行时，只要没有遇到换行符，就会读取字符。

### 读取数字:指定字段宽度

定义数据项的连续非空白字符共同定义了一个**字段**。为了限制数据项中此类字符的数量，在转换字符之前添加一个无符号整数来表示**字段宽度**。输入数据包含的字符可能少于指定的字段宽度。多余的字符将被忽略。

示例:如果`a`和`b`是两个整数变量，并且下面的语句用于读取它们的值:

```
scanf( "%3d %3d", &a, &b);
```

如果输入数据是:1 4

那么`a`将被分配 1，`b`将被分配 4。

如果输入数据是 123 456，则`a=123`和`b=456`。

如果输入是 1234567，那么`a=123`和`b=456`。7 被忽略。

如果输入的是 123 4 56(由于打字错误插入的空格)，那么`a=123`和`b=4`。这是因为空格充当数据项分隔符。

### 赋值抑制

**%** 符号后面跟一个星号 **(*)** 跳过一个数据项，不把它赋给指定的变量或数组。

例:
`scanf( "%s %*d %f", a, &i,&b);`

如果输入是:Alice 12 34.5 那么`a=Alice`和`b= 34.5`。然而，`12`不会被分配给`i`，因为星号被解释为**分配抑制字符**。

### 前缀

控制字符串中的某些转换字符前面可以有前缀；例如，L 或 L 表示长整数参数，h 表示短整数参数。因此“%ld”将表示一个长整数。

下一篇文章将讨论函数`printf`、`puts`以及一些说明这些输入/输出函数用法的基本编程示例。

## 分享这篇文章