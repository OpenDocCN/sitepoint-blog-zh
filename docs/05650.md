# Drupal 7 中视图 3 的介绍

> 原文:[https://www.sitepoint.com/introduction-views-3-drupal-7/](https://www.sitepoint.com/introduction-views-3-drupal-7/)

## 介绍

[Views](https://drupal.org/project/views) 是最受欢迎的 Drupal 模块之一，下载量超过 500 万次，有超过 70 万个网站报告使用它。它是如此受欢迎，以至于 Drupal 8 将在核心视图中发布，作为 Drupal 8 发布过程中令人兴奋和受欢迎的举措的一部分[。](https://drupal.org/community-initiatives/drupal-core/vdc-roadmap)

这是一个关于视图世界以及如何使用这个伟大的模块来创建内容列表的介绍性教程。作为本教程的一部分，我将介绍一些较小的主题。首先，我们将了解如何开始创建视图。然后，我们将会看到哪些现成的列表和内容格式可供我们使用。

一旦我们选择了视图的外观，我们将涉及一些过滤和排序。这些选项用于确保我们只显示正确的内容，并按照我们希望的顺序显示。听起来很刺激？

让我们开始吧。

## 入门指南

安装视图就像安装任何其他模块一样。我不打算介绍安装 Drupal 模块的过程，而是将您引向 Drupal.org 的[权威指南。](https://drupal.org/documentation/install/modules-themes/modules-7)

如果您知道如何使用 Drush(我全心全意地推荐您学习)，您可以运行两个简单的命令，然后就可以开始了:

```
drush dl views
drush en views views_ui -y 
```

这将下载并启用所有必要的模块(包括依赖的 CTools)。

现在我们已经安装了视图，我们可以导航到`admin/structure/views`来获得站点上所有现有视图的概述。你会注意到一些从盒子里出来的残疾人。我们不会讨论这些，但是知道它们在那里是很好的。*首页*和*分类术语*特别有趣，因为它们模仿并替换了默认的 Drupal 行为。

接下来我想做的是创建一个视图，并演示如何开始使用它。因此，点击顶部的*添加新视图*链接，进入视图创建表单。

![](../Images/f76b33c4ee73f88b326fa4ad7e948892.png)

在这里，我们将设置一个视图名称，在第一个字段集中，我们已经可以过滤视图将显示的信息类型。

我们将选择显示`Content`(节点)，但您也会注意到其他实体(术语、用户等)。请注意，您在此选择框中所做的选择以后将无法更改。因为我们选择了`Content`，所以我们也可以选择内容类型。现在让我们使用*文章*，但是要知道你可以在以后编辑视图时更改它。

此外，因为我们选择了`Article`内容类型，它有一个`Tags`字段，引用了词汇表中同名的分类术语，所以我们也可以基于此进行即时过滤。然而，我们不知道这是可能的(现在和以后编辑视图时)。最后，我们可以根据一些已经可用的标准对列表进行排序，但我们也不会这样做。

## 页面显示

在我们刚刚编辑的字段集下面，我们可以看到另外两个字段集，它们使我们可以创建页面和块。它们是创建视图显示的快捷方式。

任何视图都可以包含多个不同类型的`displays`(页面、块、提要等)。有些是现成的，有些是由其他贡献的模块提供的。因此，您可以创建一个视图，使用不同的格式、过滤器等以多种方式显示相同的内容。

对于本文，我们将坚持使用*页面*显示，我们将在下一步创建它(这样您就可以看到整个过程)。所以不要勾选这两个复选框，点击*继续并编辑*。

你将被带到主视图编辑页面，我建议你点击*保存*按钮，因为在你这样做之前视图还没有被保存。

在这个页面上，您会注意到顶部有一个`Displays`栏，其中包含一个名为`Master`的栏。我们想创建一个页面，在那里我们可以看到我们的列表路径。所以点击`Add`，选择`Page`，指定一个新的显示名称。接下来你也可以点击*标题*字段集下的`None`来选择页面标题。

这里有一件重要的事情需要注意，它会在将来很好地为你服务。当你像刚才那样进行更改时，你可以选择是只应用于*这个*显示器还是**所有其他的**(见下图)。你必须小心，因为默认选择是`All displays`。这很容易忘记，如果你有多台显示器，这可能会导致问题。所以请记住这一点，并确保对您希望**更改的显示进行更改。**

![](../Images/c4a20442d69ceb3119ab1a999a4e3f07.png)

在完成其余的设置之前，您必须为视图页面指定一个路径。视图需要向 Drupal 注册它，没有注册就不能保存视图。所以在*页面设置下*点击`No path is set`来指定一个。然后，您还可以将它放在菜单中，并为页面指定访问规则。

## 格式

在*格式*字段集下，我们有一些重要的选项，用于处理视图如何显示以及*显示内容中的哪些内容*。开箱即用，您有一些格式可以选择(和一些设置)，但我们现在将使用默认的:无格式列表。这是最简单的一个，但是我鼓励你尝试其他的。

![](../Images/37022fd7cce86619925df7b8846106fc.png)

但是现在我们已经选择了格式，让我们看看实际上将被格式化的内容。默认情况下，它是字段。这意味着您选择了许多 Drupal 字段(实体属性或通过字段 UI 声明的字段),它们会在每篇文章中显示。这是我们今后将选择的，但我还想告诉你关于视图附带的另一个选项:`content`。

Drupal 7 中的每种内容类型都有一些查看模式(完整、摘要、RSS 等)。使用[显示套件模块](https://drupal.org/project/ds)您可以定义更多。对于每种视图模式，您可以指定不同的字段显示方式。例如，与全视图模式相比，预告中的图像将具有不同的图像样式。

这就是视图中`fields`的`content`替代所指的内容。您可以选择使用特定视图模式显示的节点。这是非常强大的。但是让我们继续使用字段，因为当准备每个单独的视图行的输出时，这使我们停留在视图领域。

## 菲尔茨

既然我们决定使用字段选项，您会注意到在页面底部的预览区域已经有一个文章标题列表。这是因为默认情况下，视图将包含 title 字段，因为至少需要一个。要添加其他人，点击`Fields`下的`Add`按钮。您将看到一个覆盖图，您可以在其中搜索并选择要添加的字段。

不同的字段类型有不同的可用选项，不幸的是，我们无法在此一一介绍。但是，让我们设定一个小目标，并尝试完成它:文章节点挑逗，显示标题，主体总结和图像。
那么，让我们寻找文章内容类型的默认正文和图片字段。这些显示为`Content: Body`和`Content: Image`，因此选中它们旁边的框并应用。

您必须一次配置这两个字段。对于车身，我们可以取消勾选`Create a label`旁边的框，在*格式器*下选择`Summary or trimmed`和定制的修剪长度(如果你想要的话)。

接下来的 3 个折叠字段集非常高级，也适用于大多数其他字段类型。我们无法在本教程中涵盖它们，但这里有一个快速总结。在`Style settings`下，您可以操作为每一行上的单个字段呈现的 HTML。在`No results behavior`下，您可以指定在字段本身没有值的情况下要显示的值。在`Rewrite results`下，你有很多关于改变显示区域内容的选项。在这里，您可以合并字段，创建链接，剥离标签和其他强大的行动。

完成正文后，您必须为图像字段重复该过程。我建议再次删除标签，因为我们希望图像是一个预告，让我们选择缩略图样式。我们也可以将图像链接到内容。保存这些设置后，查看下面的预览。您应该看到每个文章节点的标题、正文和图像。如果你想改变字段的顺序，点击你刚才点击的`Add`按钮旁边的小箭头，然后选择`Rearrange`。然后你可以把它们拖到合适的位置。

尽管这还远远没有结束，任何真正的网站都有大量的编辑和设计工作要做，但我们对结果很满意，可以继续前进了。

## 过滤

在`Fields`下面，您可以看到已经包含两个过滤器的`Filter criteria`部分(您可以点击它们并查看它们的选项)。第一个是节点状态属性上的过滤器，只显示已发布的内容。第二个过滤了 type 属性，只显示了类型为`article`的节点。如果我们想要更改或包含其他内容类型，我们可以在这里进行更改。

通过勾选`Expose this filter to visitors, to allow them to change it`框，过滤器也可以向最终用户公开。例如，如果我们希望最终用户选择应该包含哪些内容类型，我们可以编辑过滤器并启用此功能。

在页面右侧的`Advanced`字段集下，您还可以添加上下文过滤器。当您需要从全局范围、URL 或其他上下文动态传递过滤器时，这些功能非常强大。这是一个高级特性，我们不能在这里介绍，但请记住它是存在的。

## 整理

在`Sort criteria`部分，您可以添加用于排序视图的字段。让我们查找节点创作日期(`Content: Post date`)并将其添加到视图中，以降序对列表进行排序。

请注意，您还可以向最终用户公开这些字段，让他们执行自己的排序。

## 结论

所以我们在这里。我们创建了一个简单的视图，显示网站上所有文章的一些基本信息。在这样做的时候，我们已经看到了如何创建一个视图，以及关于它的格式有哪些可能性。我们讨论了显示，并创建了自己的页面来呈现视图。我们还看到了如何添加字段，以及在视图方面`fields`和`content`的区别。最后，我们了解了存在哪些基本的筛选和排序标准，以及它们是如何工作的。

不幸的是，我们也只是触及了观点的表面。作为一个有经验的视图用户，我觉得我没有覆盖它的任何功能。这是因为它太复杂了，我们采取的步骤相比之下显得苍白无力。但是您必须从基础开始，理解基本的概念，然后才能进入更令人兴奋的功能。

视图中还有许多其他的特性和选项，这使得它对于几乎所有的 Drupal 站点都是不可或缺的。因此，如果您想高效地使用 Drupal，我建议您花一些时间来学习它。

## 分享这篇文章