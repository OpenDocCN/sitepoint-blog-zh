# PHP-FIG 替代方案:各种观点的利弊

> 原文：<https://www.sitepoint.com/php-fig-alternatives-the-pros-and-cons-of-various-visions/>

非常感谢[卡尔·埃文斯](https://twitter.com/calevans)、[内特·阿贝尔](https://twitter.com/nateabele)和[拉里·加菲尔德](https://www.sitepoint.com/author/crell/)对本文进行同行评议。我们非常感谢我们出色的同行评审员，他们不断地将 SitePoint 的内容做到最好！

(**披露:**我和 Nate Abele 是 FIG 的创始人之一，我是该组织中连续任职时间最长的投票成员。我是 PSR 1 号、PSR 2 号和 PSR 4 号的主要推动力；它们的广泛采用极大地提高了 FIG 的合法性，我也是其他 PSR 的协调员或发起人。我协助创建了一些假设指导小组成员的章程，包括在自己编写投票规则方面发挥了重要作用。我是秘书们第一次，也是目前唯一一次，[临时禁止我在 FIG 邮件列表上发帖的对象。我也是](https://groups.google.com/forum/#!msg/php-fig/LO8sG5SPPd4/NFZRzYCzAwAJ)[试图将我从团队中移除的失败对象。我反对 FIG 3.0 的提议，在原地重组团体。)](https://groups.google.com/forum/#!msg/php-fig/w38tCU4mdgU/R1oyiIMuAAAJ)

## 另类期货

在他的文章[PHP-FIG 的过去、现在和未来](https://www.sitepoint.com/the-past-present-and-future-of-the-php-fig/)中，Larry Garfield 给出了他对 FIG 的印象，从它的成立到它可能的未来之一。我鼓励您在继续之前通读全文。

在这里，我将试图解决拉里的文章中的一些错误和遗漏，并为 FIG 提供另外两种可能的未来。

![Fist fight illustration](img/7d140c6837e1b888059eeb7bb75d919f.png)

## PHP-FIG 3.0:太修正了？

我在其他地方说过，我所说的 FIG 的“创始”愿景是关注成员项目，找到它们之间的共性，并把这些共性整理成文。Larry 谴责我的声明是“修正主义的历史”,并断言真正的创建意图更符合我所谓的“宏大”愿景(即，一个面向所有 PHP 程序员的总体标准组，无论是否是成员项目)。

为了支持他的观点，拉里引用了大卫·科利尔发布的布雷特·比伯的会议记录。

> 这次会议的目标是开发一套 PHP 项目可以努力采用的通用标准。
> 
> 每个项目可能都有特定的标准，这些标准可能会扩展并进一步定义如何使用这些标准，但目标是作为一组资源提供给所有 PHP 开发人员的 PHP 标准。

拉里还引用了特拉维斯·斯威兹古德的类似说法。我会比拉里更多地引用特拉维斯的帖子:

> 以下是我的愿景。这是我一个人的愿景，但这是我的出发点。…我很乐意看到我们的工作产生一个官方认可的标准。…当代码在一年后面向公众发布时，如果宣布新代码的博客帖子或邮件列表消息的第一条评论是“哇，太棒了，但你应该通过 phpcs 运行它”，我会很高兴

起初，这似乎是拉里主张的实质性证据。然而，人们应该记住“目标进入”一个会议和“结果出来”一个会议不是一回事。

因此，很有可能一些参与者在刚到的时候，脑子里有一些更像“宏大”的愿景。但是，由于我自己也参加了那次最初的会议，我个人回忆起最终的决定是*而不是*追求“宏伟”的愿景。取而代之的是，采用更有限的“针对群体成员”的方法。

为了提供比我自己记忆中的讨论更多的支持，我提交以下内容:

*   Travis 自己在上面链接的同一篇文章中说，“我们决定为我们的项目成立一个官方小组*，以监督该标准的创建，并努力在我们的**项目**中实现更好、更广泛采用的*标准。*”*

*   Cal Evans 也出席了会议，[进行了简要叙述](http://news.php.net/php.standards/19):

    *   “套用这个小组的目标，我们说‘嘿，我们都同意我们要这样编码，我们希望你也这样做。’”(这是否意味着拉里终究是对的？不，卡尔在后来的一封电子邮件中纠正了自己的观点，他说:“应该是这样的:套用这个小组的目标，我们说‘嘿，**我们都同意我们要这样编码。**’”)

    *   在同一封后来的电子邮件中，卡尔还说，“这个团体并没有把自己凌驾于所有说我们最了解的人之上。我们试图在许多项目*之间找到共同点，这样世界各地的 PHP 开发人员可以在那些项目的代码**之间移动，而不必每次都重新学习标准。*** …虽然我很乐意看到这个小组达成一致的标准被 PHP 社区广泛采用，但这不是这个小组的目标。”

*   Matthew Weier O'Phinney 说:“我们代表了大量的组件库和框架，拥有成千上万的用户。*我们代表这个群体中的那些用户*。……第三，这些标准不是强制性的。你可以收养他们，也可以不收养。我们只是推荐它们，并承诺*我们的代表性项目*将会使用它们。…如果说有什么不同的话，那就是我们正在密切关注社区，并尽可能多地让他们参与进来——通过*我们的个人项目。*”

*   Nate Abele 对第一次会议的回忆与此相似:“我们就标准达成一致的目的是为我们的集体用户社区提供一些我们项目之间的**互操作性**，并为其他希望与我们的项目互操作的项目提供一条前进的道路。”

    Nate 继续说，“每个人都有自己的选择，不管他们是否发现这些标准对他们有用，但是**我们作为项目领导者已经选择在我们的代码**中使用这些标准，所以如果你计划使用我们的任何项目，你无论如何都会使用这些标准，所以我们不妨向人们公开这些标准是什么，以防其他人确实发现它们有用(出于我的傲慢， 我想说的是，如果我们作为主要开发人员和杰出的社区成员这样做了，那么是的，其他人也可以这样做。”

(以上所有强调都是我的；引号中的拼写和语法错误是照写的。)

与拉里的主张相反，人们可以看到，从一开始，这个团体就决心专注于自己的成员。与此同时，我们意识到，不仅其他人会关注并可能选择采用我们的做法，而且该集团只能代表其成员，而不能代表任何其他人。也就是说，有些人可能会选择国际体操联合会的工作作为“榜样”；但是，榜样的好处是，你的榜样不必和其他人的一样。

总结:虽然拉里在他的文章中指责我“保护‘虚构’的愿景”，但更准确的说法是，我努力尊重该集团真正的创始愿景——拉里似乎不同意这一愿景。

## FIG 2.0 工作流程

Larry 似乎认为新的工作流程规章模式相当成功:

> 在这种[新的工作流程细则]模式下，该小组通过了 PSR-4 自动加载>标准、PSR-6 缓存标准和 PSR-7 HTTP 消息标准。

拉里在这里的叙述有些误导。虽然 PSRs 4 和 6 *在该附例实施后通过*是事实，但这些 PSR 是过渡性案例。PSRs 4 和 6 始于工作流程细则之前，见证了重要的工作，然后在工作流程细则于 2013 年 8 月制定后被小组重新采用。

迄今为止，已有四份 PSR 在工作流程细则之前*开始并完成，两份 PSR 在细则出台之前开始并完成，只有一份 PSR 在工作流程细则出台之后开始并完成:*

*   附前法规(“图 1.0”)–PSR-0(2010 年 11 月)-PSR-1(2012 年 6 月)-PSR-2(2012 年 6 月)-PSR-3(2013 年 1 月)

*   过渡性(从 1.0 开始，到 2.0 结束)-PSR-4(2013 年 12 月)-PSR-6(2015 年 12 月)

*   邮政附则(“图 2.0”)–PSR-7(2015 年 5 月)

因此，很难证明工作流程细则对完成 PSR 有很大的帮助。

## 测量 FIG 的影响

Larry 试图定量测量 FIG 对整个 PHP 领域的影响:

> 当然，FIG 发布的各种 PSR 对 PHP 社区的影响远远超出了少数成员项目。…据 Packagist 称，PSR-3 记录器已安装了 3700 多万次。对于 PSR 7 号来说，大约是 1100 万。

下载数量看起来确实是一个很好的客观指标，可以量化一个包的影响。但是你必须小心确保一个度量标准测量你认为它做了什么。统计“下载量”可能会被少数使用 PSR 软件包的非常流行的软件包所混淆。此外，在没有上下文的情况下呈现数字会产生误导；它们应该总是在与其他东西的比较中呈现。

我提供了一种测量受 PSR 影响的作者数量的改进方法:依赖包的数量。这将告诉我们有多少不同的软件包，不考虑它们的下载流行程度，使用 PSR 软件包。这应该给我们一些指示(尽管不完美),表明有多少开发人员将 FIG 的工作集成到他们自己的工作中。

既然 Larry 使用了 Packagist，我也将使用它。以下是 FIG 发起的 PSR 包的“安装数”(下载数)和“依赖数”(其他包中作曲者的数量):

| PSR 套餐 | 安装 | 受赡养者 |
| --- | --- | --- |
| [psr/cache](https://packagist.org/packages/psr/cache) | 0.8 米 | One hundred and sixty-five |
| [psr/log](https://packagist.org/packages/psr/log) | 38.0 米 | One thousand nine hundred and forty-three |
| [psr/http 消息](https://packagist.org/packages/psr/http-message) | 11.3 米 | Seven hundred and eleven |
| (总计) | 50.1 米 | Two thousand eight hundred and nineteen |

所以:165 包作者用`psr/cache`，1943 用`psr/log`，711 用`psr/http-message`。

作为比较，这里有三个非 PSR 包来自图外(这些不是随机选择的；它们仅仅是我想到的第一批。)

| 非 PSR 套餐 | 安装 | 受赡养者 |
| --- | --- | --- |
| [学说/数据库](https://packagist.org/packages/doctrine/dbal) | 21.1 米 | One thousand three hundred and thirteen |
| [nesbot/carbon](https://packagist.org/packages/nesbot/carbon) | 15.9 米 | Seven hundred and ninety-two |
| [vlucas/phpdotenv](https://packagist.org/packages/vlucas/phpdotenv) | 9.9 米 | Seven hundred and eleven |
| (总计) | 46.9 米 | Two thousand eight hundred and sixteen |

这就是说 1313 包作者用`doctrine/dbal`，792 用`nesbot/carbon`，711 用`vlucas/phpdotenv`。这些包装不是 FIG 审议的结果。它们完全存在于 PSR 进程之外。然而，在更广泛的 PHP 领域，它们的安装数量相当，覆盖范围(就依赖者而言)几乎相同。

同样，我建议在解释“家属”数量时要谨慎。也可能有混淆因素使结果产生偏差。例如，一些非 FIG 包比 FIG 包已经存在了更长时间，所以也许 PSR 包会赶上给定的时间。或者，一个作者可以创建大量具有相同依赖项的包。

但即便如此，这种比较也应该让“宏大”愿景的支持者暂停下来。FIG 在整个 PHP 社区的影响力可能没有他们想象的那么大。根据这种比较，试图将 FIG 定位为整个 PHP 领域的标准组织似乎是自以为是的。

## FIG 的合法性来源

Larry 声称 FIG 有责任实现:

> FIG 实际上已经成为 PHP 的标准团体。它花了时间去赢得它，但它做到了…
> 
> 是时候让 FIG 接受这一现实，为所有人建立一个更好的 PHP 生态系统了。

也许 FIG 已经被认为是这样的，正确与否。如果是的话，FIG 获得的任何合法性都来自于作为一个正式的标准机构的*而不是*。FIG 已经帮助“为所有人建立一个更好的 PHP 生态系统”,并且它已经通过关注它的成员项目，按照“创建”的愿景做到了这一点。

“创建”愿景下的工作成果已被整个生态系统间接和自愿地采用。它没有成为所有 PHP 程序员的自封标准团体。因此，声称一个正式的团体是实现“一个更好的 PHP 生态系统”所必需的是一个没有根据的断言。

## 备选方案 1:独立的互操作组

Larry 在他的文章中对 FIG 如何工作，以及谁在做什么做了一些观察。我很难总结他在那里的观察。

但是，Michael Cullum(FIG 3.0 提案的另一位作者)写了一个[TL；图 3.0](https://medium.com/@michaelcullumuk/fig-3-0-91dbfd21c93b#.2fhiwotgt) 的 DR 提供了相关的总结:

> *   Everyone has an equal say in FIG PSRs, regardless of their professional knowledge or the relevance of their projects in PSR problem space
>     
>     
> *   There are many smart and awesome people in FIG, They are not > project representatives
>     
>     
> *   Member projects find it difficult to participate in all activities of FIG.
>     
>     
> *   There is an ongoing question whether FIG makes PSRs for member projects or the wider community, especially when the wider community finds it difficult to participate in all activities of FIG because of its factual status as a "php standard group"

关于第四点，我希望我上面的评论已经表明，FIG PSRs 主要是为其成员项目而设计的，这一点没有任何问题；其他人可以根据自己的意愿自由地采纳或忽略它们。

不过，前三点都可以通过[鼓励`*-interop`组](https://groups.google.com/d/msg/php-fig/nlNXTYIR9Is/lqzXL3nQBgAJ)，沿着[容器互操作](https://github.com/container-interop/container-interop)和[异步互操作](https://github.com/async-interop/)的路线来解决。这样做将解决前三个 TLDR 点，而对当前的 FIG 结构几乎没有任何改变:

*   一个项目专注于它的特定问题，并且可以邀请(或吸引)那些有相关专业知识的人。容器互操作和异步互操作都成功地做到了这一点。

*   一个项目不需要仅限于项目代表。根据项目领导的意愿，它可以引入任何它想要的人。

*   感兴趣的各方可以根据自己的意愿选择参与的程度，参与尽可能多或尽可能少的项目。

鼓励独立的互操作小组解决了所有的 TLDR 问题，减少了官僚主义、集权、层级、委员会、灵活性和开放性。它还在一定程度上证明了 interop 小组提出的建议实际上已经被多个项目采用，并且已经准备好被认可。当互操作组准备好了，它就可以带着一个经过仔细审查的提议来 FIG(如果它愿意的话)。

然而，鼓励独立的互操作组并不能解决“早期声望”的问题。也就是说，在任何人真正使用你的工作之前，形成一个独立的互操作组并不能使你的工作具有“所有 PHP 领域的标准”的特征。对于图 3.0 的一些支持者，我认为“早期声望”是一个特性，而不是一个错误。

## 备选方案 2:解散国际体操联合会

第二种选择是宣布 FIG，如最初设想的那样，不再为有用的目的[服务，应该解散](https://groups.google.com/d/msg/php-fig/KJJsghdSCYI/7TvM4owkBwAJ)，也许是为了给其他组织腾出空间。

作为该组织的创始成员，我不会轻易提出这种选择。然而，这样做会承认几个事实，正如我在我的博客文章“FIG Follies”中讨论的那样([第二部分](http://paul-m-jones.com/archives/6384)和[第三部分](http://paul-m-jones.com/archives/6389))。这些现实是:

*   目前有两种对立的观点在 FIG 中竞争:一种坚持“创始”观点，另一种坚持 FIG 3.0 作为整个 PHP-land 的标准体的“宏大”观点。

*   仅仅因为一个改变已经被投票通过，并不意味着它以后不能再次被投票否决。因此，仅仅投票不足以解决问题，因为败诉方完全有权利继续坚持自己的主张。这是一个世界观问题。

*   最好的长期解决方案是让一组愿景持有者明确放弃他们的愿景，也许还退出 FIG。然而，这两组愿景持有者都不愿意退出，因为 FIG 的合法性和声誉(在“创建”愿景下赢得的)是一笔太大的资产放弃。

因此，完全解散这个团体可能更好。这实际上意味着不同的愿景持有人同时向对方投降，而不是继续他们在无花果上的竞争。

解散团体时，FIG 应将其资产委托给档案保管员，以维护 PSRs、网站等，使其保持当前状态。这就把 FIG 的实际生产产出(即 PSRs)留给了后代。档案保管员将保管 FIG 的名称和账户，并保护它们不被再次使用。档案管理员也可以合并勘误表和现有已接受 PSR 的非实质性变更。

解散也为另一个团体的形成留下了空间。如果 FIG 解散后出现了另一个与标准相关的团体，这个团体将需要在一个新的名称下，用自己的成就来赢得自己的方式。

我在我的 [FIG Follies Part 3](http://paul-m-jones.com/archives/6389) 帖子中讨论了更多关于这种选择的细节。

## 结论

拉里最近[要求对 FIG 3.0 提案](https://groups.google.com/forum/#!msg/php-fig/crD6q9ZJHNg/4k-uESK0AwAJ)进行投票，这意味着它现在掌握在 FIG 投票成员手中。如果通过，上述两种替代方案可能都不再可行。

在我看来，投票支持该提案意味着国际体操联合会对自己的官方看法将从“我们认为我们知道什么对我们最有利”变成“我们认为我们知道什么对 T2 和你们最有利”我相信这将是一个更糟糕的变化。

## 分享这篇文章