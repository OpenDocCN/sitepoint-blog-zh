# SCSS-林特入门

> 原文：<https://www.sitepoint.com/getting-started-with-scss-lint/>

听起来可能令人惊讶，但编写工作代码实际上是开发网站、应用程序或任何软件时最容易的部分。让整个事情变得可扩展、可测试、适当地记录并易于贡献给*是*最难的部分。

一部分是拥有一个既干净又一致的代码库。干净，因为维护丑陋的“怪异”代码肯定不是一件愉快和一致的事情，因为它使维护代码库更容易和更快。如果代码在软件的任何地方看起来都一样，那么习惯它的编写方式应该会很快。

说到 Sass，您可以做几件事情来使您的代码干净和一致。第一个是尊重一些编码指南，比如 [CSS 指南](http://cssguidelin.es)和 [Sass 指南](http://sass-guidelin.es)。另一件事是 *lint* 你的代码库。

如果你不熟悉 lint 这个词，维基百科是这么说的:

> 在计算机编程中，lint 最初是一个特定程序的名称，该程序在 C 语言源代码中标记一些可疑和不可移植的结构(可能是 bug)。这个术语现在一般用于标记任何计算机语言编写的软件中可疑用法的工具。

在 Sass 中什么是可疑的用法？这取决于你如何定义*可疑的*,但是，更广泛地说，这可能只是确保样式表保持易读而不复杂的问题。例如，将选择器嵌套的使用限制在单个级别。

为了 lint 我们的 Sass 代码库，有一个叫做 [SCSS-lint](https://github.com/brigade/scss-lint) 的工具。现在让我们从坏消息开始:SCSS-林特是一个 Ruby 宝石，无论你如何运行它(命令行界面，咕噜，吞咽…)，你都需要事先安装这个宝石。从好的方面来看，一些可爱的人目前正在开发一个 SCSS-林特端口作为 npm 包，所以我们迟早会摆脱这个繁琐的额外步骤。没错。让我们结束这一切:

```
$ gem install scss_lint
```

注意:gem 因命名原因被称为`scss_lint`，但命令行工具实际上是`scss-lint`。这个图书馆叫做 SCSS·林特。因为它不够复杂……:)

## CLI 工具入门

SCSS-林特有很多选项。实际上，太多了，一开始可能会有点让人不知所措。幸运的是，实际上我们不会经常使用这些，所以让我们来看看这些。

通过`-c`或`--config`选项，您可以将路径传递给一个配置文件，这将有助于定义您想要将哪些规则应用于您的代码库。例如:

```
$ scss-lint . --config .scss-lint.yml
```

根据您的项目，您可能希望使用`-e`或`--exclude`选项从林挺进程中排除一些文件或文件夹。例如，您可能不想 lint 您的第三方库或您的节点模块。例如

```
$ scss-lint . --exclude ./node_modules/**/*
```

对于`--exclude`更复杂的用法，可以在通过`--config`传递的配置文件中定义。

还有其他选择，但我觉得这已经足够开始了。

传递给`scss-lint`的第一个参数是要运行的文件夹。如果省略，将默认为当前文件夹`.`。如果您想要指定特定的文件夹，您可以:

```
scss-lint ./assets/stylesheets
```

## 配置棉绒

既然我们已经准备好 lint 我们的 Sass 代码库，我们需要定义我们应该坚持哪些规则。SCSS-林特公司有一大堆被称为“T1”的棉绒，数量如此之多，以至于在这里一一列举就显得太长了。我建议你浏览一下[棉绒文档](https://github.com/brigade/scss-lint/blob/master/lib/scss_lint/linter/README.md)。

想法是在项目的根目录下创建一个 YAML 文件，包含所有的林挺配置。默认情况下，SCSS-林特会尝试在当前文件夹中寻找一个`.scss-lint.yml`文件，所以我建议你像这样命名你的文件。然而，如果你喜欢另一个名字，你可以；一定要用`--config`选项通过，就这样。

Sass Guidelines 已经为您准备好了一个配置文件,可以在您的项目中使用。如果你想定制东西，一定要有更深入的观察，但总的来说，它应该可以做到这一点。

## 林挺论犯罪

一件简单的事情是，在借助预提交钩子提交时，确保代码是干净的。在 SitePoint 上一篇名为[测试 Sass 库](#)的文章中，我使用了一点 Sass 测试和预提交挂钩。

如果你不确定预提交钩子是什么，基本上它是一种机制，目的是在提交之前运行一些操作。如果执行的任何操作引发了错误，那么提交将被中止。

确保代码在提交到远程存储库之前被链接是 Git 挂钩的完美用例。在这一节中，我们将看到如何以一种非常简单的方式来设置它。

为此，我们将使用一个非常轻量级的 npm 包，通过`package.json`文件方向为 Git 挂钩提供支持。有很多库可以这样做，但是我个人选择了[预提交](https://github.com/nlf/precommit-hook)。它看起来是这样的:

```
{
  "scripts": {
    "lint": "scss-lint ."
  },
  "pre-commit": [
    "lint"
  ]
}
```

提交时，预提交钩子触发并运行`lint` npm 脚本(与`npm run lint`完全一样)。从代码中可以看出，`lint` npm 脚本运行`scss-lint .`命令。如果 pass 林特返回一个错误，提交被中止，代码需要修复提交通过。

如果你通过 Gulp、Grunt 或其他方式运行 SCSS-林特，你可以在`lint` npm 脚本中运行任务，而不是直接使用`scss-lint`二进制文件。同样，您可以传递像`--config`或`--exclude`这样的选项。

## 最后的想法

我们总是可以走得更远，但我认为这是对 SCSS-林特的一个很好的介绍，我们实际上可以以一种简单而强大的方式在现有的和新的项目中使用它。

没有理由继续犯下肮脏的代码了，伙计们，在推它之前先把它扔掉！

## 分享这篇文章