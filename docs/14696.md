# P3P、Cookies 和 IE6.0:案例研究

> 原文:[https://www.sitepoint.com/p3p-cookies-ie6/](https://www.sitepoint.com/p3p-cookies-ie6/)

我不喜欢这个话题。然而，我认为这是当今站长面临的最重要的问题之一。这是隐私。

作为一名互联网用户，我很关心隐私。当然，我不希望我的地址被卖给肆无忌惮的垃圾邮件发送者，但是，像大多数人一样，我并不总是阅读我访问的网站的隐私政策。

一个网站的用户是它的生命线，尤其是在网络营销和在线业务的游戏中。因此，非常重要的一点是，我们要重视网站的隐私要求。

别担心——我不会在这里用一篇论文来烦你；我只给你简单的答案。阅读这篇文章，用你在这里学到的技术更新你的站点。然后，如果你选择从我下面列出的资源中找到更多信息，你将比大多数人更好地准备应对在线消费者隐私领域的变化。至少，你会遵守规则。而且，对某些人来说，会有一些衍生产品实际上增加了你的流量。稍后会有更多的介绍。

##### 隐私合规性—谁在乎？

众所周知，微软凭借其 Internet Explorer 浏览器统治着市场，所以，一般来说，我们都会关注微软做的任何事情。在最新版本(IE6.0)中，MS 基于新的 w3c(万维网联盟)P3P 标准(隐私偏好项目平台)，重新定义了浏览器对 cookies 的反应方式。

由于这篇文章是由一个门外汉为其他门外汉写的，所以我会故意让讨论变得轻松。如果您想谈论技术并获得我提到的工具，请访问本文末尾的链接。

足以说明 MS IE6.0 重新定义了浏览器的安全设置；似乎我们原来的“高”安全设置现在变成了“中”，软件将其设置为默认设置。然而，不仅仅如此。浏览器当然允许用户改变这些设置，甚至覆盖它们，但是对于那些正在为 cookies 的基本概念而挣扎的用户来说，这无异于为访问在线内容设置了一个新的障碍。

许多网站——甚至是大的、高流量的网站——似乎没有符合新 P3P 标准的隐私政策。如果你使用 IE 浏览器，当你进入这些网站时，你就能感觉到这一点，因为浏览器的状态栏中会出现一个带有红色减号的“眼球”。用户第一次尝试使用 IE6.0 访问不符合隐私政策的网站时，会出现一个警告对话框。这对新用户——你的用户——来说是可怕的事情。如果他们勾选了“不要再提醒我这件事”的复选框，魔眼就会出现。虽然这是一个降级的警告，但它仍然令人不安，足以让那些不了解或不信任互联网的人对网站的内容——也许是你网站的内容——产生更多的怀疑。

你可以看到我们的发展方向。作为互联网上的营销人员，我们的任务是获得客户的信任，并为他们提供愉快而有价值的体验，从而促成购买。嘿，公事公办，对吧？而这种信任可能会被一个处于警戒状态的浏览器迅速侵蚀——甚至在你知道发生了什么之前。

有多少成千上万的人可能已经访问过你的网站，经历过可怕的“负眼球”甚至是完全的“封锁舱口，这个网站是肮脏的！”警告？别担心，一会儿我会告诉你如何解决这个问题。

对于许多域名的所有者来说，这种情况会变得更糟，他们会将访问者转发到一个主服务器上。事实上，正是这一点让我开始亲自调查整个 P3P 问题，并撰写了这篇关于 P3P 快速合规的文章。

##### P3P 问题变得个人化了

我最近和我的合伙人米奇·鲍德温一起注册了 yousmartass.com 域名。因为我已经有了两台大型主机服务器，有足够的空间容纳很多猫，所以我选择将域名 yousmartass.com 转发到我已经托管的域名 free-agent-path.info

我对所有的页面进行了编码，并根据现有的声明创建了一个隐私政策，我根据自己的需要对其进行了编辑。许多人采取这种方法，尽管你可以免费获得专门为你的网站制定的政策——稍后会详细介绍。

我决定允许访问我的网站的最好和最快的方法是使用 cookie 作为入场券。作为网站软件下载过程的一部分，当用户输入他们的联系方式时，他们的机器上会有一个 cookie。理论上行得通，所以我自己试了试。

从 yousmartass.com 到 free-agent-path.info 上指定文件夹的重定向工作正常。一旦我输入了我的名字和电子邮件地址，我的机器就会收到一个 cookie，它会自动接受，我就可以访问了。那么…问题出在哪里？

问题是我没有在浏览器上调用现在默认标准的中等设置。我艰难地发现，当我的软件页面没有看到显然从未放置的 cookie 时，数百名访问者被拒之门外。它没有放在用户的机器上，因为该网站没有机器可读的隐私政策，浏览器的规则规定，如果没有政策存在，就不会接受任何 cookie。

但这不是我想放的普通饼干。因为我已经重定向了初始 URL，并且 cookies 被放置在这个新的域(free-agent-path.info)中，所以它们被定义为第三方。针对第三方 cookies 制定了更严格的法律，我的法律肯定没有被接受。吃饼干而死似乎是当今的时尚。

严格的 cookie 标准是为了阻止可疑的个人和公司在未经你同意的情况下了解你的信息，因为你是在一个主机网站上无辜地冲浪。它尤其应该保护用户免受第三方网站的攻击，这些网站的广告会窃取你的个人信息。有没有尝试过切换设置，以便每次通过浏览器放置 cookie 时都有提示？你可以在工具->互联网选项->隐私->高级中完成。然后去像 howstuffworks.com 这样的地方。你可以明白为什么我们需要隐私——至少，这样我们就不会整天不停地敲打对话框了！

我必须想办法让浏览器在这个第三方 cookie 问题上放松下来，并开始接受它们，否则，我的许多访问者将会被冷落。事实上，他们已经是了！当时，我收到了无数电子邮件，请求加入，有些人在不同场合尝试了 4 次以上。

##### 您自己的 P3P 隐私政策

让我们后退几步。什么是隐私政策？实际上是四件事。

首先，它是你收集的关于网站访问者的信息，以及你打算用这些信息做什么的人类可读的陈述。这应该让用户清楚地看到，通常链接到主页(通常在页脚)和网站的其他关键页面。

制定符合 P3P 标准的隐私政策的第二个方面涉及到以 XML(可扩展标记语言)的形式托管一个完整的政策，该政策定义了您的业务地址、联系方式、您的可读隐私政策的位置、如果用户感觉他们的隐私被侵犯时要采取的措施，以及所收集的用户数据的类型和相关选项。

第三个考虑因素是策略参考文件。引用文件指向策略文件在服务器上的位置。这两个文件通常都位于众所周知的位置——一个必须称为 w3c 的文件夹，并且位于站点的顶层。不像 cgi-bin 那样在顶层之上，而是在 html documents 文件夹的第一层。

这两个文件都是 XML 文档，但是您不必急着去买《白痴指南》——帮助就在手边。IBM 带来了一个 Java 应用程序，它运行在您自己的机器上，应该会引导您完成实现法规遵从性所需的一切。从一端进入你的意图，从另一端出来商品！全部免费。

然而实际上，这并不像听起来那么简单。该过程包括将信息收集实例从您的站点(在左侧窗口中定义)拖到右侧窗口，这是您的活动策略。当实例到达正确的窗口时，它们被合并到概要文件中。而且，随着档案的增长，它还会生成一个书面的隐私策略。

然而，网站所有者必须进入一个菜单并点击多个标签，输入具体的公司和/或个人信息，如公司地址、电话号码、电子邮件联系方式等。在该过程完成之前，我们还必须采取一些其他步骤。结合错误页面的消息和一些常规的菜单窥探，我们可以轻松地创建策略参考文件。

完成的文件可以保存到服务器上各自的文件夹中，如前所述(privacy_policy.xml 和 ref_policy.xml 都放在 www.your_domain/w3c/的 w3c 文件夹中)。

第四，也是使用 cookies 的网站特别感兴趣的，是压缩策略，或 CP。这是机器可读的标题代码，使用完整策略的缩写形式。当您使用 IBM 策略生成器时，它实际上是从完整的策略中派生出来的。

但是——这是个好消息——为了保证你的访问者不会屏蔽你的 cookies，你需要立即做的唯一一件事就是契约政策。让我们看看它是如何工作的。

##### 契约政策

标题是在评估主页之前发送给浏览器的信息。当一个 cookie 被发送时，它必须伴随着一个紧凑的隐私政策，这样用户的浏览器就可以查看两者，看它们是否结合，并决定如何处理。做好这一点，除了最难的设置，用户浏览器上的所有设置都不会对你的 cookies 产生问题。

现在，我们不需要详细讨论这个问题，因为隐私委员会的好心人提供了一种自动服务，可以创建简洁的策略。他们甚至会把结果用电子邮件发给你。只要向他们注册，从一系列关于你的网站做什么和不做什么的选择题中进行选择，你就又可以做生意了。

现在，您需要知道如何在页面中实现压缩策略。同样，我将使用我在自己的站点中使用的代码来说明这一点。

在纯 HTML 页面中，将以下代码插入页面的 head 部分:

```
<meta http-equiv="P3P" content='CP="IDC DSP COR CURa ADMa  

OUR IND PHY ONL COM STA"'>
```

在 PHP 页面中，在设置 cookie 后，首先在页面上插入以下内容:

```
<?php header('P3P: CP="IDC DSP COR CURa ADMa OUR IND  

PHY ONL COM STA"'); ?>
```

对于其他服务器端语言，请参见下面标题为“标题创建”的链接。

当然，不要只是照原样使用上面的代码。您需要访问隐私委员会下面给出的 URL，并生成您自己的 URL。别担心，这很简单，也不需要什么技术。

重要的是要明白，只有放置 cookies 的页面才需要有 CP。表单页面不设置 cookies，所以不需要策略。请记住，如果您使用一段 JavaScript 代码来设置弹出式控件的 cookie，那么调用弹出式控件并进行 cookie 设置的页面将需要一个紧凑的策略。

一些站点可能需要多个策略。为什么？策略描述了在特定的 URL 位置收集了什么信息(以及为什么收集)。这可以是整个站点，也可以是站点上的特定文件夹。虽然我们大多数人可能会为整个网站生成一个策略，但也有可能在每个标题、每个页面上指向不同的策略位置。例如，如果网站的一个部分允许用户通过提供电子邮件地址和名字来订阅您的时事通讯，而另一个部分提供了一个使用 cookies 来自定义浏览器视图的成员区域，您就会这样做。也许您还提供了一个存储用户状态和个人信息的购物车，用于处理订单。

如果您需要指向另一个已生成的策略来描述 cookie 的特定用途，您需要在将 cookie 传递给访问浏览器的页面上放置以下标题之一:

首先，使用 PHP:

```
<?php Header('P3P: href="/your_2nd_policy/p3p.xml"   

CP="your compact policy"'); ?>
```

现在，使用 HTML:

```
<meta http-equiv="P3P" href="/your_2nd_policy/p3p.xml"  

content='CP="your compact policy"'>
```

如果遵循这些指南，您已经构建了自己的个人文件，那么您可以使用 W3C 在[https://www.w3.org/P3P/validator.html](https://www.w3.org/P3P/validator.html)提供的策略验证器来测试它们

##### 谁负责？

最后，在你称自己为专家之前，你必须意识到所有这些 P3P 的东西仍然没有指定任何类型的合规性评估。一个网站很可能在如何处理用户数据的问题上撒了谎，但是，如果政策得当，浏览器会很高兴。该政策必须列出用户在争议解决过程中采取的行动，在大多数情况下，可以是直接营销协会。

嗯，这是 W3C 定义的通过 P3P 对隐私遵从世界的软介绍。如果你学到了什么的话，那就是隐私问题会影响你的网站的运营，当然也影响你的用户对你和你的企业的态度。我希望，有了这些新知识，你会拒绝更少的访客，增加销售额。有关更多信息，请参见下面的链接。

***工具***

[AlphaWorks IBM 全策略生成器](http://www.alphaworks.ibm.com/tech/p3peditor)

[隐私委员会契约政策生成器](http://www.privacycouncil.com/freep3pfix.php)

***资源***

如何通过六个简单的步骤让你的网站符合规范
[https://www.w3.org/P3P/usep3p.html](https://www.w3.org/P3P/usep3p.html)

一个简单的技术概述
[http://www . phpmytools . org/PMT 2003/topics . PHP/article _ id/23/pos/0](http://www.phpmytools.org/pmt2003/topics.php/article_id/23/pos/0)

更详细的技术概述
[http://tech.irt.org/articles/js111](http://tech.irt.org/articles/js111)

契约隐私政策信息
[http://www.p3pwriter.com/LRN_111.asp](http://www.p3pwriter.com/LRN_111.asp)

技术定义
[http://www.p3pwriter.com/LRN_000.asp](http://www.p3pwriter.com/LRN_000.asp)

标题创建
[http://www.privacycouncil.com/implementation.php](http://www.privacycouncil.com/implementation.php)

WWW 财团任务
T1】https://www.w3.org/Consortium/Points

***争议解决***

直销协会
[http://www.the-dma.org](http://www.the-dma.org)

## 分享这篇文章