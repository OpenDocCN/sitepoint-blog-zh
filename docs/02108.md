# 渐进式网络应用:弥合网络和移动之间的鸿沟

> 原文:[https://www . site point . com/progressive-web-apps-bridging-the-gap-between-web-and-mobile/](https://www.sitepoint.com/progressive-web-apps-bridging-the-gap-between-web-and-mobile/)

![Progressive web apps](../Images/ea8b12f05ad388fe5818f98dc10d517f.png)

在本文中，我们将介绍什么是渐进式 web 应用程序(PWA ),研究一些现实生活中的案例，并探索 PWA 可以发挥巨大作用的其他用途和情况。

如今，无论走到哪里，都有大量的人连接到互联网。然而，仍然有更多的用户间歇接入，例如使用移动数据计划、共享互联网接入等的用户。迎合这些用户需要改变我们习惯的信息流。

通过允许用户在离线时继续浏览，提供他们已经访问过的页面，有可能留住访问者和客户，否则一旦他们的互联网被切断，他们将一无所知。

它甚至可以使用缓存的数据和程序功能，允许类似于移动应用程序的交互性，但不需要用户通过各种应用程序商店下载应用程序，同样，也不需要提交给他们。

## 什么是渐进式网络应用？

当试图理解渐进式网络应用到底是什么时，相对于网站和移动应用进行比较可能是最容易的。在下面的表格中，一些(不是全部)更突出的功能被边缘化，pwa 在中间，象征着进步的 web 应用程序的弥合差距的功能。

| 特征 | 网站(全球资讯网的主机站) | 渐进式网络应用 | 移动应用程序 |
| --- | --- | --- | --- |
| 脱机的 | 不 | 是 | 是 |
| 应用商店 | 不 | 不 | 是 |
| 应答的 | 是 | 是 | 是 |
| 可通过计算机搜索的 | 是 | 是 | 不 |
| 本地通知 | 不 | 是 | 是 |
| 推送通知 | 不 | 是 | 是 |
| 下载以安装 | 不 | 不 | 是 |
| 快速更新 | 是 | 是 | 不 |

请记住，整个术语“渐进式 web 应用程序”松散地包含了许多相关和一些不相关的信息和标准。从技术上来说，有四个要求(见下文)定义了 PWA 是什么，目前由谷歌 Chrome、Opera 和三星互联网支持。

一旦满足这四个标准，开发人员就可以根据自己的意愿自由定制功能，因此我们可以看到离线错误页面，以及完全离线浏览，这取决于我们正在访问的项目和网站。

## 变得进步

为了让任何在线网站被识别为在服务器上安装了渐进式网络应用，从而为用户提供提示**“添加到主屏幕”**——谷歌提出了四个主要要求[:](https://developers.google.com/web/updates/2015/12/getting-started-pwa?hl=en#add_to_home_screen_banner)

*   一个站点必须被访问两次，间隔 5 分钟才有资格
*   安全 HTTPS 连接有效
*   安装的 JSON 清单有效
*   已安装服务人员。

### 必须以 5 分钟的间隔访问站点两次，才有资格

在 Google Chrome 中，用户需要访问两次托管 PWA 的网站，浏览器才会显示安装 PWA 的提示。

这不是最可靠的验证形式，但尽管如此，它似乎工作得很好，因为第一次访问的人不会受到占据手机屏幕 25%的提示的轰炸，此外，它确保用户对那个特定的网站有点兴趣，因为他们以前已经访问过它。

然而，这是一种确定用户相关性和兴趣的简单方法，人们可以猜测这个资格参数将来会被改变为更重要的东西。但目前，谷歌开发者似乎对这一衡量标准感到满意。

### 安全 HTTPS 连接

通过与 progressive web 应用程序的安全连接，用户可以通过允许 PWA 的权限而感到相对安全。

由于网络请求是通过服务工作器脚本路由的，所以向服务器添加`https`有助于减少某些漏洞，比如窥探。

虽然这一要求可能主要集中在增加安全性，防止劫机者，但拥有安全的连接也有助于建立与用户的信任。由于 pwa 可以被搜索引擎索引，所以通过 TLS 提供服务也是有意义的，因为它增加了少量的[SEO 方面的好处](https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html)。

### 安装了有效的 JSON 清单

通过提供 JSON 格式的数据提取，可以在服务人员的帮助下缓存这些信息，然后使用应用程序 shell 加载 CSS 规则，以提供具有完整 UI 功能的离线版本。

每当访问者加载新页面时，服务人员都会缓存 JSON 摘录，并将其物理存储在应用程序外壳中。这个应用程序外壳是一个自包含的包装器，它拥有用户呈现完整页面所需的所有必要的样式表、脚本、图像、字体和 HTML 输出，而无需加载任何其他内容。

与网站相比，当用户不再连接到互联网时，PWA 仍然能够显示数据。

### 安装了有效的服务人员

这可以归类为任何现代进步的网络应用程序的面包和黄油。服务工作者负责缓存所有文件、提供推送通知、内容更新、数据操作等等。

重要的是要理解这个脚本独立于 web 服务器上已经存在的任何应用程序或网站工作，使用事件监听器和命令，如“fetch”，它类似于 HTTP“Get/Post/Set”命令。

通过监听服务器上的任何网络请求，但在访问者的设备上被定位为一个`.js`文件，服务人员将根据是否有互联网来操纵这些事件，允许定制离线页面。

此外，即使用户离线，也可以根据他们现有的缓存数据显示自定义内容。这组数据甚至是可操作的，这意味着我们可以使用缓存数据作为变量和参数来编写函数——当然，如果适用于相应的项目的话。

第一次加载网站会在本地安装服务工作者，然后服务工作者会创建一个所谓的 app shell，包含输出页面、JSON 内容、CSS、图片、脚本等缓存数据。

这意味着，虽然第一次加载可能需要几秒钟，但由于服务工作人员提供的绝对速度以及他们通过缓存内容的方式，利用服务工作人员的后续加载将会明显更快。

一旦这四个要求得到正确实现，Android 手机和其他支持的设备和浏览器上的用户将被提示将 PWA 添加到他们的主屏幕上，在主屏幕上，它将像常规应用程序一样有一个图标，并将在浏览器中打开。

这取决于开发人员，以确保用户界面类似于现有的网站或应用程序，或者完全为 PWA 用户开发新的用户界面。这方面的完全自由是最初让一些开发者对这一趋势感兴趣的原因。

## 渐进式网络应用的利与弊

渐进式网络应用程序的优点包括:

*   与网站相比，速度和性能更好
*   安全
*   离线功能
*   添加到主屏幕
*   推送通知
*   更好的跳出率
*   弥合移动应用和网站之间的差距
*   感觉像一个应用程序
*   没有 App Store 提交/拒绝。

但是也有一些缺点，包括:

*   有限的浏览器支持
*   有限的本机 API 访问
*   没有 App Store 条目
*   不是所有当前的 PWA 都使用链接作为它们的页面结构，用不可链接的选项卡构建 PWA，因此搜索引擎无法发现。

## 使用场景

对于某些类型的网站和移动应用程序，开发一个 PWA 来处理网站或应用程序不能公正对待用户的情况是有意义的。

重要的是要认识到，虽然用户可以在离线模式下阅读新闻、向购物车添加商品等，但他们仍然需要互联网接入来获取新数据、更新个人资料信息或添加订单。

PWAs 可以帮助保存这些数据，以备用户重新连接时使用，但在某些情况下，如付费新闻网站，当用户无法点击任何广告或购买订阅等时，显示这些数据可能不符合网站的利益。

目前网上有许多不同类型的 PWAs。一些完全独立的应用程序也可以作为本地应用程序开发，比如《卫报》的 RioRun。

其他人已经在他们现有的网站中实现了服务工作者，通过现有的网站层添加离线功能，如[华盛顿邮报](https://www.washingtonpost.com/pwa/)，如果你浏览他们的网站，失去连接，你仍然可以阅读文章，你会看到一个特别编码的离线页面，在你等待重新上线时提供一个纵横字谜游戏。

FlipKart 报告称，与他们的网站相比，新用户的转化率增加了 70%以上，全球速卖通超过了 T2，增加了 104%。

据报道，尼日利亚在线零售商 Konga 已经减少了 92%的数据使用量，这意味着页面加载时间大大缩短。对于他们的用户群来说，主要是从 2G 网络浏览的人，这有可能在数据昂贵和高速稀缺的国家引起网络革命。

## 批评

并非所有人都对这一趋势持同样积极的态度。杰里米·基思(Jeremy Keith)表达了对以下事实的担忧:目前大多数 pwa 倾向于隐藏它们的 URL，以类似于本地移动应用，从而完全忽视了渐进式网络应用的主要优势之一——即通过爬行链接进行索引和搜索的能力。

基于这种批评，Alex Russel，负责为 Google 开发 PWAs 的人，以及其他人，[说](https://infrequently.org/2016/05/not-the-post-i-wanted-to-be-writing/):

> 和 Jeremy 一样，我对 PWAs 在更具沉浸感的模式下无法访问 URL 感到不安。如果你关心网址和分享，那么这个问题似乎会让你感到沮丧，这也是我所关心的——以至于我们的团队在本季度优先解决了这个问题。

Jeremy Keith 还对一些 pwa 根本不支持桌面网络浏览器，只在手机上运行这一事实表示担忧，这是有道理的，但与 pwa 本身没有直接关系。毕竟，应该由网站管理员和应用程序所有者来决定他们不同的网站、应用程序和 pwa 应该如何集成。他写道:

> 纵观大多数渐进式网络应用的例子，有一个比回归 m-dot 子域名更令人担忧的趋势。看起来他们中的大多数人都非常专注于“应用”部分，以至于忘记了“网络”部分。这意味着他们假设现代 JavaScript 随处可见。

令人困惑的是，开发一个实用的 PWA 花了这么多时间，然后只针对手机发布，而没有针对网络发布。看起来很奇怪，公司会故意排除一部分访问者和用户。我访问的大多数网站都没有显示任何不适合 web 的特定数据，这意味着除了为 web 编写代码的额外时间之外，我找不到不适合的理由。

## 舍入

到目前为止，渐进式网络应用已经取得了巨大的成果，在转化率、跳出率和令人印象深刻的性能提升方面取得了特别大的成功。再加上网站所有者和企业可以在不需要本地开发的情况下产生类似应用程序的体验，这位作者认为进步的网络应用程序前景光明。

几乎任何类型的企业都可以很好地实现服务工人，这仅仅是为了显著减少装载时间。不是每个网站都需要离线功能，也不是每个网站都关心转化率或跳出率。然而，鉴于建立一个简单的系统相对容易，我建议任何认真的网站所有者尽早研究这项新兴技术。

不过，我很想知道你的想法。朝这个方向走是不是太早了？像隐藏网址和不能在任何地方使用这样的事情是否违背了网络的精神？

## 分享这篇文章