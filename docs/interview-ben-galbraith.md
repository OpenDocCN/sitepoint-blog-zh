# 本·加尔布雷斯的黑仔网络开发工具

> 原文：<https://www.sitepoint.com/interview-ben-galbraith/>

Mozilla 实验室的本·加尔布雷斯(Ben Galbraith)正在[2009 年](http://south09.webdirections.org/)网络方向大会上发表关于[浏览器工具状态](http://south09.webdirections.org/program/development#the-state-of-developer-tools)的演讲。我有机会就他的 Web Directions 会议、Bespin 项目和一般的浏览器工具采访了他。

浏览器制造商对开发者工具的关注——我相信这是受 Firebug 的启发——在 web 开发行业是受欢迎的，也是令人兴奋的。人们能从你的网络方向会议中得到什么？

最近听到有人声称“开发者永远不能有太多的选择！这就是网络的伟大之处！”恕我直言，我不同意。

虽然我是自由的热情支持者，但当我们反思网络的现状及其未来时，我认为我们需要用巴里·施瓦茨的伟大研究来平衡我们对自由的慷慨——选择——的尊重，他说得很好，“更多的选择让我们更不快乐。”我们在微妙的选择中花费的精力越多，我们就越不能享受我们所做的选择。更糟糕的是，如果我们花时间去想如果我们选择了另一条路会怎么样，这会剥夺我们的快乐。

在我的演讲中，我想通过帮助与会者穿越选择的海洋来解决这个问题，发现一些可用的工具来帮助他们创建令人惊叹的 web 应用程序。

我们现在有了 DOM 和 CSS 检查器，以及在浏览器中广泛可用的 JavaScript 调试和基准测试。你认为开发者工具将何去何从？你认为在开发者工具的世界里，目前正在探索的最令人兴奋的想法是什么？

最让我兴奋的趋势是开放浏览器的调试工具，以便外部工具可以很容易地与它们集成。在 Mozilla，我们中的许多人对这个方向很感兴趣，我们正在努力研究如何以这种方式最好地开放 Firefox。在这方面，我非常喜欢 Sun 用他们的 Java 平台调试器架构(JPDA)所做的工作；它确实为运行时应该公开的调试服务设置了标准。

与此相关的是，我非常兴奋地看到将浏览器视为复杂应用程序运行时所必需的工具出现，比如我们在 Mozilla 实验室正在开发的新内存工具，以及谷歌在 Chrome 中使用自己的内存工具所做的工作。

我认为，在未来几年，我们将在这两个领域看到大量令人激动的发展。

自从不得不使用警报功能进行调试以来，我们已经取得了很大的进步。借助于现代浏览器中强大的标准支持，开发人员现在有了一个选择，并且通常有一个最喜欢的浏览器来完成他们的大部分开发。[托马斯·富克斯](http://mir.aculo.us/2009/07/09/why-i-use-safari-for-development/)说过他首选的开发浏览器是 Safari 4。我们自己的技术总监 Kevin Yank 说，由于 Firebug，他更喜欢 Safari 用于日常浏览，但更喜欢 Firefox 用于开发。在您的工作中，您是否发现可用开发工具的质量会影响特定浏览器在开发人员中的受欢迎程度？

我不确定浏览器的开发者工具和开发者用来上网的浏览器之间有什么关系。在某些情况下，对这些不同的活动使用不同的浏览器实际上会更方便。当然，对于 Firefox 来说，我怀疑我们 3 亿左右的用户中 web 开发者的比例相当低。

话虽如此，我们 Mozilla 致力于开发人员工具领域，非常希望 Firefox 的开发人员工具非常棒。这并不是因为浏览器受欢迎——你可以说，如果这是我们的目标，我们可以进行更有成效的投资——而是因为我们认为这对整个网络来说是正确的。我们喜欢 Safari、IE、Opera 和 Chrome 在这一领域的出色表现，我们希望我们在这一领域的工作能够与他们一起提高每个人的标准。

至于 Safari 和 Firebug，我看得相当仔细。我喜欢 Safari 工具的地方在于它们对时尚和细节的关注(这对于苹果来说并不意外)。例如，我喜欢他们调试器的源代码查看器在鼠标经过当前行时突出显示当前行的方式，我对他们网络计时信息的美感很着迷。但另一方面，我更喜欢 Firebug 在鼠标悬停在某个项目上时对网络计时的详细分析，以及更丰富的 JavaScript 调试器特性(比如提供更有用的堆栈列表和中央断点列表)。

Firebug 当然有它的弱点；我们正在与 Firebug 的主要维护者——令人惊叹的多产的 John j . Barton——合作来帮助解决这些问题。

即使一个开发者可能有他的最爱，测试仍然需要在所有的浏览器中进行。尽管能够窥探浏览器渲染引擎内部的情况非常重要，但为每个浏览器配备不同的开发人员工具会增加复杂性。你认为管理这么多开发工具对开发者有好处吗？我们真的能做些什么吗？有没有更好的办法？开发者工具都集中在同一个使用模型上吗？

我在前面谈到浏览器运行时开放调试器 API 的趋势时提到了这一点。但是，在我们到达那个神奇的世界之前，在那里，我们有跨浏览器工作并使用不同平台调试器 API 的工具，通过遵循 Firebug 的领导，大多数工具实际上都集中在非常相似的用户体验上。虽然不同浏览器的细节可能会有很大的不同，但基本的使用模式是完全相同的。

Opera 蜻蜓包含了远程调试功能，这在移动设备上开发 Opera 时非常有用。你认为这是开发工具的一个扩展领域吗？对开发者更有用的是什么:在真实设备上进行现场测试还是在模拟器上进行测试？开发者工具实验室对移动开发工具有什么计划吗？

再说一次，我之前已经谈过了，但是对于你的最后一个问题:是的。Bespin 已经做了一些工作，专门针对移动浏览器平台远程连接到浏览器。将这一功能与 Firefox、Fennec、Chrome 或其他运行在桌面或移动设备上的浏览器连接起来，还需要做少量的工作。

**[Bespin](https://bespin.mozilla.com/) 立即令人印象深刻，但也令人费解。只是一个代码编辑器吗？是协作工具吗？它是托管服务吗？是应用平台吗？是这些都有，还是一个都没有？你对 Bespin 的愿景是什么？**

所有这些事情。现在，Bespin 是一个实验，所以它的定义和边界有点模糊。但自从我们几个月前开始这个项目以来，Bespin 需要成为(1)一个可嵌入的编辑器，(2)一个围绕编辑器构建的完整的基于网络的社交编码环境，以及(3)一个提供基于网络的体验的托管服务。

我们已经看到许多人嵌入了编辑器，构建了他们自己的 Bespin 实例，并使用我们目前在[bespin.mozilla.com](https://bespin.mozilla.com/)提供的服务——我们非常感谢所有这些用户，他们的反馈，尤其是他们的补丁！

我们的愿景是 Bespin 通过以下方式改变你我编写代码的方式:(1)将我们的编码环境迁移到云中，使它可以从任何浏览器(包括移动浏览器)上使用，(2)使体验变得非常社会化，以及(3)减少为开源项目做贡献的摩擦。

利用画布元素是一个有趣的决定。Bespin 接口有多少在 canvas 元素中？画布元素有多百搭？你为什么选择那样做？你认为微软会支持画布元素吗？你认为它有潜力成为一个应用程序接口平台吗？这就是雷神[和](https://wiki.mozilla.org/Labs/Thunderhead)背后的想法吗？

我们最初选择 canvas 来驱动编辑器，因为我觉得这是我们获得创建高质量文本编辑体验所需的性能和控制的唯一方法。即使是在为支持定制文本编辑组件而设计的平台上开发的代码编辑器，最终也会开发出自己的文本编辑器，因此向那个方向发展似乎并不困难。碰巧的是，我对 canvas (Java 的 Java 2D API)这样的 API 有丰富的经验，所以我能够在一两个小时内完成 Bespin 的基本原型。其余的很自然地从那里流出。

希望微软支持 canvas 我们只能等着瞧了。这个决定背后的政治因素依赖于 Silverlight、Windows、Internet Explorer 和其他以不明显的方式相互关联的动态因素。如果要我猜的话，我会说他们会等着看是否有大型网络公司利用它，并积极鼓励用户在推出它之前转向 IE 之外的东西。我看不出主动实施它会如何服务于他们的 Windows 或 Office 系列产品。毕竟微软的动机是相当透明的。

在 Bespin 生活的早期，我们尝试使用 canvas 做不仅仅是代码编辑器的事情；我们也用它实现了一个文件浏览器组件。作为这项工作的一部分，我们创建了 Thunderhead，这是一个 JavaScript GUI 工具包，可以使用 canvas 进行渲染，并与 DOM 元素进行互操作。当时，有些人说我们在重新发明轮子，但我们有一个在 2D 渲染中实现功能和效果的愿景，这是用 DOM API 不可能实现的。但是发生了两件事，让我们确信这是一个错误的转变。首先，苹果公司首创的 CSS 效果风靡一时，并被许多人普遍认为是将花哨的 2D 和 3D 效果集成到 DOM API 中的有效模型；第二，我们意识到构建一个通用的 UI 工具包需要多少工作量。我以为我知道这有多难，但我错了一个数量级。这是非常艰苦的工作。任何从实现酷功能中获得的好处，等等，都被获得一千个小细节所需的时间投资抵消了。

所以我们正在应用从 Thunderhead 中学到的经验；它的范围将会缩小，成为驱动 Bespin 的代码编辑器的框架(在未来很长一段时间内将会是 canvas ),我们很可能将 DOM 元素用于系统中的所有其他 UI 部分。但是我们可能会在一些需要自定义动态渲染的小部分 UI 中使用它。

稍微绕了一下道:我对[雷霆之头]这个名字有意见。我一直在思考航海意义上的“头”。没有更好的名字吗？蒂班纳，洛博特，或者我最喜欢的:Ugnaught 怎么样？

无畏号怎么样？；-)

**在 Bespin 视频中，您提到了您能够实施的性能优化。[微软发布了一份报告](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=cd8932f3-b4be-4e0e-a73b-4a373d85146d),详细描述了他们所表述的浏览器性能基准测试工具的“局限性”,以及 JavaScript 运行时性能测试结果中的微秒差异并不能反映“真实世界”的性能。你同意吗，为什么或为什么不同意？什么是好的浏览器性能测试？你在开发 Bespin 时遇到的主要性能障碍是什么，你是如何克服的？**

最终，我只关心可感知的性能。保持界面的响应，在点击后阻塞不超过 50-100 毫秒，并将更长的延迟推到后台。JavaScript 为我们提供了完成这项工作所需的工具，所以这很好。而且，多亏了网络工作者，我们现在可以在浏览器客户端上以独立于用户界面的线程进行昂贵的计算，为更多种类的应用程序在浏览器中运行开辟了道路。

一般来说，在微秒级测量性能对于应用开发者来说是没有意义的；只有运行时平台工程师应该关心这种粒度。

Bespin 的主要性能障碍是保持文本编辑器的渲染循环(需要时重新绘制的代码)尽可能快。似乎代码不断被添加到这个关键路径中，导致 Bespin 的响应能力不如我们所希望的，我们必须进入并将其推离主路径。JavaScript 运行时变得越快，这个问题就越小；但是当敲击键盘时，你可以感觉到低至 10 毫秒级别的延迟，所以原则上我们尽量保持这条路径平滑。

其他方面的性能通常不是问题。

在 Bespin 的开发过程中，哪些开发工具是有用的？

萤火虫。:-)

我们还能从 Mozilla 的开发者工具实验室期待什么？

我们现在专注于我上面描述的领域:Bespin，通过公开调试 API 来开放浏览器运行时，帮助开发人员选择正确的工具，以及改进 Firebug。但是，我们是一个实验室，你永远不知道还有什么可能逃脱！

## 分享这篇文章