# 图灵机和 REST

> 原文：<https://www.sitepoint.com/turing-machine-and-rest/>

我们经常看到这种情况。“RESTful”这个，“REST”协议那个，等等。然而，我们很多人并不真正理解它的确切含义。我们将在本文中准确地修复这个缺口！

## 状态

在计算机科学(某种程度上也包括数学)中，有一个状态的概念。某个系统可以处于状态 *A* 或者可以处于状态 *B* 或者可以是一堆其他状态(通常是状态的有限列表)。

举个例子，假设你写了一个程序，如果温度超过华氏 80 度，它就把屏幕变成红色；如果温度低于华氏 80 度，它就变成蓝色。

我们可以把第一种状态(温度> 80 度)称为状态“A”，把第二种状态(温度< 80 度)称为状态“B”。我们称中间状态(温度= 80 度)为“C”。正如我们所看到的，我们已经定义了程序在状态 A 和状态 B 的行为，但没有定义状态 c 的行为。

这就是国家的一般概念。这是无所不知的维基百科给出的定义:

在计算机科学和自动机理论中，数字逻辑电路或计算机程序的状态是一个技术术语，指该电路或程序在给定时间点所使用的所有存储信息

简而言之，它是程序考虑的所有信息的一种“组合”。

现在，我们将跃进一些被认为主要是理论上的和无用的东西，然后以某种方式连接到非常实际的 REST 世界。

## 图灵机

有一个叫艾伦·图灵的人，他是一个非常聪明的数学家，对计算机的工作很感兴趣。他构想了一台假想的计算机(正如我们将看到的，它实际上是不可能实际建造的)，他用它来推理真实计算机中发生的事情。

计算机由一条无限长的磁带组成，磁带通过磁头。这种带子有“单元”，信息可以写入其中(数字、颜色等)。)带子穿过机器，向左或向右，一次一个细胞。机器扫描磁带上已有的内容，并根据其所处的状态，将某些内容写回到磁带上，然后改变其状态。

你可能需要再读一遍这个定义，以便完全理解。该思想的本质是基于状态对存储器进行操作，并且根据对存储器的操作来改变状态。

这似乎是一个相当无用的理论幻想(尽管，这绝对没有错，如果你想知道为什么人们会对理论感兴趣，请阅读[一位数学家的道歉](http://www.math.ualberta.ca/mss/misc/A%20Mathematician's%20Apology.pdf))。然而，它很可能是计算机科学中最基本的概念。

使用图灵机，计算机科学家能够推理任何可以在计算机上运行的算法。事实上，图灵机引领了计算机科学的许多进步。

所以，图灵机向我们展示了今天(注意:我没有考虑图形简化处理器)，几乎计算机科学中的一切都是基于状态的概念。

## 网络

然后出现了互联网的概念。在这里，数据包可能会失控，并被重新发送，直到它们到达目的地。一般来说，从来没有完整的数据传输。

客户来的快，走的也快两倍。因此，在网络系统上工作时，保持客户端状态没有多大意义。

此外，一般来说，在一个系统中保存太多的状态是一个很大的问题(这也导致了函数式编程语言，它不允许在大部分代码中保存状态)。

现在，人们需要一个简单、快速、能在动态环境中很好地处理状态管理的网络协议。

这个协议就是 HTTP，HTTP 研究中产生的理论被称为 REST。

## 休息

REST 代表:表象状态转移。它是一个围绕“客户机-服务器”概念构建的系统，网络是建立在这个概念之上的(当然，也有对等类型的网络，但是，客户机-服务器无疑是最简单和最可靠的体系结构)。这个名字本身有点误导，因为服务器是完全不受状态约束的！

所有声称“RESTful”的系统都必须遵循一些约束。

首先，它*必须*是客户端-服务器系统。这个约束在过去已经被修改过了，但是在正式定义中(为了让 REST 理论正常工作)，我们有了客户机可以连接的服务器。

服务器是完全无状态的。这意味着对于每个客户端对服务器的请求，服务器上不会保留任何状态。例如，如果一个客户端(使用 HTTP)请求索引页面，然后请求/user/home 页面，那么这两个请求是完全相互独立的。客户端持有系统状态的所有信息(因此，我们有了 back 按钮)。

来自服务器的响应必须是可缓存的，这意味着服务器上必须有一个系统来标识响应是否可缓存，以便客户机(例如 web 浏览器)可以利用缓存。

最后，我们必须有一个简单、干净、统一的界面。如果您对 HTTP 的工作方式有所了解，那么请求表单非常简单。它们主要是动词和名词，具有非常容易解析和人类可读的格式。SOAP 是另一种形式的网络协议，它完全消除了这种需求，因此通常很难使用。

那么，所有这些属性加在一起意味着什么呢？

## 休息的含义

它们让我们构建清晰分离、可伸缩、易于调试的系统。

让我们首先考虑服务器上无状态的限制，这可能是最重要的(也是最经常被所谓的 RESTful 架构违反的)一点。

如前所述，在客户端-服务器架构中，客户端非常灵活；他们发出请求，突然切断所有通信。在这种情况下，不在服务器上保存客户机的状态要干净得多。这让我们很容易推理 HTTP 服务器；每一个客户请求都可能被当作一个全新的客户来处理，不会有任何差别。

其次，可缓存的响应意味着客户端能够更快地获取数据，因为通常可以从客户端的内存中检索数据。这立即提高了客户机性能，在某些系统中，还提高了服务器的可伸缩性。

统一的界面可能是最重要的。使用过 SOAP 之后，我可以告诉你，当试图调试服务器代码时，HTTP 的简单格式是一个福音，这同样适用于其他 RESTful 系统。

## 设计 RESTful 系统

假设我们需要编写一个返回股票报价的服务器，并保留一个要监控的股票报价列表(用户可以添加或清除列表)。

对于 RESTful 系统来说，这是一个很好的例子，因为它本质上独立于客户机的身份。因此，服务器不需要保存客户端的任何状态。

我们首先定义协议语言将如何工作(有点像 HTTP 的 GET 和 POST 动词):

GETQUOTE*ticker*–给出特定股票的价格
add ticker*ticker*–将给定股票添加到列表中
GETLIST–获取列表中以逗号分隔的股票列表

这是一个相当简单的协议，并且不在服务器上保存任何状态。现在，关于缓存，我们可以说我们每小时更新一次价格，所以超过一小时的缓存可能会被丢弃。

而且，这就是它的全部！当然，我们仍然要实现这一点，但是，系统的总体思路相当简单和干净！

## 结论

希望这篇文章能让您对 REST 有一个坚实的理解。

另外，我希望你现在能够叫出那些过多使用“RESTful”这个词的人——我可以告诉你，他们有很多！

请在评论中提出任何问题，或者发推特给我，地址是@dhaivatpoincare:)

## 分享这篇文章