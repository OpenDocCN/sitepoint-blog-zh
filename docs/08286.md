# 离线能力:本地移动应用与移动网络应用

> 原文:[https://www . site point . com/offline-capabilities-native-mobile-apps-vs-mobile-web-apps/](https://www.sitepoint.com/offline-capabilities-native-mobile-apps-vs-mobile-web-apps/)

许多移动应用可以从没有互联网连接的工作中受益。在这里，我们来看看离线能力如何影响开发本地应用和基于移动网络的应用的决策。

自从笔记本电脑首次变得普遍以来，在“离线”或“断开连接”时继续工作的应用程序一直很重要。一个典型的例子是，一名销售人员希望在旅行时输入数据，然后在回到办公室后让数据自动与服务器同步。即使有 Wi-Fi 和蜂窝宽带，在许多情况下(飞机、只有 Wi-Fi 的设备、偏远地区)，人们仍然需要在没有连接的情况下工作。

因此，当员工需要离线移动功能时，我们是否需要在设备上开发一个本地移动应用程序，例如针对 iPhone 的 Objective-C，或者一个基于网络的移动应用程序是否是一个可行的选择？

事实证明，答案正在迅速改变，因为更多的 HTML5 功能，如本地存储和本地数据库，正在被添加到移动浏览器中，以支持离线功能。

### 简而言之:移动网络应用已经准备好下线了

简短的回答是肯定的，现在开发一个完全基于网络的移动应用程序是一个切实可行的选择，它具有许多场景的离线功能。注意我说的是很多场景，不是全部。这个时间点，还是要看需要什么样的线下能力。具体来说，主要因素是需要多少离线数据以及需要什么索引功能。

### 一个离线的网络应用程序怎么可能？

为了理解什么样的离线场景适合移动 web 应用，首先理解使之成为可能的关键技术是有帮助的。

移动 web 应用可以构建为具有三个核心功能，所有这些都是新 HTML5 标准的一部分:

1.  页面的浏览器应用程序缓存
2.  局部存储器
3.  本地数据库

[浏览器应用程序缓存](http://appcachefacts.info/)允许创建一个清单，列出应该缓存并可脱机使用的页面。通常，当您访问 URL 时，服务器会请求返回页面。设置应用程序缓存清单告诉浏览器如何使用已经下载的页面，而不是在不再有网络连接时立即显示错误。

[本地存储](http://en.wikipedia.org/wiki/Web_storage)是一种标准，它使用类似于浏览器 cookies 的键/值系统来保留本地 web 应用程序数据(即使在浏览器关闭时)。然而，它在两个重要方面不同于浏览器 cookies。首先，cookies 会随着每个 HTTP 请求重新发送到服务器，当服务器不需要时，重新发送所有离线数据会浪费大量带宽。第二，cookies 的最大数据量通常在 4k 左右，而本地存储通常为应用程序提供每个域 5 MB 的数据。5 MB 听起来可能不多，但如果小心使用，它可以在离线本地存储方面发挥很大作用。

[本地数据库](http://en.wikipedia.org/wiki/Indexed_Database_API)取消了 5MB 的本地存储限制，并允许对数据进行索引，以便可以快速查询多个属性。这目前只是 HTML5 提出的一个标准；目前只有 Internet Explorer 和 Firefox 实现了它。Safari 和 Chrome 使用的是一种被废弃的旧系统 Web SQL。*这意味着如果你需要这种级别的功能，要在所有主流浏览器上支持这两种标准，还有大量额外的工作和复杂性。*希望情况不会总是如此，主流浏览器将符合最终确定的 HTML5 规范。

### 那么，移动 Web 应用程序是否是离线功能的好解决方案呢？

这里的关键是你的应用程序是否需要更高的存储限制(大于 5MB)和本地数据库自带的索引功能。如果需要本地数据库和主要浏览器支持，它会与 web 应用程序进行比较，因为支持两种截然不同的标准需要额外的工作和复杂性。

然而，如果您可以在没有使用本地数据库的情况下使用本地数据库，并且您的离线存储需求低于 5MB，那么单独使用本地存储和浏览器应用程序缓存将允许一个干净的解决方案，在各种主流浏览器上都能很好地工作。

要决定本地存储是否足够好，请考虑应用程序的以下限制:

1.  您需要保持脱机的总数据量
2.  您需要保持脱机的数据项(记录)的数量
3.  需要搜索的数据属性(字段)的数量

如果您离线时一次需要少于 5MB，本地存储符合要求。如果您有大量的记录，但通常只有一个字段可以搜索，本地存储仍然是一个很好的选择。如果您有许多字段要搜索，但是记录的总数很少，那么本地存储也可以很好地工作。

通过回答这些关于你的应用的问题，你应该对移动离线解决方案的实用性有一个很好的想法。

### 本地和网络之间的决定还有很多

在这里，我们主要关注移动应用的离线能力。但是，请记住，更一般的决策标准仍然适用。

例如，如果你需要允许用户用内置相机拍照并上传到服务器，移动网络应用程序根本无法满足你的需求。除了设备能力问题，还有你希望你的公司投资什么技能以及你倾向于开发什么类型的应用的问题。

最后，请记住“本地与 web”是选择的简化。移动 web 应用程序可以通过向现有站点添加一个 viewport 标签、自适应呈现(CSS 媒体查询)和移动设备专用视图来构建。原生应用可以使用供应商工具包(如 Objective-C)，或抽象平台(如 Titanium)，或通过将 HTML 与原生库捆绑在一起(如 Phonegap)来构建。“本地与网络”的困境不应该被视为两个极端；它实际上是从光谱的一端到另一端的连续选择。

### 离线思考

事实证明，可以从离线功能中受益的移动应用程序种类繁多。如果你正在决定开发一个移动应用程序的平台，考虑一下上面讨论过的所有离线的可能性是一个好主意。你会惊讶有多少移动项目可以从 HTML5 新的离线功能中受益。

你有使用 HTML5 的缓存、本地存储或本地数据库的经验吗？您是否使用任何采用离线存储的移动网络应用程序？

## 分享这篇文章