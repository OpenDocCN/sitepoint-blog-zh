# 用 jQuery 选择 DOM 的初学者指南

> 原文:[https://www . site point . com/初学者-指南-DOM-选择-jquery/](https://www.sitepoint.com/beginners-guide-dom-selection-jquery/)

作为前端开发人员或设计人员，您将不得不在日常项目中使用文档对象模型(也称为 DOM)。随着近年来 JavaScript 技术的改进，在 DOM 中选择元素和应用动态功能已经变得越来越普遍。因此，为了避免冲突和优化性能，我们需要对使用 DOM 元素有很好的了解。

jQuery 是最流行和最常用的 JavaScript 库之一，具有高级 DOM 选择和过滤特性。在本文中，我们将研究如何在 jQuery 的帮助下，通过考虑实际场景来过滤 DOM 元素。

让我们开始吧。

## id、类和数据属性介绍

通常，我们使用 HTML 元素标签、id、类和数据属性来选择 DOM 树中的元素。大多数开发人员都熟悉使用 HTML 标签进行选择。但是开发新手往往会误用 id、类和数据属性，而不知道它们在各种场景中的确切含义和必要性。因此，在进入实际场景之前，让我们先确定这三个选项中的每一个。

**ID**–用作文档中的唯一标识符。所以我们不应该对多个元素使用相同的 ID，即使这是可能的。通常，我们使用 jQuery 使用元素 ID 来选择元素。

**类**–用于使用 CSS 样式化元素。但是，当一个元素不能用 ID 过滤时，通常使用类来过滤和选择元素。

**数据属性**–用于定义一个元素的私有数据。我们可以为单个元素设置多个数据属性，以存储前端功能所需的所有数据。

## 使用 id、类和数据属性的实际场景

在本节中，我们将看看使用这些过滤和选择选项的一些常见用例，以及每个选项如何适应不同的场景。实际上，在不同的场景中使用这些选项有无限的可能性。因此，考虑到本文的范围，我们将着眼于最重要的问题。

### 场景 1–在文档中选择唯一的元素

这是我们用来选择任何元素的最基本和最常见的场景。选择表单值进行验证可以被认为是这种场景的一个很好的例子。我们使用 HTML 元素 ID 来选择元素，如下面的 jQuery 代码所示。

```
$(“#elementID”).val();
```

使用这种方法时，防止具有相同 ID 的元素重复是很重要的。

### 场景 2–使用类选择多个元素

通常，当我们想要过滤文档中的多个元素时，我们使用 class 属性。与 IDs 不同，我们可以用同一个 CSS 类包含多个元素。通常，这些类型的相似元素是通过循环生成的。

假设我们有一个包含用户数据的记录列表，如下面的 HTML 代码所示。我们有一个删除按钮，用户可以通过点击删除记录。

```
<table>
	<tr><td>Mark</td><td><input type=’button’ class=’user_data’ value=’Delete’ /></td></tr>
	<tr><td>John</td><td><input type=’button’  class=’user_data’  value=’Delete’ /></td></tr>
	<tr><td>Mike</td><td><input type=’button’ class=’user_data’  value=’Delete’  /></td></tr>
</table>
```

现在我们有了相似元素的多个实例，因此我们不能使用 ID 来过滤确切的记录。让我们看看如何使用给定的 CSS 类过滤行。

```
var rows = $(“.user_data”);
```

在前面的代码中，`rows`变量将包含所有三个带有类`user_data`的行。现在让我们看看如何使用类选择器移除按钮点击时的行。

```
$(“.user_data”).click(function(){
	$(this).parent().parent().remove();
});
```

在这种技术中，我们遍历所有匹配的元素，并使用指向单击按钮的`$(this)`对象对当前项目执行功能。这是最广泛使用的处理多个元素的技术。

现在让我们来看看初学者在这种情况下的一些常见错误。

*   #### 使用 id 而不是类

    在很多情况下，开发人员会在循环中使用相同的 ID 来生成相似的 HTML 代码，而不是类。一旦使用了相同的 ID，它将只影响第一个元素。其余元素将不会按预期工作。因此，请确保在循环中创建动态 id，并使用类名进行元素选择。

*   #### 使用类名代替$(this)对象

    许多初级开发人员犯的另一个错误是缺乏上下文知识和当前对象的使用。当遍历多个元素时，我们可以使用 jQuery `$(this)`来引用当前元素。许多开发人员在循环中使用类名，因此得不到想要的结果。所以永远不要在循环中使用类名，如下面的代码所示。

```
$(“.user_data”).click(function(){
		$(“.user_data”).parent().parent().remove();
});
```

这是一种广泛使用的元素选择技术，因此了解如何有效地使用这种技术非常重要。CSS 类用于样式目的。但是这里我们使用它们来选择元素。使用 CSS 类进行选择不是最好的方法，有时会导致布局冲突。例如，当与团队合作时，开发人员可能会使用 CSS 类来为 jQuery 提供动态功能。设计者可能会注意到这些类并不用于设计风格，因此有可能在不知道重要性的情况下删除它们。

因此，对 CSS 类使用一些前缀是一个好习惯，它们只用于各种功能，而不是样式目的。

### 场景 3–使用多个类选择元素

有些应用程序和网站严重依赖 JavaScript 并提供高度动态的客户端功能。在这样的场景中，我们可能会使用大量的类和 id 来过滤、选择和应用特性。

假设我们有一个用户记录列表，需要在客户端根据角色进行过滤。我们可以将角色定义为 CSS 类来简化过滤过程。考虑下面这个场景的代码片段。

```
<ul>
	<li class=’role-developer role-designer’ >Mark</li>
<li class=’role-developer ’ >Simon</li>
<li class=’role-developer role-manager’ >Kevin</li>
</ul>
```

让我们假设我们希望获得同时具有开发人员和设计人员角色的用户。在这种情况下，我们可以使用多个 CSS 类，如下面的代码所示。

```
var selected_users = $('.role-developer.role-designer');
```

我们可以使用任意数量的类，一个接一个地匹配同一个元素上的多个类。确保不要在类之间使用空格，因为它会改变选择的含义和结果。考虑同样的带有空格的代码行。

```
var selected_users = $('.role-developer .role-designer');
```

现在，代码将寻找拥有名为 developer 的父元素的设计器。因此，请习惯这两种实现之间的差异，并明智地使用它。类似地，在使用这种技术时，我们可以混合使用 id 和类。

### 场景 4–使用数据属性选择元素

HTML5 引入了自定义数据属性，我们可以在其中定义与 HTML 元素相关的数据。这些数据属性有一套特定的约定，被认为是私有数据。所以现在我们可以使用数据属性存储与任何元素相关的数据，而不是向服务器发出几个 AJAX 请求。让我们看看如何实现场景 2，用自定义数据属性代替 CSS 类。

```
$( "input[data-type=’user_data’]" ).click(function(){
    $(this).parent().parent().remove();
});
```

正如你所看到的，我们可以用数据属性而不是 CSS 类达到同样的效果。

jQuery 提供了高级属性选择器来支持定制数据属性。因此，让我们考虑一些关于自定义属性的高级选择器选项。

假设我们将用户电子邮件存储为自定义属性，并希望根据电子邮件中的特定条件来选择用户。考虑下面使用数据属性的代码片段。

```
<ul>
	<li data-email=’mark@gmail.com’   data-type=’userdata’ >Mark</li>
	<li data-email=’kevin@yahoo.com’  data-type=’userdata’ >Kevin</li>
	<li data-email=’peter@gmail.uk’ data-type=’userdata’ >Peter</li>
</ul>
```

选择电子邮件中包含“gmail”的元素

```
$( "input[data-email *=’gmail’]" );
```

选择带有“uk”电子邮件地址的元素

```
$( "input[data-email $=’.uk’]" );
```

选择包含不带“@”符号的无效电子邮件的元素

```
$( "input[data-email !=’@’]" );
```

正如您所看到的，数据属性在处理与 HTML 元素相关的数据时非常强大，jQuery 通过其内置函数提供了全面的支持。您可以在[http://API . jquery . com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)找到完整的属性选择器参考。

### 场景 5–使用多个数据属性选择元素

这类似于我们在场景 3 中讨论的内容，但有一些扩展的特性。在高级场景中，使用 CSS 类来处理多个数据值可能会很复杂。因此，让我们看看如何使用多个数据属性进行选择。

```
$( "input[data-type=’userdata’][data-email !=’@’]" );
```

在这里，我们可以检查多个数据属性的存在，以及通过值的部分搜索进行选择。现在你应该能够理解 CSS 类和元素选择的数据属性之间的区别了。数据属性提供了一种处理元素数据的有组织的方式。

这里讨论的技术可以与其他 jQuery 过滤器结合使用，以适应任何类型的高级情况，明智地使用它们非常重要。

## 包裹

本文旨在让初学者理解元素 ID、类和定制数据属性的基础知识。在 jQuery 内置函数的帮助下，我们用实际场景讨论了每一个问题。在这样做的同时，我们也发现了一些开发新手的错误。让我们回顾一下本文中讨论的要点，为 DOM 选择建立一个有用的指南。

*   尽可能使用 ID 来选择元素，因为它在文档中提供了唯一的标识符。
*   在多元素场景中使用类或数据属性，而不是依赖元素 ID。
*   确保将您的样式类与用于选择和功能目的的类区分开来。
*   在复杂的场景中使用数据属性，因为类并不提供关于元素的数据。

希望您通过这篇文章对元素选择有了一个好的开始。如果你有更好的指南和元素选择技巧，请在评论区分享。

## 分享这篇文章