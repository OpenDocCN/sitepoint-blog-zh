# 与 Rachel Andrew 一起为分页媒体翻译 CSS

> 原文：<https://www.sitepoint.com/translating-css-paged-media-rachel-andrew/>

非常感谢杰夫·史密斯审阅并编辑了这篇文章。

## 页面媒体的 CSS 概述

你还记得 CSS 还不存在的时候吗？可能不是，但是让我告诉你…当 CSS 出现时，它引入了一种全新的网页布局思维方式。事实上，从那以后我们就没有停止过对布局的尝试！总有一种新兴的布局趋势推动着新的想法和 CSS 的边界。

上周我们采访了瑞秋·安德鲁，她是 CSS 工作组的特邀专家，也是我的座位边缘的创始人。Rachel 对 CSS 充满热情，这种热情显然让她脱颖而出，成为一名工艺大师，尤其是在处理页面媒体时。她甚至和我们一起在 SitePoint 制作了我们自己的书籍布局——全部使用 CSS！页面媒体的 CSS 是一个小众的话题，这也是为什么当 Rachel 决定加入我们的问答环节来回答你的问题时，我们被震惊了。**我们开始挖吧！**

## 你对瑞秋的问题

### 问:我很想知道在处理打印页面和网页中的页面布局时，主要的区别是什么？有哪些不适用于网页的打印注意事项？

在某些方面，在分页媒体中使用固定大小的页面要容易得多，因为你输出的是一种已知的格式。

主要的区别是分页媒体有一个页面模型，它有空白框，你可以把生成的内容插入其中。Prince docs 中提供的[例子是一个很好的例子，因为从网络转向印刷的大部分学习曲线是理解这种模式。](http://www.princexml.com/doc/paged/#page-header-footer)

### 问:从印刷媒体的 CSS 中有哪些经验或技术可以很容易地转移到网页的设计中？

**瑞秋:**[CSS 工作组](https://www.w3.org/)正在重写 [CSS 生成内容模块](https://www.w3.org/blog/CSS/2016/06/24/css-content-fpwd/)。在这里，您可以使用`content`属性将 CSS 中的内容插入到文档中。

在印刷中，我们严重依赖于**生成的内容**——这是你将内容插入页眉和页脚的方式，比如创建页码、动态添加章节标题等等。CSS WG 博客上的说明说:

> "对于那些想尝试实现的人来说，大多数 CSS->PDF 呈现器已经支持了一个重要的子集."

也许我们将开始更多地访问 web 环境中可用的分页媒体规范的生成内容——当然，前提是浏览器支持它。

### 问:这些年来，已经有过几次实现打印 CSS 的尝试，比如 [Hakon 提出的用于打印的分页媒体](https://www.w3.org/TR/2011/WD-css3-gcpm-20111129/)，它被更高优先级的工作所取代。你能解释一下当前 CSS 对页面媒体的印刷改进和/或扩展的方法吗？

我认为有很多有趣的想法，但大部分问题是，要真正使用这些东西，你需要一个特定的 [UA](https://en.wikipedia.org/wiki/User_agent) ，这让人们望而却步。

我最近在研究 Hakon 的 CSS 图形规范(T1)中的想法，看看我们现在拥有的或者将来可能拥有的(T2)东西有什么可能(T3)。

分页媒体规范本身定义了我们正在工作的画布。另一个有用的功能在当前为分页媒体规范生成的内容中。未来的走向可能取决于需求。我的感觉是，如果作者知道在这些专用用户代理中有什么可能，将会有更多的需求*。他们也渴望在浏览器中看到它！*

### 问:关于如何设置要打印的页面，你有一些基本的建议吗？

**Rachel:** 要完全控制打印输出，您需要通过完全支持这些规范的 UA 进行打印。直接从浏览器打印时，您的控制非常有限。

好消息是，一旦你弄清楚了你要处理的不同的页面模型，使用一个专门的打印用户代理并不比为 web 编写 CSS 更难。虽然我大部分时间都在与书籍打交道，但也有可能通过 API 使用 Prince UA(直接，因为你可以在你的服务器上安装 Prince，或者通过第三方服务[https://docraptor.com/](https://docraptor.com/))。例如，如果您必须格式化发票 pdf 或报告，您可以从实时数据中进行格式化，就像处理网页一样。

### 问:在为 SitePoint 写了这么多书之后，你觉得“印刷用 CSS”或者它的工具在哪里还不够？

每次我做特定的事情时，我都会有新的想法。例如，在 SitePoint 书籍中，我们有很多代码，我想在代码中断时插入一个代码换行字符。我最终[写了一些粗糙的 JavaScript](http://www.princexml.com/forum/topic/3273/insert-a-code-wrapping-character?p=1#16663) 来处理这个问题。令人欣慰的是，Prince 将运行 JavaScript，所以当你达到 UA 的极限时，你可以使用脚本对你的文档做一些事情。

### 问:听起来像 Prince 这样的用户代理正在帮助保持 CSS 用于印刷的想法。如果印花风格逐渐消失，这似乎是一件非常遗憾的事情。@ rachelandrew——你有什么想法可以让人们重新对这一领域产生兴趣吗？

如果我们希望浏览器更好地支持这种东西，那么作为一个社区，我们真的应该请求这种支持。这适用于我们希望得到支持的任何事情。制造点噪音吧！

你可以用几种方式制造噪音。你可以直接向浏览器寻求支持，也可以写点东西。展示 web 社区对支持的兴趣和使用案例，这样当这些主题出现并且有人问“web 开发人员关心这个吗？”答案显然是肯定的。如果有人写了，通过快速的网络搜索就可以很容易地展示出来。

### 问:你知道更便宜的可行替代方案吗？

所有的专业工具都有价格标签。你可以通过 [DocRaptor](https://docraptor.com) 的 API 使用 Prince 技术，这可能会根据你的使用情况更好。

至于输出到其他格式，你真的需要其他工具。事实证明，将 HTML & CSS 转换成 EPUB 或 Mobi (Kindle)格式要容易得多，因为这些格式本质上都是 HTML 和 CSS。

为了到达 EPUB，我使用 [Pandoc](http://pandoc.org/) ，然后在 [Sigil](https://sigil-ebook.com/) 中整理。然后我用[的 Kindlegen 工具](https://www.amazon.com/gp/feature.html?docId=1000765211)把一个 EPUB 变成一个 Mobi。

它基本上是一个命令行堆栈，所以你可以自动完成所有这些工作，只需要从你的文档中吐出一本书的一堆版本。如果只是简单的事情，那可能就是你需要做的全部，否则你可以把它们作为调整的起点。

* * *

## 想要更多吗？

前往我们的 Q & A 查看整个对话！瑞秋可能离开了谈话，但这并不意味着聊天结束了。请继续与我们充满活力的社区成员进行讨论！

## 分享这篇文章