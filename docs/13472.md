# 学习 Ruby on Rails:终极初学者教程

> 原文：<https://www.sitepoint.com/learn-ruby-on-rails-6/>

## 第 4 章，Rails 揭秘

你可能已经从第 1 章《Ruby on Rails 简介》中了解到，在构成 Rails 框架的代码库中已经投入了相当多的思想。随着时间的推移，许多内部结构已经被重写，这提高了它们的速度和效率，并允许实现额外的功能，但原始的架构在很大程度上保持不变。本章将阐明 Rails 的内部工作原理。

## 三种环境

Rails 鼓励在应用程序生命周期的每个阶段——开发、测试和生产——使用不同的环境。如果您已经开发 Web 应用程序有一段时间了，这可能就是您的操作方式；Rails 只是形式化了这些环境。

**开发**

在开发环境中，对应用程序源代码的更改可以立即看到；我们需要做的就是在网络浏览器中重新加载相应的页面。在这种环境下，速度不是关键因素；相反，重点是为开发人员提供尽可能多的关于显示每个页面所涉及的组件的信息。当开发环境中出现错误时，开发人员一眼就能看出哪一行代码对错误负责，以及那一行代码是如何被调用的。这种功能是由堆栈跟踪(导致错误的所有方法调用的综合列表)提供的，当出现意外错误时，会显示堆栈跟踪。

**测试**

在测试中，我们通常在每次重复测试时用虚拟数据的基线刷新数据库——这确保了测试的结果是一致的，并且行为是可重复的。Rails 中的单元和功能测试过程是完全自动化的。

当我们测试一个 Rails 应用程序时，我们不会使用传统的 web 浏览器来查看它。相反，测试是从命令行调用的，并且可以作为后台进程运行。测试环境提供了一个可以运行这些流程的专用环境。

**生产**

当您的应用程序最终上线时，它应该已经过很好的测试，所以所有(或者至少大部分)的错误都已经被消除了。因此，对代码库的更新应该是不频繁的，这意味着生产环境可以被优化以关注性能。在这个阶段，为调试目的编写大量日志之类的任务应该是不必要的。此外，如果确实发生了错误，您不希望用一个神秘的堆栈跟踪吓跑您的访问者——这最好在开发环境中进行。

由于这三种环境的需求各不相同，Rails 将每种环境的数据存储在完全独立的数据库中。所以在任何时候，你都可能:

*   真实用户在生产环境中与之交互的实时数据
*   您用来在开发环境中调试错误或开发新功能的实时数据的部分副本
*   一组不断被重新加载到测试环境中的测试数据

让我们看看如何为每种环境配置数据库。

**Go to page:** [1](https://sitepoint.com/learn-ruby-on-rails-1/) | [2](https://sitepoint.com/learn-ruby-on-rails-2/) | [3](https://sitepoint.com/learn-ruby-on-rails-3/) | [4](https://sitepoint.com/learn-ruby-on-rails-4/) | [5](https://sitepoint.com/learn-ruby-on-rails-5/) | [6](https://sitepoint.com/learn-ruby-on-rails-6/) | [7](https://sitepoint.com/learn-ruby-on-rails-7/) | [8](https://sitepoint.com/learn-ruby-on-rails-8/) | [9](https://sitepoint.com/learn-ruby-on-rails-9/) | [10](https://sitepoint.com/learn-ruby-on-rails-10/)

## 分享这篇文章