# JavaScript 可访问性 101

> 原文:[https://www.sitepoint.com/javascript-accessibility-101/](https://www.sitepoint.com/javascript-accessibility-101/)

曾几何时， <q>JavaScript 可访问性</q>仅仅意味着在 JavaScript 不可用时确保适度降级。但是，由于 Ajax 和富互联网应用程序的激增，JavaScript 不仅仅用于非必要的可用性增强。JavaScript 现在是基于 web 的应用程序的核心，所以当我们今天谈论 JavaScript 可访问性时，我们指的是 JavaScript 本身是可访问的。
T3】

## 未来的回声

在过去几年中，web 可访问性最重要的发展之一是 **Web Accessibility Initiative 的可访问富互联网应用** (WAI ARIA)，它定义了使交互式内容对辅助技术(如屏幕阅读器)可访问的语义。因为 Web 2.0 的爆发几乎没有考虑到可访问性，所以 WAI ARIA 应运而生。JavaScript 现在用于关键任务代码中，因此辅助技术必须能够解释动态内容。

## 回到地球

不幸的是，ARIA 还没有得到很好的支持。只有最新版本的(非常昂贵的)屏幕阅读器有任何支持，没有一个支持一切。此外，受支持的位不一定实现正确。

当 ARIA 得到广泛支持时，它将不会是一颗神奇的子弹。首先，JavaScript 可访问性比 ARIA 定义的要多。ARIA 只能建立在理解用户需求和基于标准的开发的坚实基础上。

JSPro 将会用几篇文章来探索可访问的 JavaScript。我们将从一些简单的事情开始，让你的 JavaScript 更容易理解。稍后，我们将更深入地探究咏叹调的世界。但在此之前，我们必须先了解一些理论基础。

## 内在同一性

JavaScript 可访问性可以分为三大类用户需求。本节更详细地描述了这些组。

### 辅助技术的用户

第一组包括使用屏幕阅读器、盲文阅读器或类似辅助技术的人。盲人是这个群体中的主要成员，但也包括视力低下和认知障碍的人，他们使用屏幕阅读器来帮助阅读和理解。

辅助技术将所有信息表示为结构化文本。因此，所有 JavaScript 功能都必须采用可以被解释为文本的形式。例如，下面显示的脚本式进度表提供了可视信息，因此需要用提供相同信息的文本进行补充。

![A progress-meter at 76%, which is indicated visually and also with a percentage figure.](../Images/50d88dd358071d9a6f18a5e463c5c67b.png)

76%的进度条，直观显示，并带有百分比数字。

如果文本没有辅助技术可以通过程序理解的结构和关系，那么只有文本是不够的。文本的结构通常非常简单，如列表和表格。这些都是辅助技术很容易理解的结构。我们需要做的就是正确使用它们。

通过使用无序列表和[结构化标签](http://www.maxdesign.com.au/2006/01/17/about-structural-labels/)构建下拉菜单之类的东西，辅助技术可以从这些元素的语义和层次中获得它们的含义。或者，我们可以构建日历小部件，其中每个月的视图是一个表格。然后我们可以用一个按钮来触发它，并用一个标签来描述它。实体元素语义应该是所有交互内容的基础。

### 键盘用户

第二组是只使用键盘的人。这组用户包括使用屏幕阅读器的盲人，但也包括因运动障碍而无法使用鼠标的视力正常的人，以及发现跟踪焦点有助于他们集中注意力的认知障碍者。为了适应这个群体，所有的 JavaScript 功能都必须能够被键盘访问。例如，交互应该被限制在最直观的按键上，比如`Tab`、`Arrow Keys`、`Enter`和`Escape`。

键盘支持通常是免费的，如果你遵循最好的事件是最独立于设备的前提。因此，表单验证应该绑定到表单的无模式`submit`事件，而主激活事件应该绑定到通用的`click`事件，而不是像`mousedown`、`touchstart`或`keydown`这样的特定模式事件。

对于更复杂的交互，通常需要事件的组合。[网站内容可访问性指南](https://www.w3.org/TR/WCAG/)谈到了<q>事件配对</q>——将鼠标事件与其最近的键盘事件配对。一个配对的例子是`mousedown`和`keydown`事件。然而，这是看待它的错误方式，因为它关注的是活动的机制而不是目的。键盘做事方式完全不一样应该没关系，只要达到同样的目的就行。

对于像拖放这样的事情，没有相当于`mousemove`事件的键盘，但是我们仍然可以通过键盘访问它。我们所说的拖放实际上是两种不同的交互。第一个是元素可以上下移动来排序，这可以用简单的`Up-Arrow`和`Down-Arrow`键来实现。第二个是抓取和移动动作，比如在文件夹之间拖动文件，这可以通过类似于`Space`选择一个元素，然后`Tab`选择放置目标，然后`Enter`放置它来完成。

当使用非显而易见的按键时，应该有相应的文本来解释它们。事实上，一些键盘交互不可避免地会比鼠标交互更加复杂。但那不一定重要，只要它做的是同样的工作。可访问性是等价的，而不是平等的。

键盘可访问性的另一个重要考虑是维护一个逻辑内容顺序(T2)。例如，当使用丰富的工具提示时，它们必须直接插入到触发它们的元素之后，这样你就可以直接`Tab`到它们，以便屏幕阅读器接下来阅读它们。

### 对闪烁内容或时间限制敏感的用户

最后一个群体是对闪烁或闪烁的内容敏感的人，或者不能以预期的方式对实时事件做出反应的人。就闪烁内容而言，这影响了患有光敏性癫痫症的人，对于这些人来说，这种效应可能会引发癫痫发作，还影响了有认知障碍的人，他们发现当事物在他们的周边视觉中移动时，他们更难集中注意力。WCAG 非常明确地定义了闪烁内容的限制，概括为[三次闪烁或低于阈值](https://www.w3.org/TR/UNDERSTANDING-WCAG20/seizure-does-not-violate.html)。

时间限制也是一个问题，因为听到大声朗读的内容比阅读它需要更长的时间。使用键盘导航也比使用鼠标花费更多的时间。因此，JavaScript 中基于时间的活动应该是用户可控的。对基于时间的活动的限制不是很具体，因为有几个不同的用例需要考虑。

时间限制的一般原则是，每当一项活动必须在一定时间内完成时，当时间限制即将到期时，用户会得到警告，并提供延长时间的方法。例如，网上银行界面可能对会话不活动有严格的时间限制，但用户可以通过一个简单的`confirm`对话框进行控制(就像你在<abbr title="Automatic Teller Machines">ATM</abbr>上看到的，当他们询问你是否需要更多时间时)。

当内容被动画化时，动画不应该超过五秒，除非用户有办法控制它。动画可能是纯粹的装饰效果，因此时间限制对有认知障碍的人很有帮助，对他们来说，持续的外围动画会使他们更难专注于主要内容。

或者，动画可能是滚动或移动内容，这里的限制是允许用户在没有上下文意外变化的情况下完成任务。例如，一个自动滚动的新闻滚动条应该有一个暂停按钮，这样用户就可以以自己的速度阅读每一条新闻，并且确信在他们阅读时它不会改变！当大块内容或整个页面被自动刷新时，类似的逻辑也适用。这在包含股票信息或体育比赛结果的网站上很常见。您根本不应该这样做，除非您对刷新频率提供明确的用户控制(默认为从不)。

但是时间限制通常是他们所从事的活动不可分割的一部分。许多游戏本质上是基于时间的，取消时间限制会否定游戏的目的。在这种情况下，可以公平地说，如果不改变内容的含义，内容就无法被访问。WCAG 允许这种可能性，只要内容被清楚地描述成这样。

## 结论

我们已经看到了 JavaScript 可访问性如何归结为以下三个核心原则。

*   所有 JavaScript 功能都必须采用可以被解释为文本的形式。
*   所有 JavaScript 功能都必须可以通过键盘访问。
*   JavaScript 中基于时间的活动应该是用户可控的，除非这会改变它的含义。

下一次，我们将从这个理论基础上继续前进，看看你现在可以做的一些简单而实用的事情，使 JavaScript 功能更容易使用。这不是勉强支持的、未经证实的和前沿发展的领域，而是我们已经做了多年的东西。

## 分享这篇文章