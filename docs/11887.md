# 使用 PHP 和 MySQL 构建自己的数据库驱动网站，第 2 部分:MySQL 简介

> 原文:[https://www.sitepoint.com/getting-started-mysql/](https://www.sitepoint.com/getting-started-mysql/)

在[第一章:安装](https://www.sitepoint.com/article/php-amp-mysql-1-installation/)中，我们安装并设置了两个软件程序:带有 PHP 的 Apache web 服务器和 MySQL 数据库服务器。在本章中，我们将学习如何使用结构化查询语言(SQL)处理 MySQL 数据库。如果你想离线阅读本教程，[你可以下载 PDF 格式的章节](https://www.sitepoint.com/books/phpmysql4/samplechapters.php)。

正如我在那一章中解释的那样，PHP 是一种服务器端脚本语言，它允许您在 web 页面中插入指令，web 服务器软件(大多数情况下是 Apache)会在将这些页面发送给请求它们的浏览器之前执行这些指令。在一个简单的例子中，我展示了如何在每次请求时将当前日期插入到网页中。

现在，这一切都很好，但当一个数据库被添加到组合中时，事情真的变得有趣了。在这一章中，我们将学习什么是数据库，以及如何使用结构化查询语言处理你自己的 MySQL 数据库。

##### 数据库介绍

数据库服务器(在我们的例子中是 MySQL)是一个程序，它可以以一种有组织的格式存储大量信息，这种格式很容易通过 PHP 等编程语言访问。例如，您可以告诉 PHP 在数据库中查找您希望出现在网站上的笑话列表。

在本例中，笑话将全部存储在数据库中。这种方法的优点有两个方面:首先，您不必为每个笑话都编写一个 HTML 页面，您可以编写一个 PHP 脚本，从数据库中获取任何笑话，并通过动态生成一个 HTML 页面来显示它。第二，在你的网站上添加一个笑话只需要简单地将这个笑话插入到数据库中。PHP 代码会处理剩下的事情，当它从数据库中获取列表时，会自动显示这个新笑话和其他笑话。

让我们运行这个例子，看看数据是如何存储在数据库中的。数据库由一个或多个表组成，每个表包含一个项目或事物的列表。对于我们的笑话数据库，我们可能会从一个名为 joke 的表开始，该表包含一个笑话列表。数据库中的每个表都有一个或多个列或字段。每一列都包含表中每一项的特定信息。在我们的例子中，笑话表可能有一列用于笑话的文本，另一列用于笑话被添加到数据库的日期。以这种方式存储的每个笑话可以说是表中的一行或一个条目。这些行和列构成了一个表格，如下图所示。

![A typical database table containing a list of jokes](../Images/081badd0cca65c35719c8048cdf0dc0e.png)

注意，除了笑话文本列(`joketext`)和笑话日期列(`jokedate`)之外，我还包含了一个名为`id`的列。作为一个好的设计，数据库表应该总是提供一种方法，通过这种方法我们可以唯一地标识它的每一行。因为一个笑话可能在同一天被输入多次，所以不能依靠 joketext 和 jokedate 列来区分所有的笑话。因此，id 列的功能是为每个笑话分配一个唯一的编号，这样我们就可以轻松地引用它们，并跟踪哪个笑话是哪个笑话。我们将在第 5 章“关系数据库设计”中更仔细地研究类似这样的数据库设计问题。

所以，回顾一下，上面的表是一个三列的表，有两行或两个条目。表格中的每一行包含三个字段，表格中的每一列对应一个字段:笑话的 ID、笑话的文本和笑话的日期。掌握了这些基本术语，您就可以开始使用 MySQL 了。

##### 登录 MySQL

正如 web 服务器被设计为响应来自客户机(web 浏览器)的请求一样，MySQL 数据库服务器响应来自客户机程序的请求。在本书的后面，我们将以 PHP 脚本的形式编写我们自己的 MySQL 客户端程序，但是现在我们可以使用 MySQL 服务器附带的一些客户端程序。

`mysqladmin`是一个 MySQL 客户端程序的例子。如果您按照第 1 章“安装”中的说明，在建立了自己的 MySQL 服务器之后，您使用`mysqladmin`客户端程序连接到服务器，为 root 用户建立一个密码，并查看关于正在运行的服务器的基本统计信息。

mysql 服务器附带的另一个客户端程序叫做 MySQL。这个程序提供了使用 MySQL 服务器的最基本的接口，通过建立到服务器的连接，然后一次输入一个命令。

mysql 程序可以在与 mysqladmin 相同的位置找到，因此如果您按照[第 1 章:安装](https://www.sitepoint.com/article/php-amp-mysql-1-installation/)中的说明将该位置添加到您的系统路径中，您应该能够打开一个终端窗口(如果您使用的是 Windows 系统，则可以打开命令提示符)并键入以下命令来运行 mysql 客户端程序:

`mysql --version`

如果一切都设置正确，这个命令应该输出一行关于您已经安装的 mysql 客户端程序版本的描述。这是它在我的 Mac 上的样子:

`mysql  Ver 14.14 Distrib 5.1.31, for apple-darwin9.5.0 (i386) using readline 5.1`

相反，如果你收到一条错误信息，抱怨你的计算机不能识别 mysql 命令，你可能应该重新查看[第 1 章:安装](https://www.sitepoint.com/article/php-amp-mysql-1-installation/)中提供的安装说明。一旦您能够运行那一章中的`mysqladmin`命令，那么`mysql`命令应该也能工作。如果你仍然停滞不前，请访问[网站论坛](https://www.sitepoint.com/forums/)，寻求帮助。

假设 mysql 程序正在为您运行，您现在可以使用它来连接到您的 MySQL 服务器。首先，确保服务器正在运行，然后键入以下命令并按 Enter:

`mysql -u root -p`

`-u root`和`-p`参数在该程序中的功能与它们在第 1 章:安装中对`mysqladmin`的功能相同。`-u root`告诉程序你希望使用根用户帐户连接到服务器，`-p`告诉它你要提供一个密码。

接下来您应该会看到一个输入密码:提示符。输入您在第 1 章中为自己选择的 root 密码，然后按回车键。

如果您输入的所有内容都正确，MySQL 客户端程序将会自我介绍并在 MySQL 命令提示符下转储您:

`Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 7
Server version: 5.1.31 MySQL Community Server (GPL)`

键入“help”或“h”表示帮助。键入“c”清除缓冲区。

mysql >

让我们使用几个简单的命令来查看一下您的 MySQL 服务器。

MySQL 服务器实际上可以跟踪不止一个数据库。例如，这允许一个 web 主机建立一个 MySQL 服务器供它的几个用户使用。因此，连接到服务器后的第一步应该是选择要使用的数据库。首先，让我们检索当前服务器上的数据库列表。

***连接远程 MySQL 服务器***

本章中的说明假设您正在自己的计算机上运行 MySQL 服务器。当然，当要发布你的第一个 PHP 和 MySQL 支持的网站时，你需要知道如何使用你的网站主机或你公司的 it 部门提供的 MySQL 服务器。

从技术上讲，我们在本章中使用的 mysql 程序也可以连接到远程 MySQL 服务器。你只需要在运行时添加一个额外的参数:

`mysql -h hostname -u username -p`

*参数`-h hostname`(其中`hostname`是您想要连接的 MySQL 服务器的主机名)告诉程序连接到一个远程 MySQL 服务器，而不是运行在同一台计算机上的服务器。如果这样做，您可能还需要指定一个非 root 的用户名，因为负责 MySQL 服务器的管理员出于安全原因可能希望对 root 密码保密。*

实际上，大多数远程 MySQL 服务器会阻止来自运行在像你这样不受信任的计算机上的客户端程序的连接。对于生产中使用的 MySQL 服务器，禁止这种类型的连接是一种常见的安全措施。

*要使用远程 mysql 服务器，您可以连接到一台可信的计算机，并从那里运行 MySQL 程序，但更常见的方法是使用一个名为`phpMyAdmin`的程序来管理您的远程数据库。`phpMyAdmin`是一个复杂的 PHP 脚本，允许您在浏览器中使用基于 web 的界面处理 MySQL 数据库。`phpMyAdmin`连接到远程 MySQL 服务器的方式与我们将在本书后面编写的 PHP 脚本相同。*

*我会在第 10 章《MySQL 管理》中向你展示如何安装和使用`phpMyAdmin`。现在，让我们集中学习如何使用安装在计算机上的 MySQL 服务器。*

键入以下命令(包括分号！)并按回车键(就像在[第一章:安装](https://www.sitepoint.com/article/php-amp-mysql-1-installation/)中一样，mysql >提示符应该已经出现在你的屏幕上了；只需键入它后面的命令):

`mysql> SHOW DATABASES;`

MySQL 将显示服务器上的数据库列表。如果您正在使用一台全新的服务器，列表应该如下所示:

`+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)`

MySQL 服务器使用名为 information_schema 的第一个数据库来跟踪服务器上的所有其他数据库。除非你正在做一些非常高级的东西，否则你可能会离开这个数据库。

第二个数据库 mysql 也很特别。MySQL 用它来跟踪用户、他们的密码以及他们被允许做什么。我们暂时避开这一点，不过我们会在第 10 章“MySQL 管理”中讨论 MySQL 管理时再来讨论。

第三个数据库名为 test，是一个示例数据库。您实际上可以删除这个数据库，因为我稍后将向您展示如何创建您自己的数据库。

***WampServer 上没有测试***

在撰写本文时，WampServer 的初始 MySQL 数据库中没有测试数据库。不过没必要惊慌；WampServer 的开发者只是觉得它和我一样没用，我猜！

在 MySQL 中删除内容被称为“丢弃”,这样做的命令被恰当地命名为:

`mysql> DROP DATABASE test;`

如果您键入这个命令并按 Enter，MySQL 将顺从地删除数据库，在确认中显示“Query OK”。请注意，没有像“您确定吗？”这样的确认提示。您必须非常小心地在 mysql 客户端程序中正确键入命令，因为正如这个示例所示，您可以用一个命令删除整个数据库以及其中包含的所有信息！

在我们继续之前，让我们学习一些关于 MySQL 命令提示符的基础知识。您可能已经注意到，MySQL 中的所有命令都以分号(；).如果您忘记了分号，MySQL 会认为您仍在输入命令，并让您继续输入另一行:

`mysql> SHOW
-> DATABASES;`

MySQL 通过将提示符从`mysql>`改为`->`来显示它正在等待您键入更多的命令。这个便利的特性允许您将长命令分散到几行中。

***SQL 查询中区分大小写***

大多数 MySQL 命令不区分大小写，这意味着你可以键入 show databases、ShOw DaTaBaSeS 或 SHOW DATABASES，它会知道你的意思。然而，当 MySQL 服务器运行在具有区分大小写的文件系统的操作系统上时(如 Linux 或 Mac OS X，取决于您的系统配置)，数据库名和表名是区分大小写的。

另外，当表格、列和其他名称在同一个命令中被多次使用时，它们的拼写必须完全相同。

为了保持一致，本书将遵循数据库命令全部大写，数据库实体(数据库、表格、列等)全部小写的公认惯例。

如果您正在执行一个命令，并意识到您之前犯了一个错误，您可能想要完全取消当前命令并从头开始。为此，键入`c`并按回车键:

`mysql> DROP DATABASEc
mysql>`

MySQL 将忽略您已经开始输入的命令，并返回到`mysql>`提示符下等待下一个命令。

最后，如果你想退出 MySQL 客户端程序，只需输入 quit 或 exit(两者都可以)。这是唯一一个不需要分号的命令，但是如果您愿意，也可以使用分号。

`mysql> quit
Bye`

现在我们已经成功连接到我们的 MySQL 服务器，是时候创建我们的数据了。

##### 结构化查询语言

我们将在本书的其余部分用来指导 MySQL 的命令集是结构化查询语言(SQL)标准的一部分(读作“sequel”或“ess-cue-ell”，随你选)。SQL 中的命令也称为查询；我将交替使用这两个术语。

SQL 是与大多数数据库交互的标准语言，因此，即使将来您从 MySQL 迁移到像 Microsoft SQL Server 这样的数据库，您也会发现大多数命令都是相同的。理解 SQL 和 MySQL 之间的区别很重要。MySQL 是您正在使用的数据库服务器软件。SQL 是您用来与数据库交互的语言。

***深入学习 SQL***

在这本书里，我会教你每个 PHP 开发人员都需要知道的 SQL 的基本知识。

如果你决定以构建数据库驱动的网站为职业，你会发现了解 SQL 的一些更高级的细节是有好处的，尤其是在让你的网站尽可能快速流畅地运行的时候。

如果你想更深入地研究 SQL，我强烈推荐鲁迪·利默贝克的《简单 SQL 》一书。

##### 创建数据库

当在网上部署你的第一个数据库驱动的网站时，你可能会发现你的主机或 IT 部门已经为你创建了一个 MySQL 数据库。然而，由于您负责自己的 MySQL 服务器，您需要创建自己的数据库来开发您的站点。

创建数据库和删除数据库一样简单:

`mysql> CREATE DATABASE ijdb;`

我选择将数据库命名为`ijdb`，互联网笑话数据库(向[互联网电影数据库](http://www.imdb.com/)致敬)，因为这符合我在本章开始给出的例子——一个显示笑话数据库的网站。不过，您可以随意给数据库取任何您喜欢的名称。

现在你有了一个数据库，你需要告诉 MySQL 你想使用它。同样，这个命令很容易记住:

`mysql> USE ijdb;`

您现在可以使用数据库了。由于在添加一些表之前，数据库是空的，所以我们的首要任务是创建一个表来保存您的笑话(现在可能是想一些笑话的好时机！).

##### 创建表格

到目前为止，我们遇到的 SQL 命令相当简单，但是由于表非常灵活，创建它们需要更复杂的命令。该命令的基本形式如下:

`mysql> CREATE TABLE table_name (
->   column1Name column1Type column1Details,
->   column2Name column2Type column2Details,
->   ?
-> ) DEFAULT CHARACTER SET charset;`

让我们继续上图中我给你看的笑话表。您会记得它有三列:`id`(一个数字)`joketext`(笑话的文本)和`jokedate`(输入笑话的日期)。创建该表的命令如下:

`mysql> CREATE TABLE joke (
->   id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
->   joketext TEXT,
->   jokedate DATE NOT NULL
-> ) DEFAULT CHARACTER SET utf8;`

看起来很吓人，是吧？让我们来分解一下:

`CREATE TABLE joke (`

这第一行相当简单；它说我们想要创建一个名为 joke 的新表。左括号(()标记表中列列表的开始。

`id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,`

第二行说明我们想要一个名为 id 的列，它包含一个整数(`INT`)，也就是一个整数。这一行的其余部分处理该列的特殊细节:

1.  首先，在该表中创建一行时，该列不允许留空(`NOT NULL`)。
2.  接下来，如果我们在向表中添加一个新条目时忽略了为该列指定一个特定的值，我们希望 MySQL 自动选取一个比表中迄今为止的最高值大 1 的值(`AUTO_INCREMENT`)。
3.  最后，该列将作为表中条目的唯一标识符，因此该列中的所有值都必须是唯一的(`PRIMARY KEY`)。

`joketext TEXT,`

这第三行超级简单；它说我们想要一个名为`joketext`的列，它将包含文本(`TEXT`)。

`jokedate DATA NOT NULL`

这第四行定义了我们的最后一列，称为`jokedate`；这将包含一个日期(`DATE`)，不能留空(`NOT NULL`)。

`) DEFAULT CHARACTER SET utf8;`

右括号(`)`)标记表格中列列表的结尾。

告诉 MySQL 你将在这个表中存储 UTF 8 编码的文本。UTF-8 是 web 内容最常用的编码，所以您应该在所有打算在 Web 上使用的数据库表中使用它。

最后，分号告诉 mysql 客户端程序您已经完成了查询的输入。

请注意，我们为创建的每个列分配了特定的数据类型。`id`将包含整数，`joketext`将包含文本，`jokedate`将包含日期。MySQL 要求您预先为每一列指定一种数据类型。这有助于组织您的数据，并允许您以强大的方式比较一列中的值，我们将在后面看到这一点。有关支持的 MySQL 数据类型的完整列表，请参见附录 C，MySQL 列类型。

现在，如果您正确地输入了上面的命令，MySQL 将会响应“Query OK ”,并且您的第一个表将会被创建。如果你输入错误，MySQL 会告诉你输入的查询有问题，并试图指出它在哪里理解你的意思有困难。

对于如此复杂的命令，“Query OK”是一个相当乏味的响应。让我们来看看您的新表，以确保它是正确创建的。键入以下命令:

`mysql> SHOW TABLES;`

响应应该是这样的:

`+----------------+
| Tables_in_ijdb |
+----------------+
| joke           |
+----------------+
1 row in set (0.02 sec)`

这是数据库中所有表的列表(我们在上面将其命名为`ijdb`)。该列表只包含一个表:您刚刚创建的`joke`表。到目前为止，一切似乎都很好。让我们使用一个`DESCRIBE`查询来仔细看看笑话表本身:

`mysql> DESCRIBE joke;
+----------+---------+------+-----+---------+----------------+
| Field    | Type    | Null | Key | Default | Extra          |
+----------+---------+------+-----+---------+----------------+
| id       | int(11) | NO   | PRI | NULL    | auto_increment |
| joketext | text    | YES  |     | NULL    |                |
| jokedate | date    | NO   |     | NULL    |                |
+----------+---------+------+-----+---------+----------------+
3 rows in set (0.10 sec)`

如您所见，该表中有三列(或字段)，在结果表中显示为三行。细节有点隐晦，但是如果你仔细看，你应该能猜出它们的意思。不过，没什么好担心的。你有更好的事情要做，比如在你的桌子上增加一些笑话！

不过，在开始之前，我们还需要看一个任务:删除一个表。这项任务就像删除数据库一样简单。事实上，命令几乎完全相同。不要对您的笑话表运行这个命令，除非您真的想摆脱它！

`mysql> DROP TABLE tableName;`

##### 将数据插入表格

您的数据库被创建，并且您的表被构建；剩下的就是把一些真实的笑话放入数据库。将数据插入数据库的命令被恰当地称为`INSERT`。该命令有两种基本形式:

`mysql> INSERT INTO tableName SET
->   column1Name = column1Value,
->   column2Name = column2Value,
->   ?
-> ;`

`mysql> INSERT INTO tableName
->   (column1Name, column2Name, ...)
->   VALUES (column1Value, column2Value, ...);`

因此，要向我们的表中添加一个笑话，我们可以使用以下命令之一:

`mysql> INSERT INTO joke SET
-> joketext = "Why did the chicken cross the road? To get to
">  the other side!",
-> jokedate = "2009-04-01";`

`mysql> INSERT INTO joke
-> (joketext, jokedate) VALUES (
-> "Why did the chicken cross the road? To get to the other
">  side!",
-> "2009-04-01"
-> );`

注意，在两种形式的`INSERT`命令中，列的顺序必须与值的顺序相匹配。否则，列的顺序并不重要。

当您键入这个查询时，您会注意到我们使用了双引号(`"`)来标记笑话文本的开始和结束位置。以这种方式用引号括起来的一段文本称为文本字符串，这就是在 SQL 中表示大多数数据值的方式。例如，您会注意到日期也是以文本字符串的形式键入的，格式为“`YYYY-MM-DD`”。

如果您愿意，可以键入用单引号(`'`)括起来的文本字符串，而不是双引号:

mysql> INSERT INTO 笑话集
- > joketext = '小鸡为什么过马路？才能到达
’>的另一边！，
->joke date = ' 2009-04-01 '；

你可能想知道当笑话本身包含引用时会发生什么。如果文本包含单引号，最简单的方法就是用双引号括起来。相反，如果文本包含双引号，请用单引号将其括起来。

如果要包含在查询中的文本包含单引号和双引号，则必须对文本字符串中的冲突字符进行转义。在 SQL 中，通过在字符前添加一个反斜杠(`)来对字符进行转义。这告诉 MySQL 忽略这个字符可能具有的任何“特殊含义”。在单引号或双引号的情况下，它告诉 MySQL 不要将字符解释为文本字符串的结尾。`

 `为了尽可能清楚地说明这一点，下面是一个包含单引号和双引号的笑话的`INSERT`命令:

`mysql> INSERT INTO joke
-> (joketext, jokedate) VALUES (
-> 'Knock-knock! Who's there? Boo! "Boo" who?
'>  Don't cry; it's only a joke!',
-> "2009-04-01");`

如您所见，我使用单引号标记了笑话文本的文本字符串的开始和结束。因此，我不得不在字符串中的三个单引号前加上反斜杠来转义它们。MySQL 看到这些反斜杠，知道将单引号视为字符串中的字符，而不是字符串结束标记。

如果您特别聪明，您现在可能想知道如何在 SQL 文本字符串中包含实际的反斜杠。答案是键入一个双反斜杠(`\`)，MySQL 将看到它并将其视为文本字符串中的单个反斜杠。

现在您已经知道了如何向表中添加条目，让我们看看如何查看这些条目。

##### 查看存储的数据

我们用来查看数据库表中存储的数据的命令`SELECT`，是 SQL 语言中最复杂的命令。这种复杂性的原因是数据库的主要优势在于它在数据检索方面的灵活性。在我们使用数据库的早期阶段，我们只需要相当简单的结果列表，所以我们在这里只考虑简单形式的`SELECT`命令。

该命令将列出存储在笑话表中的所有内容:

`mysql> SELECT * FROM joke;`

大声朗读，这个命令说“选择从`joke`开始的所有内容。”如果您尝试此命令，您的结果将如下所示:

`+----+--------------------------------------------------------------
-+------------+
| id | joketext
| jokedate   |
+----+--------------------------------------------------------------
-+------------+
|  1 | Why did the chicken cross the road? To get to the other side!
| 2009-04-01 |
+----+--------------------------------------------------------------
-+------------+
1 row in set (0.00 sec)`

结果看起来有点杂乱无章，因为`joketext`列中的文本太长，表格太宽，无法在屏幕上显示。出于这个原因，您可能想告诉 MySQL 省去`joketext`列。执行此操作的命令如下:

`mysql> SELECT id, jokedate FROM joke;`

这一次，我们没有告诉它“选择所有内容”，而是精确地告诉它我们想要看到哪些列。结果看起来像这样:

`+----+------------+
| id | jokedate   |
+----+------------+
|  1 | 2009-04-01 |
+----+------------+
1 row in set (0.00 sec)`

没关系，但我们至少想看一些笑话文本？除了能够命名我们希望`SELECT`命令显示的特定列之外，我们还可以使用函数来修改每一列的显示。一个名为`LEFT`的函数让我们告诉 MySQL 显示一列的内容，最多显示指定的最大字符数。例如，假设我们只想看到`joketext`列的前 20 个字符。下面是我们将使用的命令:

`mysql> SELECT id, LEFT(joketext, 20), jokedate FROM joke;
+----+----------------------+------------+
| id | LEFT(joketext, 20)   | jokedate   |
+----+----------------------+------------+
|  1 | Why did the chicken  | 2009-04-01 |
+----+----------------------+------------+
1 row in set (0.00 sec)`

明白这是怎么回事了吗？另一个有用的函数是`COUNT`，它让我们统计返回结果的数量。例如，如果您想知道表中存储了多少个笑话，可以使用以下命令:

`mysql> SELECT COUNT(*) FROM joke;
+----------+
| COUNT(*) |
+----------+
|        1 |
+----------+
1 row in set (0.02 sec)`

如你所见，你的桌子上只有一个笑话。

到目前为止，所有的例子都获取了表中的所有条目；但是，您可以将结果限制为只包括那些具有所需特定属性的数据库条目。您可以通过在`SELECT`命令中添加一个所谓的`WHERE`子句来设置这些限制。考虑这个例子:

`mysql> SELECT COUNT(*) FROM joke WHERE jokedate >= "2009-01-01";`

该查询将计算日期大于或等于 2009 年 1 月 1 日的笑话的数量。在日期的情况下，“大于或等于”意味着“当天或之后”这个主题的另一个变体允许您搜索包含某段文本的条目。查看以下查询:

`mysql> SELECT joketext FROM joke WHERE joketext LIKE "%chicken%";`

该查询显示所有在`joketext`列中包含文本“chicken”的笑话的完整文本。`LIKE`关键字告诉 MySQL 指定的列必须匹配给定的模式。在这种情况下，我们使用的模式是“`%chicken%`”。`%`符号表示文本“chicken”之前和/或之后可以是任何文本串。

还可以在`WHERE`子句中组合附加条件，以进一步限制结果。例如，要仅显示 2009 年 4 月的敲门信号笑话，可以使用以下查询:

`mysql> SELECT joketext FROM joke WHERE
-> joketext LIKE "%knock%" AND
-> jokedate >= "2009-04-01" AND
-> jokedate < "2009-05-01";`

在表中再输入几个笑话，并尝试使用`SELECT`查询。在本书的后面，对`SELECT`命令的熟悉将会派上用场。

你可以用`SELECT`命令做很多事情。稍后，当我们需要时，我们将会看到它的一些更高级的特性。

##### 修改存储的数据

将数据输入数据库表后，您可能希望对其进行更改。无论你想纠正一个拼写错误，还是想更改一个笑话的日期，都可以使用`UPDATE`命令进行更改。该命令包含了`SELECT`和`INSERT`命令的元素，因为该命令既挑选出要修改的条目，又设置列值。`UPDATE`命令的一般形式如下:

`mysql> UPDATE tableName SET
->   colName = newValue, ...
-> WHERE conditions;`

例如，如果我们想更改上面输入的笑话的日期，我们可以使用下面的命令:

`mysql> UPDATE joke SET jokedate = "2010-04-01" WHERE id = "1";`

这就是那个`id`专栏派上用场的地方:它让你可以很容易地挑出一个笑话进行修改。这里使用的`WHERE`子句就像在`SELECT`命令中一样工作。例如，下一个命令更改包含单词“chicken”的所有条目的日期:

`mysql> UPDATE joke SET jokedate = "2010-04-01"
-> WHERE joketext LIKE "%chicken%";`

##### 删除存储的数据

在 SQL 中删除条目非常容易，如果你还没有注意到，这是一个重复出现的主题。以下是命令语法:

`mysql> DELETE FROM tableName WHERE conditions;`

要从表中删除所有关于鸡的笑话，可以使用以下查询:

`mysql> DELETE FROM joke WHERE joketext LIKE "%chicken%";`

小心使用回车键！T3】

*信不信由你，`DELETE`命令中的`WHERE`子句实际上是可选的。*

*因此，在键入这个命令时，您应该非常小心！如果不考虑`WHERE`子句，那么`DELETE`命令将应用于表中的所有条目。*

*该命令将一次性清空笑话表:*

`mysql> DELETE FROM joke;`

很可怕，是吧？

##### 让 PHP 来打字

MySQL 数据库服务器软件和 SQL 的内容远不止我在这里介绍的几个基本命令，但是这些命令是最常用的。

在这个阶段，您可能会认为数据库似乎有点麻烦。SQL 很难输入——与其他计算机语言相比，它的命令往往又长又冗长。你可能已经害怕以`INSERT`命令的形式输入一个完整的笑话库。

别担心！随着我们继续阅读这本书，您会惊讶地发现实际上您手动输入的 SQL 查询是如此之少。通常，您将编写 PHP 脚本来为您输入 SQL。例如，如果您希望能够将一堆笑话插入到数据库中，您通常会创建一个 PHP 脚本来添加笑话，其中包括必要的`INSERT`查询，并带有笑话文本的占位符。然后，只要有笑话要添加，就可以运行这个 PHP 脚本。PHP 脚本提示您输入笑话，然后向 MySQL 服务器发出适当的`INSERT`查询。

然而，现在对您来说，获得手工输入 SQL 的良好感觉是很重要的。它会让你对 MySQL 数据库的内部工作有一个强烈的感觉，并且会让你更加感激 PHP 为你节省的工作！

到目前为止，我们只使用了一个表，但是要实现关系数据库的真正功能，您还需要学习如何一起使用多个表来表示数据库中存储的项目之间潜在的复杂关系。我将在第 5 章“关系数据库设计”中涵盖所有这些内容，在这一章中，我将讨论数据库设计原则并展示一些更高级的例子。

不过现在，我们已经完成了我们的目标，您可以使用 mysql 客户端程序轻松地与 MySQL 进行交互。在[第 3 章:PHP 简介](https://www.sitepoint.com/article/mysql-3-getting-started-php/)中，我们继续深入研究 PHP 语言，并用它来创建几个动态生成的网页。

如果您愿意，您可以在继续学习之前，通过创建一个适当大小的笑话表来练习一下 MySQL。这些知识在后面的[第 4 章:在 Web 上发布 MySQL 数据](https://www.sitepoint.com/article/publishing-mysql-data-web/)中会派上用场。` 

## `分享这篇文章`