# 将社区保持在 Java 社区进程中(JCP)

> 原文:[https://www . site point . com/keeping-community-in-Java-community-process-JCP/](https://www.sitepoint.com/keeping-community-in-java-community-process-jcp/)

![Open Source Week](../Images/31a22f613e5e7d0c22f753b2e51b5549.png)

SitePoint 的开源周到了！整整一周我们都在发布关于开源、自由软件和社区的文章，所以请继续查看 ***[OSW 标签](https://www.sitepoint.com/blog/)*** 获取最新更新。

Java 已经有二十多年的历史了，并且一直被认为是世界上最流行的编程语言之一。Java 对开发人员如此有吸引力的部分原因是特性以一种受控的方式发展，这种方式很少对向后兼容性有任何影响。Java 发展的方式有着不同的历史，尤其是在开源方面。在本文中，我们将通过 [Java 社区流程](https://www.jcp.org/en/home/index) (JCP)来了解 Java 平台是如何标准化的，同时保持社区的参与。我们还将看到该过程已经面临的以及今天仍然面临的一些挑战。

## 在 JCP 之前

发布后，Java 迅速流行起来，许多公司，无论大小，都想成为这个令人兴奋的新软件平台的一部分。在早期，IBM 通过 Taligent 迅速介入，tali gent 是 IBM 和苹果的合资企业，最初开发面向对象的应用程序框架。Taligent 在国际化方面也有优势，并为 JDK 1.1 贡献了许多类(如`java.text`包和`java.util.Calendar`类)。

微软也成为了 Java 的被许可方，将 Java 集成到了早期版本的 Internet Explorer 中。微软的实施带来了很多麻烦，导致了一场旷日持久的关于微软如何违反许可协议条款的诉讼。这最终以有利于 Sun 的方式解决了，但也是推动 C#发展的根本原因。

大约在 1997 年，Sun Microsystems 面临着很大的压力，要把 Java 的标准化工作交给一个著名的国际标准组织，如 ANSI 或 ECMA。孙对此并不热衷，原因有二。首先，它将把 Java 平台的控制权交给其他人，Sun 意识到 Java 对他们的价值，当然是在营销方面，如果不是纯粹的收入方面的话。

第二个原因更多的是关于 Java 随着时间的推移会发展得多快。标准化过程可以在一个范围内进行分类，一端是拥有完全控制权的单一公司，另一端是所有相关方拥有平等发言权的完全开放的过程。这些都有优点，但也有缺点。如果 Sun 继续单独控制 Java 的开发，开发人员将不得不接受 Sun 的产品管理认为是最好的特性。如果 Sun 把 Java 交给 ANSI 这样的人，开发速度会受到影响。众所周知，开放的国际标准机构在开发和批准标准方面进展缓慢(在过去的 26 年里，ANSI 只对 C 标准进行了三次修订！)

## Java 社区进程

Sun 的管理层认为，开发 Java 规范的最佳方式是创建一个新的标准机构，其流程介于两者之间。在 10 月份发布了最初的提议后，Sun 于 1998 年 12 月 8 日正式启动了 Java 社区进程(JCP ),这是它发布 JDK 1.2 的同一天。它还借此机会将 Java 更名为 Java 2，并引入了不同“版本”的概念，具体如下:

*   面向移动和嵌入式设备的 Java 2 Micro Edition (J2ME)
*   Java 2 标准版(J2SE ),涵盖语言、核心库和 JVM
*   Java 2 Enterprise Edition (J2EE)用于在应用服务器容器中使用 servlets 和 Enterprise Java Beans(EJB)等组件的企业应用程序(谁说微服务是新的？)

### JCP 的结构

JCP 将由对如何开发 Java 感兴趣的各方组成。最初，会员资格仅限于公司，但后来发生了变化，包括 Java 用户组、学者甚至个人。

幸运的是，孙意识到名字中的关键词是*社区*。

JCP 的原始结构有两个执行委员会(EC ),其作用是通过流程的关键点批准规格的通过。一个欧共体负责 J2ME，另一个负责 J2SE 和 J2EE。2012 年 8 月，所有 Java 标准化活动被合并成一个单一的 EC。

今天，根据 [JCP 规则 2.10 版](https://www.jcp.org/en/procedures/ec_standing_rules-2_1)，欧盟委员会由以下成员组成:

*   16 个经批准的席位
*   6 个当选席位
*   2 个准会员席位
*   甲骨文美国公司 1 个常任席位

成员任期为两年，任期交错，因此 24 个席位中的 12 个通常会在每年批准或选举。最新版本的《JCP 宪章》也取消了对会员费的要求。当前的目标显然是增加成员，从而提高社区的参与度。

### 通过 JCP 改变 Java

Java 社区流程的任何正式成员都可以提交一份 [Java 规范请求](https://www.jcp.org/en/jsr/overview) (JSR)，其中包含了关于提议规范的各种信息，包括它将标准化的内容、预计的开发日期以及为什么需要它。欧盟委员会对 JSR 进行投票，如果通过，标准的制定过程就开始了。

为了做到这一点，一个专家小组(EG)由 JCP 的正式成员或成员代表组成，他们有兴趣帮助制定规范。规范负责人(通常是提交 JSR 的人，但这可以随着时间的推移而改变)决定专家组接受谁。一旦专家组创建了规范，就会在 JCP 成员投票批准之前发布供公众审查。

JSR 的交付成果由三部分组成，构成了 JCP 的“金三角”:

1.  形式规范
2.  规范的参考实现(RI)
3.  测试兼容性工具包(TCK)

下图显示了这三个部分的关系。

![java-community-process-triangle](../Images/7da74331417aba831482962b780fac1c.png)

最初，JCP 经历了一场活动风暴，许多 JSR 被归档，专家组被创建，规范被定义。在撰写本文时，JCP 网站上列出了 380 个 JSR，另有 27 个维护 JSR 涵盖了现有规范。

还存在另一种接受和跟踪 Java 平台变更的机制:JDK 增强提案(JEPs)。Sun 最终在 2006 年发布了 Java 开发工具包(JDK)的源代码，并启动了 OpenJDK 项目来管理它。通过 JCP 定义的 Java SE 规范仅涵盖 Java 语言、虚拟机和类库。jep 涵盖对 JDK 的任何修改，这些修改可能会导致更改被传递到相关的 JSR 中。正如我们将在后面看到的，这些最近已经成为一些辩论的主题。

### Java 规范参与协议

JCP 的另一个重要部分，我到目前为止还没有提到，是 Java 规范参与协议(JSPA， [pdf](https://jcp.org/aboutJava/communityprocess/JSPA2.pdf) )。这一点非常重要，因为它涵盖了与 JSR 规范相关的知识产权。最初，JCP 没有为 JSR 的独立实现提供任何方法，所以没有能力生产开源版本。

在 2002 年的 JavaOne 大会上，一个重大的声明就是 Apache Software Foundation (ASF)加入了 Java SE/EE EC。还宣布了 Sun 领导的所有当前和未来的 JSR 都将在允许开源实现的许可下可用。

新 JSPA 的第 5 部分涵盖了出站知识产权，并确保规范牵头人向任何希望独立实现该规范的人授予涵盖该规范的版权和专利的永久、免版税、不可撤销的许可。为了符合这一要求，实现必须完全实现规范，而不是修改、子集化或超集规范并通过 TCK。

## 和声拨动了错误的和弦

几年来，JCP 平稳运行，提交了各种各样的 JSR，编写了规范，创建了商业和开源实现。

2004 年 9 月 30 日，Java 2 SE 5.0 发布。这包括对 Java 语言语法的重大改变，也再次改变了 Java 的编号方案。为了表明平台的变化程度，版本号提前到了 5.0。通过 JCP，发布内容被指定在 [JSR 176](https://jcp.org/ja/jsr/detail?id=176) 中，这是一把“保护伞”JSR。该规范定义的内容还包括其他 JSR 指定的元素，例如来自 [JSR 14](https://jcp.org/ja/jsr/detail?id=14) 的泛型类型、 [JSR 175](https://jcp.org/ja/jsr/detail?id=175) 的注释等。

后来事情变得更复杂了。

### 进入和谐项目

次年 5 月，ASF 创建了一个新的孵化器项目，其目标是“设计和实施 J2SE 5”。这被称为[和谐项目](https://harmony.apache.org/)。在这个声明之前的一段时间里，自由和开放源码软件(FOSS)的支持者希望 Java 的源代码可以通过开放源码许可免费获得。孙出于各种原因拒绝了这一呼吁；不仅仅是尽职调查所需要的大量工作，使他们能够在开源许可下发布源代码，而且，正如我们将看到的，因为 Sun 是如何从 Java 中赚钱的。

由于 Java 的规范可以从 JCP 免费获得，理论上，产生一个不受 Sun 的二进制许可条款约束的“干净的房间”实现是可能的。其中最重要的是使用领域的限制。FoU 实质上是说，只要在“通用台式计算机和服务器”上使用，Java 就可以免费使用(即无需向 Sun 支付许可费)。

### 孙抗拒

此时，Sun 直接从 Java 中获得收入的唯一途径是许可 Java Card(Java 的一个很小的子集，仅在几千字节的 RAM 中运行)和 Java 2 ME，它们被手机制造商使用。Sun 希望保护这一(并非微不足道的)收入流。

Java 开源版本的工作早在 1998 年就以 GNU Classpath 项目的形式开始了，但当时只关注 Java 的标准类库，而不是虚拟机。Project Harmony 旨在开发一个完整的开源 Java 运行时环境。

不幸的是，这就是问题的开始。为了使 JSR 176 的实现被授权免费使用所有必要的 IP 并被称为 Java，该实现必须通过 TCK 中的所有测试。在 2006 年 8 月，ASF 联系 Sun 以获得 JSR 176 的 TCK(为了使事情变得更加混乱，在这种情况下，TCK 也被称为 Java 兼容性工具包(JCK))。尽管 2002 年在 JavaOne 大会上做出了声明，但 Sun 只在某些许可限制下向 Apache 提供 TCK/JCK。这些限制意味着任何被测试的实现仍然会受到与 Sun 的二进制分布非常相似的 FoU 的约束。

### 冷淡的

Apache 显然认为这违反了 JSPA，并于 2007 年 4 月 10 日向 Sun Microsystems 写了一封公开信，要求 Sun 遵守 JSPA 的条款，并在适当的许可下向他们提供 TCK。孙拒绝这样做。

在甲骨文收购了太阳微系统公司并将提议的 Java SE 7 JSR 付诸 Java SE/EE EC 投票后，僵局最终得以解决。这实际上是对 TCK for Java SE 的许可条款是否会改变以允许 ASF 以他们想要的方式访问的投票。然而，尽管欧盟委员会的一些成员反对，投票还是通过了，为 JCP 恢复正常制定标准铺平了道路。

SE/EE EC 的两位个人成员 Tim Peierls 和 Doug Lea 辞职以示抗议。ASF 再次尝试让甲骨文公司履行 JSPA 的承诺，但最终在 2010 年 12 月从 JCP SE/EE EC 辞职。

![java-community-process](../Images/986fdb681b4e4bebfb991a36edfde1fe.png)

## 事态

自从 ASF 离开 JCP 以来，已经有超过 40 个 JSR 被提出，涵盖了 Java 的所有方面。这是否表明 JCP 现在一切都好？在某些方面，是的，但它仍然有它的问题。

### Java 我

在过去的几年中，只有两个 JSR 与 Java ME 相关，分别是[连接受限设备配置(CLDC)版本 8](https://jcp.org/en/jsr/detail?id=360) 和 [Java ME 嵌入式概要文件](https://jcp.org/en/jsr/detail?id=361)。现在手机已经远离了 Java ME，许多嵌入式设备已经足够强大，可以运行完整的 Java SE 实现，因此很难预测 Java ME 的未来走向。

从 Java SE 8 开始，Oracle 计划让 Java ME 版本与 Java SE 保持同步。眼下看来，明年出现 Java ME 9 的可能性不大。

### Java SE

针对各种核心平台特性的组件 JSR 已经提交。最近最重要的是 Java 平台模块系统(Jigsaw 项目， [JSR 376](https://jcp.org/en/jsr/detail?id=376) )将包含在 Java SE 9 ( [JSR 379](https://jcp.org/en/jsr/detail?id=379) )中。

Oracle Java 工程组的管理层最近就 Java SE 的 JSRs 主题向 JCP EC 发表了讲话。他们的问题是，软件开发在过去的二十年里发生了很大的变化，需要一种更加敏捷的方法来开发核心 Java 平台。JSR 使用结构化的开发过程，这并不适合这种方法。

OpenJDK 项目引入了 JDK 增强建议(jep)来满足这一需求。jep 涵盖了比完整的 JSR 更小的作品，可以快速轻松地从 JDK 版本中包含或排除(JDK 9 已经证明了这一点)。

尽管使用了 jep，但仍会有针对 Java SE 的 JSR，但是它们会在发布准备就绪时收集所有的变更，而不是在开发过程开始时定义这些变更。这很好，因为它确保了 Java SE 的 IP 在与以前相同的条款下可用。然而，有些人希望进行 JDK 的商业“干净房间”实现，因为在 Java SE JSR 最终发布之前，唯一的规范参考将是 OpenJDK 项目。

### Java EE

针对 Java EE 的各个方面，如 EJB、Servlets、Web 服务、MVC 等，已经提交了大量的 JSR。所有这些都是 Java EE 8 的一部分。但是最近，Java 社区非常关注这些 JSR 中的大部分没有与之相关的活动，Oracle 也不再积极开发 Java EE。最近在今年的 JavaOne 大会上发布的声明承诺将 Java EE 8 和 9 推上正轨，因此可以期待在不久的将来看到这些 JSR 的更多进展。

## 最终，这都是关于社区的

JCP 无疑面临前进的挑战。为了确保标准保持开放，重要的是 JCP 的成员继续增加。最近对 JCP 成员协议的修改是朝着正确方向迈出的明显一步。

最近，JCP 举行了欧共体成员选举。由于选举是在新版本 2.10 规则下举行的第一次选举，所有席位都要重新选举。EC 现在由 16 个批准席位、6 个选举席位和 2 个准成员席位以及甲骨文美国公司的一个常任席位组成。我很高兴地告诉大家，我工作的公司, [Azul Systems](http://azul.com/) 再次当选，任期两年，我们将通过这次参与继续帮助开发 Java 平台。

由于一个关键因素，Java 不同于大多数其他开发平台。希望 JCP 将利用这一点来确保 Java 继续发展，以满足开发人员不断变化的需求，并保持这个星球上最受欢迎的平台。关键因素？名字里就有:社区。

## 分享这篇文章