# Rails 还是 Sinatra:两全其美？

> 原文:[https://www . site point . com/rails-or-Sinatra-the-best-of-two-worlds/](https://www.sitepoint.com/rails-or-sinatra-the-best-of-both-worlds/)

这些年来，Ruby 世界有幸拥有了比其公平份额更多的用于开发 web 应用程序的框架。然而，最近，他们中的两个已经成为该领域的明显领导者。这个网站的大多数读者都会听说过 [Ruby on Rails](http://rubyonrails.org/) 。它是 2004 年由 [David Heinemeier Hansson](http://david.heinemeierhansson.com/) 创建的，提供了一个 MVC 框架，帮助提高生产力，同时让开发人员满意。Sinatra 是由 Blake Mizerany 在 2007 年创建的，它是一种特定于领域的语言，在框架之上封装了一个轻量级的 HTTP 请求和响应层。它的简约风格既优雅又经典。RubyGems.org 的数据无疑显示了这两个框架有多受欢迎:Rails 有 700 万次下载，Sinatra 有 150 万次下载。

Rails 是我进入 Ruby web 开发的原因，但最近几年我更多地使用 Sinatra(以下是我喜欢它的 7 个原因)。事实上，我发现 Sinatra 和一些 gem 通常是我构建应用程序所需要的。这让我想知道辛纳特拉是否适合处理任何项目。什么时候使用 Sinatra 最好，什么时候 Rails 是正确的选择？为了回答我的问题，我询问了一些杰出的 Ruby 开发者的想法。

[Konstantin Haase](http://rkh.im/) 是 Sinatra 的当前维护者，他认为这两者都适合不同类型的应用:

> 他们都在解决一系列不同的问题，尽管他们确实有重叠。Rails 是一个专注于编写模型驱动的 web 应用程序的框架，而 Sinatra 是一个从服务器端处理 HTTP 的库。如果从 HTTP 请求/响应的角度考虑，Sinatra 是理想的工具。如果您需要完全集成和尽可能多的样板文件，Rails 是您的不二之选。

David Heinemeier Hansson 也认为两者都有空间，但他认为应用程序的大小应该会影响使用哪一个:

> Sinatra 适合微型风格，Rails 则不适合。只要你保持微观，辛纳特拉将击败铁轨。如果超越 micro，Rails 会打败 Sinatra。

事实上，大多数人倾向于认为 Rails 更适合大型项目，而 Sinatra 更适合小型微型应用或 API。David 接着指出了选择使用 Rails 还是 Sinatra 的一般经验法则:

> 如果你的应用有 5-10 个端点，用 Sinatra 滚动你自己的会有真正的好处。基本上，如果你的整个控制器结构可以放在一两页代码中，那么在一个文件中运行它是非常好的。

[Github](https://github.com/) 的 Rick Olson 证实，Sinatra 确实为小制作做出了很好的选择:

> Sinatra 对 API 和小型网站(内部应用、GitHub 作业等)非常有效。

David Heinemeier Hansson 解释了为什么 Rails 是构建大型 web 应用程序的最佳选择:

> Rails 的成功很大一部分是通过给人们精选的最佳技术(我和 Rails 社区定义的“最佳”)实现的。我每周都更换 Rails，以更好地适应我想要的完美框架。

康斯坦丁·哈斯分享了他对 Rails 及其理念的热情:

> 我喜欢铁轨。Rails 一直在推动我们思考 web 应用程序的方式。Rails 为您解决了 Sinatra 无法解决的问题，因为它可以对您的应用程序做出更多假设。无论你是否需要，一切都已经准备好了，Rails 架构中最大的缺陷就是假设一切都应该由一个工具来解决。

在 Rails 中获得一些您并不真正需要的特性似乎是有代价的，因为您获得了许多您确实需要的特性。这可能最终是值得的，尤其是在创建一个大项目的时候。然而，并不是所有人都认为 Rails 是大型项目的唯一选择。 [Peepcode Screencasts](http://peepcode.com) 的 Geoffrey Grosenbach 认为这是“一种过时的观点，在 2008 年的辛纳特拉身上几乎没有，但现在肯定没有。”他强调了优秀的[gauge . es](http://gaug.es)应用程序，该应用程序以 Sinatra 为例，证明了它完全有能力建立一个大规模的制作网站。

尽管如此，Konstantin Haase 强调了使用 Sinatra 创建大型应用程序的一个潜在问题:

> 编写更复杂的 Sinatra 应用程序(或者更确切地说，使用 Sinatra 的应用程序)需要开发人员花更多的时间考虑架构和工具。这既是优点也是缺点。

一些开发人员肯定会认为这是一个优势，因为他们更喜欢对应用程序中的内容进行严格控制，并了解它们是如何组合在一起的。Geoffrey Grosenbach 认为这是一个绝对值得的交易:

> 辛纳屈的一个巨大好处是它的稳定性。您用几个 Rails 生成器的便利来换取自己的设计决策。用 Sinatra 编写可以给开发者和企业 API 稳定性，因为框架很少改变。你拥有你的代码，你决定它什么时候应该改变。

他接着说，就构建应用程序而言，Sinatra 是完美的候选人:

> 我在 Sinatra 中启动我所有的新应用程序，通常发现我只需要 Sinatra 加上几个 Rack 插件、一个简单的 CouchDB 库和用于前端的 Backbone.js。

[Sau Sheong Chang](http://blog.saush.com/) ， [Yahoo](http://www.yahoo.com) ，[Cloning Internet Applications with Ruby](https://www.packtpub.com/cloning-internet-applications-with-ruby/book)一书的作者，遵循类似的开发模式:

> Sinatra 满足了我对基础平台的所有需求，以及我需要的任何其他东西，我可以使用 gems，或者已经由云平台和服务(如 Heroku 及其附加生态系统)提供。剩下的我可以自己写。

事实上，这个想法可以更进一步，使用 Sinatra 推出完全符合您需求的定制框架。从 Sinatra 开始，然后添加提供您需要的功能的宝石，以便创建您自己的定制框架。在某些方面，这就是帕德里诺项目已经做的事情。

大卫·海涅梅尔·汉森认为这样做没有意义:

> 将所有东西分成小块，让开发人员自己组装所有东西，这与 Rails 的宗旨以及它赢得框架游戏的方式背道而驰。成千上万的工时让我们走到了这一步。试图复制这是一个傻瓜的差事。

尽管对应用程序的内容有更多的控制权可能是个好主意，但康斯坦丁·哈斯警告说，这可能会占用你很多时间:

> 辛纳屈不能为你解决问题的最大缺点就是辛纳屈不能为你解决问题。你实际上必须处理这个问题。你可能会浪费太多时间去处理它。

如果开发人员的预算紧张，他们可能根本没有时间来支配。David Heinemeier Hansson 担心使用 Sinatra 会浪费太多时间去重新发明轮子:

> Sinatra 在简单性方面给你带来的好处很可能会很快被你复制 Rails 已经提供的解决方案的所有工作所抵消。我很同情那些试图独自开发 Basecamp、GitHub、Shopify 或其他任何主要应用程序的人。Rails 之所以复杂且庞大，是因为它包含了大多数人在构建这种规模的应用程序时会遇到的大多数问题的解决方案。试图手工重新创建所有这些解决方案是反简单的。

Railcasts 的主持人 Ryan Bates 认为使用 Rails 的一个好处是可以节省从头开始一个项目的时间:

> 默认的 Rails 应用程序提供了很多我需要的东西，但需要在 Sinatra 中进行额外的设置。这可以加快 Rails 的开发速度。

Rick Olson 也赞同这种观点，他认为 Rails 让 GitHub 的发展变得更加容易:

> 我认为 Rails 是(GitHub)创始人第一年的主要资产。他们能够利用一些更高级的 Rails 特性并快速迭代。

Chad Fowler(ruby conf 的联合组织者)引用 Rails 的“约定胜于配置”的口头禅作为 Rails 加速大型项目开发的另一个原因:

> Rails 生成器和结构提供了 Sinatra 没有的约定。

问题在于，正如里克·奥尔森(Rick Olson)指出的那样，这些惯例有时会让人感觉像一件直筒夹克:

> 如果您同意 Rails 固执己见的约定，并坚持“黄金路线”，那么 Rails 是不错的

相比之下，辛纳屈没有任何限制，正如 [Ruby Learning](http://rubylearning.com/) 的[萨蒂什·塔利姆](http://satishtalim.com/)提供的[亚伦·金特](http://www.quirkey.com/)的这句名言所示:

> “Sinatra 遵循一个抽象的模式:WDNNSP(我们不需要任何讨厌的模式)。WDNNSP 意味着 Sinatra 不仅仅是灵活的，它不包含如何组织您的域或业务逻辑的先入之见。它没有隐式的文件夹结构，没有默认的数据库抽象器，也没有关于如何或在哪里使用它的限制。"

Sinatra 的许多吸引力在于能够选择你的应用程序如何以各种方式构建。使用 Sinatra 可以解放你，因为你不会被规模、结构或工作流程所束缚。你可以构建一个 API，web 应用程序或者把你的代码打包成一个宝石。

听到大卫·海涅梅尔·汉森也是辛纳特拉的简单粉丝，有些人可能会感到惊讶:

> 我过去用过 Sinatra，非常喜欢。它提供了一种完全不同的方法，对于范围小得多的问题来说是很好的，但它确实做得很好。

那么，Sinatra 会考虑在 Rails 中加入什么吗？

> 在 Sinatra 中没有什么本质上的东西让我想以其他方式重做 Rails。

然而他承认，Rails 几乎抄袭了 Sinatra 最酷的功能之一:

> 我们考虑过给 Rails 增加一个单文件模式，但是拒绝了，因为我们为什么要对 Sinatra 已经做得很好的东西进行优化呢？

Rails 当然提供了大量的特性，但这通常包括许多你不需要的特性——或者它们不能完全按照要求工作。Rails 3 试图通过解耦一些不同的功能来尽可能地减轻这一点，这可以带来更轻松、更可配置的体验，正如 Chad Fowler 所指出的:

> Rails 本身并没有那么“重”，尤其是现在它有能力按照你认为合适的方式来调整它。

Rails 3 引入了许多配置选项，允许您定制体验以适应您想要做的事情。尽管有能力去除赘肉，但康斯坦丁·哈斯警告说，把所有赘肉都留在肚子里往往太诱人了，这会导致膨胀:

> 以我的经验来看，Rails 应用程序通常是作为一个整体应用程序运行的。[不使用 Rails]导致模块化、灵活性、快速测试套件和可伸缩性。然而，在仔细构建 Rails 应用程序时，您可能会达到相同的架构，但这很容易让人不这么做。

David Heinemeier Hansson 不认为这是一个问题，他认为 Rails 是一个很好的选择，不管你是否使用所有的特性:

> 从 Rails 中删除一段您不使用的代码并没有什么实际的好处。没有人强迫你使用所有的功能。Rails 中的许多特性]完全是可选的，如果它们让你不舒服，可以完全关闭。

Rails 正在变得越来越轻，而 Sinatra 已经表明它可以胜任繁重的工作，这意味着两者之间的重叠越来越多。Chad Fowler 认为，实际上，Sinatra 和 Rails 都可以用于各种项目:

> 我认为实际上每一种都可以用于光谱的两端。我想这最终是一个主观的选择。

普遍的共识似乎是“为工作选择正确的工具，但两者之间的重叠意味着使用哪种工具的决定往往取决于个人选择”。Sinatra 可能允许你对架构有更多的控制，但是额外的努力是对你(或者更重要的是你的客户)时间的一个很好的利用吗？Ryan Bates 总结了哪种类型的人更有可能选择哪种框架:

> 最后，我认为这取决于你的偏好，你是喜欢从较轻的开始，然后根据需要添加，还是从较重的开始，如果需要的话，去掉一些东西使之变轻。

Geoffrey Grosenbach 认为，基本上有两种不同类型的开发人员:

> 我认为，喜欢小巧、轻便、快速、显式和可扩展的 Ruby 开发人员与喜欢全功能框架的开发人员之间存在巨大的分歧。Sinatra 提供前者，Rails 提供后者。所以我不认为 Sinatra 会取代 Rails。只是理念不同，对某类开发者有吸引力。

但是也许你不必选择一个。Ruby 源代码作者 Dave Kennedy 指出 Rails 和 Sinatra 实际上合作得非常好:

> 如果说最近的发展使这两个框架互补的话。也就是说，我目前正在开发一个多租户应用程序，在一个 Rails 应用程序中大量使用 Sinatra，这是一些非常酷的东西。Sinatra 让我以一种前所未有的方式模块化我的应用程序。

许多人指出，在 Rails 3+中安装 Sinatra 应用程序的能力意味着你真的可以两全其美。事实上，Chad Fowler 认为选择一个而不是另一个的整个概念是没有意义的:

> 在 Rails 3 应用程序中安装 Sinatra 应用程序的能力使它成为一个你不需要太担心的选择。

Geoffrey Grosenbach 认为这将使应用程序更具模块化的感觉:

> 许多人将 Sinatra 应用嵌入到 Rails 应用中。这模仿了 Django 框架的设计，其中一个应用程序由许多较小的应用程序组成，这些应用程序处理应用程序的特定部分(并且通常可以在应用程序之间重用)。

大卫·海涅迈尔·汉森也认为这是一种很好的做事方式:

> 你甚至可以在你的 Rails 结构中安装微型 Sinatra 应用。GitHub 有几个这样的东西。不错的模型。

Rick Olson 解释了 GitHub 如何频繁地串联使用这两个组件:

> 我非常感谢 Rack 和 Sinatra 与[Rails]如此紧密地集成在一起。您可以将请求路由到 Sinatra 或 Rack 端点，并完全按照您的需要去做，而不是为了某个特定的特性而强迫 Rails。

每个人都同意这两种框架在 Ruby web 生态系统中都有一席之地。事实上，他们在一起工作得非常好，并且在很多方面在一定程度上相互补充。很多人似乎认为这两个框架一起工作效果最好，并且满足了不同的需求。如果有一些重叠，它们会吸引不同类型的开发人员。他们都把自己擅长的事情做得很好，是优秀实践的杰出范例——以至于他们在其他语言中被复制得死去活来。GitHub 的 John Nunemaker 精辟而简洁地总结了这一点:

> 他们都有自己的位置。如果你只想把事情做好，Rails 更好。Sinatra 更适合简单的事情，以及当你想控制一切并使用自己的观点时。

作为一个社区，我们非常幸运，我们拥有如此完善的工具，这些工具得到了很好的支持并且是开源的。Sinatra 和 Rails 都很好地覆盖了所有的基础，它们确实给了我们两个世界最好的东西。

你怎么看——你用过 Rails 和 Sinatra 吗，你更喜欢哪一个？你会考虑开发自己的框架，而不是使用 Rails 吗？请在下方留言评论。

## 分享这篇文章