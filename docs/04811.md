# 如何让你的博客在 560 毫秒内载入

> 原文:[https://www.sitepoint.com/how-make-blog-load-560ms/](https://www.sitepoint.com/how-make-blog-load-560ms/)

这些年来，我建了很多博客。每次这个过程开始时，我都会问自己:“我怎样才能让这个博客加载得比以前更快？”因为，除了个人欣赏快速的页面加载时间之外，它对底线也有很大的[影响——它增加了页面浏览量，降低了跳出率，并被](http://www.impressivewebs.com/importance-of-website-performance-sources/)[与亚马逊等网站销售数字的提高](http://mashable.com/2011/04/05/site-speed/)联系在一起。

在我最近的项目中，我已经设法让我的博客在 560 毫秒内加载完毕。这不一定是每个人都能做到的——我的博客很简单——但大多数人肯定能在一秒钟内加载他们的博客。

以下是我的建议。

## 1.跟踪您的页面加载时间

在对您的博客进行任何更改之前，请通过以下工具运行它:

*   [Pingdom](http://tools.pingdom.com)
*   [网页测试](http://webpagetest.org)
*   [GTmetrix](http://gtmetrix.com)

所有这些都提供了对当前页面加载时间的度量，以及改进该时间的技巧和诀窍。这有助于进行基线测量，以便您知道哪些变化正在产生影响，并且这也有助于在您进行重新测试时更好地了解什么在产生影响。

## 2.使用静态博客生成器

这与其说是一个调整，不如说是哲学上的一个整体改变，但请听我说完。像 WordPress 这样的动态软件在服务器上放置了大量的负载，而这些负载不可避免地会传递给用户。如果你需要 WordPress，那很好——剩下的提示仍然适用——但是如果你不需要，那么我建议你去看看[杰基尔](http://jekyllrb.com)或者[中间人](http://middlemanapp.com)。这些工具允许你在你的电脑上生成一个静态的、基于 HTML 的博客，然后你可以上传到任何你想要的服务器上。这意味着:

1.  你的服务器只需要提供静态文件。不会涉及任何深加工。这比单纯的缓存有效得多，并且对页面加载时间有巨大的影响。
2.  你可以更好地控制你的网站。当然，WordPress 非常灵活，但是几乎没有什么能与静态博客生成器的精确性相比。

不可否认，将 WordPress 博客转换成静态博客可能不值得，但是为你的下一个项目考虑一个静态站点生成器是值得的。

## 3.简化你的博客设计

大多数博客都有太多的内容。许多都有令人讨厌的设计、巨大的图像、嵌入的视频、社交分享按钮、广告、动画等等。

有些东西是必要的，但是很少会需要所有的东西。因此，我建议对你的博客设计进行审核。也许甚至打印一份你的主页，坐在沙发上，考虑两件事:

1.  什么是绝对必要的？
2.  哪些*可以被删除？*

你不必让你的博客像我的一样稀疏，但一定要有批判性，并尝试采取[震中方法](https://gettingreal.37signals.com/ch09_Epicenter_Design.php)来设计:

> 中心设计集中于页面的真正本质——中心——然后向外构建。这意味着，在开始的时候，你忽略了最重要的部分:导航/标签、页脚、颜色、侧边栏、徽标等等。相反，你从中心开始，首先设计最重要的内容。

大多数时候，简化一个博客并不涉及任何实际的牺牲。这可能会让你觉得失去了一些东西，但读者是为了内容而来，而不是边栏中的零碎内容。

## 4.选择一个靠近你的站点访问者的主机服务器

如果你的网站托管在纽约的服务器上，来自纽约的访问者会比来自世界另一端的访问者有更快的页面加载时间。正因为如此，知道访问者来自哪里是值得的。

对于许多 SitePoint 的读者来说，答案会是“美国”，但是:

1.  如果不是这样的话，把博客放在别的地方也许是值得的。
2.  美国是一个大地方。

例如，我注意到我的博客的很多访问者来自西海岸。因此，我把我的博客搬到了旧金山的服务器上。这并没有花费额外的费用，但这意味着许多游客获得了额外的愉快体验。

至于如何跟踪你的访问者来自哪里，所有这些数据都可以通过谷歌分析获得。只需设置一个基于地图的微件。只需花一点时间就能找到托管你网站的最佳地点。

## 5.切换到数字海洋(或 Linode)

如果你的博客托管在一个性能很差的服务器上，那么世界上所有的优化都没有意义。如果你觉得你的主人有点不舒服，我建议你换一种方式:

1.  [数字海洋](http://digitalocean.com)
2.  里诺德

这两种服务除了提供非常实惠的托管服务之外，还有两个主要优势:

1.  他们使用固态硬盘，这对性能是一个巨大的福音。
2.  它们绝对是准系统，所以默认情况下不会在你的服务器上安装任何影响性能的垃圾软件。

当然，缺点是您必须知道如何通过命令行操作服务器，但是这种控制意味着您在进一步提高性能方面有很大的灵活性。

(有传统的主机公司使用固态硬盘，但没有一家是我用过的，所以我个人不能推荐任何一家。)

## 6.安装 nginx

世界上大多数网络服务器都在运行 Apache。但是，尽管 Apache 灵活且功能丰富，但如果您关注性能，它远不是最佳选择。在那个领域， [nginx](http://nginx.org/) 是山中之王。

nginx 是 Apache 的一个快速发展的替代品，它的功能更少，也有一定的局限性，但是它带来了巨大的性能提升。然而，有几件事要记住:

*   您可能需要在自己的服务器上安装 nginx。这对初学者来说可能有些棘手，但是有很多[有用的指南](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-14-04-lts)可以帮助你。
*   安装 WordPress 可能更棘手，但是 Digital Ocean 有一个点击选项，你可能想看看。
*   如果你使用的是静态博客生成器，使用 nginx 没有缺点，如果不能充分利用它，那将是一个巨大的浪费。

切换到一个新的网络服务器并不是一个简单的改变，而是像静态博客生成一样，做一点研究。用不了多久就能看到效益。

## 7.通过 CDN 交付资产

通常，当用户访问一个网站时，所有的资源——图像、JavaScript 文件等——都是从一个位置下载的:服务器。虽然这听起来很正常，但这是一个问题，原因有二:

1.  单次访问会给服务器带来很大的负载。
2.  有更好的方法。

另一种方法是使用内容交付网络(CDN)。CDN 用于卸载图像和 CSS 文件等资源的托管，因此当用户访问您的博客时，您的服务器只进行最低限度的处理；其他所有东西都是从外部服务器加载的，该服务器为快速交付进行了优化。

这很有用，因为:

1.  内容交付网络从世界各地的数据中心运行，因此资源可以从离访问者更近的位置交付。
2.  通过不从您自己的服务器提供这些资源，您可以更好地避免流量高峰和其他原因造成的速度下降。

你甚至可以比标准方法更便宜。我每月为一个数字海洋水滴支付 5 美元，并以每年 60 美元的价格将所有资源卸载到 [MaxCDN](http://maxcdn.com/) 上。对于我所获得的性能，这是一个伟大的交易。

## 8.通过第三方 CDN 交付(一些)资产

许多现代网站共享公共资产，比如 jQuery，自己托管这些资源并不是最好的主意。相反，更好的方法是从第三方服务器交付，比如谷歌的:

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">  </script>
```

这为您提供了使用 CDN(免费)的好处，许多访问者已经在浏览器中缓存了 Google 托管的 jQuery 副本，避免了再次下载库的需要。

除了 jQuery 之外，还有其他第三方 cdn，其中许多可以在这里找到:

*   [谷歌托管图书馆](https://developers.google.com/speed/libraries/devguide#Libraries)
*   [cdnjs.com](https://cdnjs.com)

## 9.最小化 HTTP 请求

对于加载到页面上的每个资源，都需要一个 HTTP 请求。所以当一个 CSS 文件被加载时，那就是一个 HTTP 请求。或者当一个社交媒体分享按钮嵌入在一个页面上时，这可能是 2-3 个 HTTP 请求。但是，即使这些请求只检索少量数据，请求本身也是页面加载时间的最大来源之一。

为了解决这个问题:

1.  只在需要的时候嵌入社交按钮。你的观众可能只使用少数几个最受欢迎的网站。
2.  可能的话，合并文件。例如，不要有多个 CSS 文件，而是将所有的样式放在一个文件中，或者有一个工作流程来自动完成这个过程。

此外，参考之前关于简化博客设计的观点。如果你的博客由于 HTTP 请求而加载缓慢，可能是发生了太多的事情。

## 结论

网站性能是一个很大的话题，还有很多其他的事情要考虑，以获得你的博客和服务器的速度。在这篇文章中，我们讨论了一些影响最大的基础知识。

你在使用什么策略(包括我没有提到的策略)？请在下面的评论中分享它们。

## 分享这篇文章