# 12 因素应用程序方法:使用 AppFog 在您自己的应用程序中实现它

> 原文:[https://www . site point . com/12-factor-apps-methodology-implement-apps-app fog/](https://www.sitepoint.com/12-factor-apps-methodology-implement-apps-appfog/)

*本文由 [AppFog](https://www.ctl.io/appfog/) 赞助。感谢您对使 SitePoint 成为可能的赞助商的支持。*

在当今的 SaaS 产品世界中，已经出现了一种通用的方法，其目的是为构建结构良好且可伸缩的应用程序提供一个框架。这就是所谓的[“12 因素应用”](http://12factor.net/)方法，它将改变你实现下一个应用架构的方式。

如果您有很多部署应用程序的经验，那么您可能很清楚部署过程至少可以说是复杂和广泛的。虚拟化、联网和设置运行时环境只是其中的一部分。12 因素应用程序方法没有完全消除复杂性，但它确实创建了一个组织流程的框架，以便维护一个健康且可扩展的应用程序。

但是，应该如何处理这些困难的架构需求，以满足 12 个因素应用程序原则中的每一个？以下段落解释了如何满足 12 因素应用程序方法的标准，同时轻松克服应用程序基础架构和部署设置中涉及的困难现实。

这一过程中的一个关键工具是 AppFog，这是一个由 CenturyLink Cloud 提供的平台即服务产品，允许应用程序开发人员在无需关注基础架构的情况下构建软件。

## 12 个因素

如标题所示，12 因素应用程序方法是一个原则列表，每个原则解释了处理应用程序子集的理想方式。这 12 个因素如下:

### 1.代码库——一个在版本控制中跟踪的代码库，多个部署

12 因素应用程序方法的第一个原则与应用程序的代码库有关。这里最重要的一点是确保您的应用程序被修订控制跟踪，并且它位于开发人员可以访问的中央存储库中。这通常通过使用 [Git](https://www.sitepoint.com/git-for-beginners/) 或 SVN 来存储你的代码来处理。

### 2.依赖关系——显式声明并隔离依赖关系

当涉及到依赖性时，没有假设的余地。您的应用程序运行所依赖的任何东西都应该受到控制和管理，以最大限度地减少(如果不能完全消除)冲突。

### 3.配置–在环境中存储配置

配置，因为它与 API 键、服务和数据库凭证相关，所以不应该硬编码。这可以防止您的应用程序面临生产数据泄漏和生产错误的风险。不要硬编码这些信息，而是依靠环境变量来处理这些敏感信息。

### 4.后台服务–将后台服务视为附属资源

后备服务需要网络连接才能运行。这是现代应用程序开发中一个非常流行的范例，尤其是随着微服务架构的流行而流行。12 因素应用程序方法建议开发人员不加分析地对待这些服务，这意味着无需进行任何代码更改就可以进行更改或修改。

通常，这个因素最好通过 API 调用每个支持服务来处理，凭证存储在运行时环境中的配置文件中。

### 5.构建、发布、运行——严格分离构建和运行阶段

构建、发布和运行阶段应该完全区别对待。自动化和工具化将有助于简化这一原理。这可以通过使用现有工具来完全自动化您的构建过程来实现。像 Github 这样的工具可以用来标记你的最新版本，而 Jenkins 可以用来自动化你的发布阶段。

### 6.流程——将应用程序作为一个或多个无状态流程执行

无状态应用程序被设计成优雅地降级。这意味着如果依赖失败，应用本身不会失败。单点故障可能很难避免，但并非不可能。12 因素应用程序方法学建议将数据存储在运行代码之外，以防止操作问题和调试噩梦。

### 7.端口绑定–通过端口绑定导出服务

所有的应用服务都应该可以通过 URL 访问。对于 web 应用程序，这个过程是自动发生的。这使得 12 因素应用程序完全独立，避免了依赖各种运行时注入方法来创建面向 web 的服务。

### 8.并发性——通过流程模型向外扩展

应用程序中的每个进程都应该被视为一等公民。这意味着每个进程应该能够在需要时伸缩、重启或克隆自己。这种方法将从整体上提高应用程序的可持续性和可伸缩性。

### 9.一次性——快速启动和正常关机，最大限度提高耐用性

正如前面提到的，将进程视为一等公民意味着更容易启动和关闭进程。相比之下，在应用程序中，所有进程都捆绑在一起，启动和关闭进程可能需要几分钟时间，具体取决于进程的大小。

为了确保您的启动和关闭过程保持无缝，请尝试针对速度和性能进行优化的可靠服务。像 RabbitMQ、Redis、Memcached 和 CenturyLink 自己的 [Orchestrate](https://www.ctl.io/orchestrate/) 这样的数据库和缓存只是为帮助这一因素而构建的几个服务。

### 10.开发/生产对等–尽可能保持开发、试运行和生产的相似性

一致性是满足这一因素的关键。当您的环境相似时，测试和开发会变得简单得多。相似的环境意味着确保诸如基础设施堆栈、配置管理流程、软件和运行时版本以及部署工具等领域在任何地方都是相同的。

使用这种方法，更少的错误会进入您的生产环境，因为您的测试用例可以应用于生产级别的数据。

### 11.日志–将日志视为事件流

日志对于调试和检查应用程序的总体健康状况非常重要。同时，您的应用程序不应该关心这些信息的存储。相反，这些日志应该被视为由单独的服务捕获和存储的连续流。

### 12.管理流程–将管理任务作为一次性流程运行

一次性管理进程本质上是用于收集应用程序关键信息的数据收集作业。评估您的生产环境的状态将需要这些信息，因此确保这些一次性过程在您的生产环境中发生是很重要的。这样，您需要的数据和来自可见的长时间运行的生产应用程序的数据之间就不会有差异。

在[的 12 因素应用方法网站](http://12factor.net/)上，这些因素中的每一个都链接到一个有深入主题概述的部分。虽然看到 12 因素方法的深思熟虑令人印象深刻，但几乎没有关于如何才能最好地建立一个能够最好地处理如此严格的要求的基础结构的信息。

但是有一种方法可以有效地做到这一点，那就是使用一个基于 12 因素应用方法论的工具:AppFog

## AppFog、应用程序和您

AppFog 是一个 PaaS，旨在为您提供满足 12 因素应用方法所需的工具。AppFog 管理网络资源、中间件、操作系统、虚拟化、服务器、存储和运行时。你需要做的就是专注于编写你的代码。AppFog 由 CenturyLink Cloud 提供，依靠通用的开源云铸造平台。

开始使用 AppFog 非常简单，只需登录 CenturyLink 控制面板，通过添加一个定义代码托管位置的区域来启用 AppFog 服务。从那里，您可以使用 Cloud Foundry CLI[将您的应用程序部署到 AppFog](https://www.ctl.io/knowledge-base/appfog/deploy-an-application/) 。

然后，Cloud Foundry 管理您的应用程序的运行时、中间件和操作系统环境。此外，负载平衡、应用运行时和流式应用日志记录等任务从开发流程中抽象出来，完全由 Cloud Foundry 提供的云基础架构处理。

这就是整个过程。一旦您的应用程序被部署到 AppFog，您所有的基础设施难题都迎刃而解。现在，您可以专注于应用程序的代码库了。

## 将 AppFog 与 12 因素 App 方法联系起来

您的代码库、依赖项、配置和支持服务是与您的应用程序及其数据相关的 12 因素原则。这意味着它们最好由开发人员来管理。

几乎所有关于你的应用程序的其他事情都可以通过 AppFog 来处理，因为 AppFog 是按照 12 因素应用程序方法论来构建的。例如，一旦部署了代码库，并发性、可处置性和日志记录都由 AppFog 自动管理。事实上，AppFog 管理所有硬件、软件补丁、更新、物理和软件安全，以及任何日常的常规操作任务。

虽然一些 12 因素应用程序原则可能需要少量的思考和配置来设置，但当您将应用程序部署到 AppFog 时，大多数原则都可以无缝处理。AppFog 不仅使这一过程变得更加容易，该团队还为您可能有的任何问题提供了大量的文档和支持。您可以在 [CenturyLink 的知识库](https://www.ctl.io/knowledge-base/appfog/#1)中找到所有相关文档。

构建 12 因素应用程序可能是一个具有挑战性的过程，但 AppFog 已经为您完成了大部分艰巨的工作。剩下您要做的就是编写代码并进行部署。

有关 12 因素应用方法以及 AppFog 如何使其变得更简单的其他资源，请务必查看 [AppFog 的深入解释](https://www.ctl.io/blog/post/appfog-and-twelve-factor-apps-explained/)。

## 结论

12 因素应用程序方法是一个出色的蓝图，提供了部署可靠的 SaaS 产品的每个必要步骤。虽然管理所有这些步骤(并选择正确的服务来完成这些步骤)可能会非常困难，但 AppFog PaaS 使这一过程更加顺畅，照顾到应用程序的各个方面，如并发性和可处置性，因此您可以专注于编写优秀的代码，为您的用户提供特殊的东西。

难道你不想专注于开发你的应用程序，给你的客户带来“快乐”，而让 AppFog 去处理其他的事情吗？

## 分享这篇文章