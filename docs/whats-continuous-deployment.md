# 什么是持续部署？

> 原文：<https://www.sitepoint.com/whats-continuous-deployment/>

几千年前，在人们住在房子里之前，当恐龙还统治着地球的时候，软件开发花了很长时间。首先，你做了设计(弄清楚你想做什么，以及如何去做)。然后你写了代码。然后你做了测试(项目的这一阶段，人们假装在看你创造的东西，但实际上并没有注意)。这会导致你所做的事情发生变化，有时是剧烈的变化。最后，你把所有东西都转移到生产中，并投入使用(也称为最终测试，因为现在人们被迫关注)。

然后敏捷出现了。还有 Scrum。和精益。如果整个周期(设计、编码和测试)被压缩，而不是花几个月的时间把东西送到用户手中，可能会更好。

这个方向的最后一步(到目前为止)被广泛地称为极限编程，所有的编码要么在高空完成，要么在滑板上完成。作为其中的一部分，我们将部署阶段添加到快速周转周期中。这就是持续部署的用武之地。本质上，持续部署背后的思想是，一旦功能被编码和测试，它就被转移到生产中，这样它就可以被使用(也就是说，真正地被测试)。

## 各种连续选项

如果你认为你的生活足够复杂，那么你可能想要假装这个特殊的部分不存在。有许多相似但不同的术语(尤其是当你和专家交谈时)描述了所有这些。拿出晕船药坚持住。

如果你用谷歌搜索“持续部署”，你会看到许多关于持续集成和持续交付的参考。它们听起来一样，但是，如果你听听专家的意见，它们真的非常不同(这意味着它们真的非常相似)。

持续集成实际上指的是流程的前端；在开发环境中构建、集成和测试代码。

连续部署被描述为通过部署管道的每个变更都被自动加载到生产中。

另一方面，连续交付是指所有的事情都经过管道，但是您可以选择何时发生，而不是像连续部署那样一直进行。

## 持续部署的优势

持续部署的第一个优点是，它延续了敏捷对小规模任务的关注，有助于降低部署工作的复杂性。也就是说，移动一个模块和两个文件比移动 50 个模块和 100 个文件更容易，这有望减少部署失误。

第二个好处是，它使得你和你团队中的其他人不太可能把你的任务搞得一团糟。如果您在一个拥有许多开发人员的大型组织中，但您不在一个给定的开发人员对给定的应用程序拥有完全且唯一的控制权的情况下，这一点尤其正确。模块在推出到生产环境之前被检出和处理的时间越短，两个开发人员检出并分别更新同一个模块的可能性就越小。

## 持续部署的缺点？

众所周知，每朵玫瑰都有刺，对吗？所以持续部署肯定也有一些缺点。

对于外行人来说(这包括我曾经工作过的每一个经理)，持续部署是“质量差的代码被扔在那里，让用户为自己的生命而游泳”的代码。但事实是，持续部署的意思恰恰相反。基本的假设是，您快速部署的代码将是干净的。要做到这一点，需要一个有重点、有纪律的方法。持续部署不适合黑客或不真诚的人。

一些人说的另一件事是，虽然这可能是一个好想法，但持续部署太复杂了，很难做到。这是有一定道理的。如果您每天自动地将新代码多次转移到生产环境中，并且没有任何问题，那么一定会有一些复杂性。但我没有看到任何人抱怨新宝马的复杂性，当它在红灯时停下来，然后又自动恢复时，发动机会停止工作，所以我们都应该能够同意，只要它能工作并产生良好的结果，复杂性是可以接受的。

## 持续部署入门

那么做持续部署需要什么呢？除了孩子单纯的信仰。不幸的是，持续部署不仅仅是一个你可以随便实现的想法。你需要一些坚实的程序和背后的软件。

首先，你需要一个集成环境。这是一个复制生产环境的服务器，为您提供可以在其中测试的东西。

第二，你需要一整套测试脚本(这是很多人的症结所在)。我们编写了一个新的脚本，运行了几个显而易见的东西，然后我们就可以开始了。谁跟踪测试？但是当谈到持续部署时，这太危险了。您需要一套完整的测试脚本来发现所有的错误。如果你没有这个，那就别费劲了。

第三，您需要一个通常被称为“构建软件”的软件，它可以自动将新代码与现有代码放在一起，运行测试脚本，通知您任何问题，然后，如果一切顺利，将新代码推入您的生产和测试环境。这方面的例子包括巡航控制，詹金斯，BuildBot，竹等。

## 结论

我不想任何人被愚弄。任何事情都不容易实现。这需要真正的承诺。它需要详尽的测试脚本。它需要复杂的软件来使其自动化(从而实用)。但是对于在多开发人员环境中的人来说，对用户需求的响应是很重要的，变化的速度和可靠性也是很重要的——持续部署可能会成为你新的最好的朋友。

<small>图片 via[Fotolia](http://us.fotolia.com/?utm_source=sitepoint&utm_medium=website_link&utm=campaign=sitepoint "Royalty Free Stock Photos at Fotolia.com")</small>

## 分享这篇文章