# 你的 PHP 可读性如何？

> 原文：<https://www.sitepoint.com/how-readable-is-your-php/>

今天新发布了一个关于[吸烟吸太多 PHP](http://www.akbkhome.com/blog.php) 的帖子，题为[PHP 六大罪，本周……](http://www.akbkhome.com/blog.php/View/101/Six_deadly_PHP_sins_this_week.html)。这篇文章为 PHP 开发人员提供了一个快速的提示列表，告诉他们为什么一定要在代码中避免使用。

其中一个条目的标题是*每个变量都应该从某个地方开始*。在之前的一篇博客文章中，我提到了试图阅读一些代码并问自己，‘这个变量*来自哪里？!'。艾伦将 PHP 语言结构如 [extract](http://au.php.net/extract) 和 [eval](http://au.php.net/eval) 贴上“邪恶”的标签，因为它们伪装和混淆了代码。那个[不是](https://www.sitepoint.com/the-problem-with-extract/) [新闻](https://www.sitepoint.com/eval-is-dead-long-live-eval/)。然而，他提出了一个有效的观点——使用这些类型的快捷方式本身并不是一个安全问题——当你的代码太难理解并且你无意中引入了额外的问题时，就会出现安全问题。*

以 register_globals 为例。register_globals 特性本身并不是一个安全问题，但是它使得理解和审查代码变得更加困难，这一事实很容易导致整个代码出现安全漏洞。PHP 手册[指出](http://www.php.net/manual/en/security.globals.php)‘register _ globals 将注入(毒害)你的脚本中的各种变量’，这意味着‘编写不安全的代码要容易得多’。

当用 PHP 开发时，可以采取以下步骤使您的代码更容易理解。

不要让你的代码过于复杂。如果你可以选择用一行或四行来做某件事，选择最容易阅读和理解的，而不是占用较少空间的。对变量命名采取类似的方法。名为$j 的变量比名为$paying_customers 的变量更容易混淆。

将代码分成小的、独立的函数(或方法)。当一段代码自包含在一个函数中时，它受益于该函数的局部变量范围。如果这个函数只有 20 到 30 行(包括注释)，它可以一次显示在屏幕上，因此很容易看到每个变量来自哪里。如果你想知道某个东西是在哪里被初始化的，如果它的声明/初始化都发生在它被使用的地方的一页之内，你就不必去寻找它(或者放弃并信任它)。当然，使用[全局](http://au2.php.net/global)关键字否定了这个好处。

注释您的代码。PHP 新手(或任何语言的新手)的一个常见问题是“我应该使用多少注释？”。这个问题没有正确的答案，花了一些时间维护其他人的代码的有经验的程序员可能比大多数人更清楚。我建议对于每一个方法或函数，你要确保清楚预期的参数类型，返回值(如果有的话)的含义，以及使用该方法需要知道的其他任何东西。目的和返回值应该从函数/方法的名字中清楚地表达出来，但是为了消除任何疑问，对它进行注释是没有坏处的。如果方法应该是“private ”,您应该指出这一点。如果应该静态调用该方法，您应该指示。除此之外，每当你做了一些复杂的事情时，你应该插入一个行内注释。注释样式是热门话题，就像编码样式(空格还是制表符？).有一件事是肯定的，那就是你应该注释你的代码。对代码进行注释可以更容易理解它是如何工作的，从而更容易在以后检查它并确保它是安全的。

不幸的是，可以理解的是，许多难以理解的代码是懒惰或不切实际的期限的结果。请记住，不管项目的当前规格如何，它都可能在未来发生变化，当这种情况发生时，有人会检查您的混乱代码，并试图改变它的方向和目的。如果代码是自解释的，那么修改它会容易得多，而且这样做也不太可能引入新的安全问题。

确保您的代码易于阅读和理解是编写安全代码的第一步，在我看来也是最重要的一步。

## 分享这篇文章