# 社论:我们正在走向包装经理疲劳症吗？

> 原文：<https://www.sitepoint.com/package-manager-fatigue/>

这是我最新的 JavaScript 时事通讯的社论，你可以在这里订阅。

在过去的一周里，脸书发布了新的 JavaScript 包管理器 Yarn，引起了巨大的轰动。当我第一次听到这个的时候，你的第一反应可能和我相似:难道另一个包管理器不是我们最不需要的吗？！看起来，尽管似乎永无止境的新框架出现了剧变，JavaScript 社区至少已经将 npm 确定为事实上的包管理者。

但是等等，在你在 Twitter 或你的博客上谴责包经理疲劳之前，Yarn 实际上并没有那么糟糕。首先，Yarn 并不是一个新的包存储库:它更像是 npm 客户机的替代物，旨在改进 npm 的一些缺点。作为一个额外的奖励，它不仅可以与 npm 包一起工作，还支持 Bower！切换到一个包含 package.json 或 bower.json 文件的项目文件夹，运行`yarn`，就可以开始工作了。

"好吧，但是我不用 Bower，那我为什么要换成 Yarn 呢？"我听到你问了。嗯，Yarn 团队构建它是为了解决他们在脸书内部项目中使用 npm 时遇到的速度、可靠性和安全性问题。为了实现这一点，Yarn 生成了一个锁文件，帮助它准确地跟踪每个依赖项是如何被解析的。

锁定文件的好处之一是加快了安装时间。到目前为止，我已经看到了一些不同的说法，关于它有多大的区别(在某些情况下，是否有区别)，但是在 Yarn 和 npm 之间有一些非常有趣的比较。Yarn 做的另一件不同的事情是保存下载包的缓存，使得重新安装速度惊人。这也意味着它们可以离线完成。

另一个重要的考虑是确保一个项目可以被可预测地安装在不同的机器上。Yarn 使用一种确定性算法来确定需要哪些依赖项，以确保它们总是以相同的顺序安装。这避免了潜在的难以调试的错误，这些错误有时会在 npm 中出现。

纱线还提高了安装过程的可靠性。失败的依赖关系请求将排队等待重试，而不是中止安装。智能地处理请求队列，以并行化请求并最小化下载时间。

如果你真的想简化你的项目，Yarn 提供了执行平面安装的选项。您的项目中可能有多个依赖于特定库的不同版本的包。通过选择平面安装，Yarn 将提示您每个软件包需要多个版本，并允许您手动选择要安装的版本，从而避免在不同版本中需要多个副本。

浏览一下[CLI 文档](https://yarnpkg.com/en/docs/cli/)是值得的，因为还有其他一些有趣的命令可用。运行`yarn why <package-name>`将让您知道为什么安装了一个特定的包，它占用了多少空间，以及它使用了多少共享依赖项。`yarn clean`仍然是实验性的，但是会尝试从 node_modules 文件夹中删除不需要的文件，并回收一些磁盘空间。另一个可能有用的命令是`yarn licenses`，它将列出您的项目正在使用的每个包的许可类型。

对于那些担心 Yarn 分裂生态系统的人来说，值得指出的是，这绝不是第一个第三方 npm 客户端。npm 的维护者认为这是一个积极的发展，称这表明脸书“投资并致力于 npm 社区的持续健康发展”。这对各地的 JavaScript 开发者来说是个好消息。”

## 分享这篇文章