# 什么是 HTTP/2？

> 原文：<https://www.sitepoint.com/what-is-http2/>

HTTP/2 是超文本传输协议(HTTP)的最新发展。HTTP 是用于请求和接收万维网上的页面和数据的网络协议。这项新技术最终将取代二十多年前标准化的 HTTP/1.1。

*本文是与 [SiteGround](https://www.siteground.com/go/article-sp) 合作创作的系列文章的一部分。感谢您对使 SitePoint 成为可能的合作伙伴的支持。*

![HTTP/2 network protocol](img/f8a5e21d34de0072051d19c500bce3ad.png)

## HTTP/2 和 HTTP/1.1 有什么区别？

或许 HTTP/2 更好理解的是它的原名:HTTP/2.0。它源于谷歌在 2009 年设计的 SPDY(发音为 speedy)协议。

HTTP/1.1 有几个问题。它是在网页很少超过 100Kb，CSS 不可用的时候创建的，尽管 JavaScript 已经被引入，但它很少被用于基本的表单验证或简单的效果之外的任何事情。高带宽、基于 Ajax 的单页面应用程序和客户端框架还需要很多年。没有人能想象页面会发出多个请求。

HTTP/2 的主要目标是减少延迟。这需要一点技术，但效率是通过使用几种技术实现的…

### 1.HTTP/2 是二进制数据

HTTP/1.1 使用文本数据，这在网络中通常效率较低。

### 2.HTTP/2 标头被压缩

随请求发送的信息描述了数据、其来源、类型、长度、可以缓存多长时间等。与 HTTP/1.1 不同，这在 HTTP/2 中是压缩的。

### 3.HTTP/2 使用流水线技术

在 HTTP/1.1 中，服务器必须按照接收请求的顺序发送响应。HTTP/2 是异步的，所以可以更快地处理较小或较快的响应。

### 4.HTTP/2 是多路复用的

在 HTTP/1.1 中，任何时候在一个 TCP 连接上只能处理一个请求。浏览器通常会打开 4 到 8 个连接，但是大或慢的资源会导致其他文件的下载延迟。HTTP/2 允许多个请求和响应消息同时出现在同一个(单个)连接上。

### 5.HTTP/2 实现了服务器推送

服务器可以在请求资产之前发送资产。例如，您可以在网页底部引用一个脚本。在 HTTP/1.1 中，浏览器将下载 HTML，解析它，然后在遇到它的`<script>`标签时加载 JavaScript 文件。HTTP/2 服务器可以在知道需要 JavaScript 文件之前将它推送到浏览器。

## HTTP/2 是否明显更好？

结果会因系统而异，但是使用 HTTPS 测试工具的 [HTTP/1.1 与 HTTP/2 相比，通常报告 HTTP/2 快 10 倍，尽管是通过安全连接进行的。](https://www.httpvshttps.com/)

## HTTP/2 今天还能用吗？

是的。但是，HTTP/2 仅在 web 服务器和浏览器都支持该协议时才启用。当任何一端出现故障时，连接通常会退回到 HTTP/1.1。2016 年底，排名前一千万的网站中，几乎有 11%支持 HTTP/2。所有最新版本的 Firefox、Safari、Edge、Chrome 和其他基于 Blink 的浏览器都支持该协议。

您可以通过在 keycdn.com 提供的 [HTTP/2 测试工具中输入您网站的网址来测试您的主机是否启用了 HTTP/2。](https://tools.keycdn.com/http2-test)

如果您使用托管或共享主机，您的主机可能需要启用 HTTP/2。有些人可能会让你选择打开或关闭，所以如果你不确定，请直接联系他们。

理想情况下，最好使用默认启用 HTTP/2 的 web 主机，比如我们的托管合作伙伴 [SiteGround](https://www.siteground.com/go/article-sp) 。它们支持所有服务器上的 HTTP/2，无需进一步操作。此外，他们有免费的让我们加密 SSL 证书——这是使用 HTTP/2 时必须的，因为大多数浏览器只支持加密的 HTTP/2。

如果您运行自己的专用或虚拟服务器，那么无论您使用哪个 web 服务器，都需要启用 HTTP/2。大多数直接支持该协议，或者有可安装的模块。这包括 Apache，nginx，LiteSpeed，微软 IIS 和 Node.js/Express，但请注意，功能可能会有所不同。例如，nginx 在编写时不支持 HTTP/2 服务器推送。有关更多信息，请参考您的文档。

## 我需要更新我的网站吗？

否— HTTP/2 向后兼容 HTTP/1.1。然而，在更高效的 HTTP/2 世界中，您今天使用的一些好的开发实践可能会变成反模式。

您可能使用构建系统或手动过程来:

*   将多个图像转换成一个单一图像精灵
*   HTML 页面或 CSS 文件中的内嵌图像
*   将 CSS 和 JavaScript 连接并缩小成单个文件。

减少请求的数量对 HTTP/1.1 连接有好处，但是大量的 HTTP/2 请求的开销要小得多。交付多个文件可能更好，因为如果一个文件发生变化，您只需要发送更新。

您也可以将资产移动到不同的域或 cdn，以允许更多的开放 HTTP/1.1 连接。这对于 HTTP/2 来说是不必要的，因为您可以在一个连接上发出任意多的请求。由于需要打开额外的 DNS 查找和 TCP 连接，单独的域可能会损害性能。

也就是说，我推荐一种务实的方法。串联很少会是一个问题，除非你合并的是大的源文件，这些文件很容易有规律的变化。保留您的构建过程，除非您可以证明大部分用户可以使用 HTTP/2，并且多个文件或单个域可以提供显著的性能提升。

## 分享这篇文章