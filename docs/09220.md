# 你应该使用内容交付网络吗？

> 原文：<https://www.sitepoint.com/should-you-use-a-cdn/>

如果你一直在关注我最近的帖子，使用内容交付网络的 7 个理由和不使用内容交付网络的 7 个理由，你会感到非常困惑，甚至可能会完全放弃这个网页游戏。

*“我应该使用 CDN 吗？”*是…
**看情况。**

在一些明确的情况下，应该避免 CDN:

1.  您正在构建一个不需要外部访问互联网的内部网应用程序。
2.  安全性或隐私是重中之重，例如银行应用程序，您需要完全控制所有源文件和服务器位置。
3.  您正在为一家公司或国家构建一个应用程序，该公司或国家已知会阻止特定的域或 IP 地址范围。

如果您的应用需要安全的 HTTPS 协议，您对 CDN 的选择也会受到更多限制。

cdn 给流量相对较小的网站带来的好处较少。假设您不需要高带宽的视频或音频文件，将所有文件放在一个地方可能更简单。

## 小型本地与大型 CDN 文件

对于更繁忙的站点，cdn 可以显著提高性能并节省成本。但是，要注意文件优化问题。比如从 CDN 加载完整的 300Kb JavaScript 库好还是从本地服务器加载优化的 50Kb 版本好？

我会倾向于选择较小的本地文件——尤其是当相当比例的目标受众使用移动设备时。较小的文件比许多使用 CDN 的理由更重要；它将下载更快，执行更快。

## A/B 性能测试

如果时间和预算允许，你可以考虑 A/B 测试。您需要实现一个解决方案，为个人用户提供基于 CDN 的或本地托管的网页版本。一小段 JavaScript 可以记录真实的下载和渲染速度，并使用 Ajax 或类似方法将结果发送回服务器。根据您的流量情况，您可以通过运行一周的本地版本，然后运行一周的 CDN 版本来简化这一过程。

例如，如果大多数用户使用较慢的连接，并且在物理上靠近主服务器的位置，那么 CDN 的效率可能会较低。

## 两全其美？

与 cdn 相关的几个问题可以通过回退来解决。如果由于 CDN 被阻止或不可用而无法下载文件，系统可以求助于本地版本。同样，这需要更多的开发，但会增加任务关键型系统的可用性。

## CDNs 和渐进增强

总会有一些资源对于页面来说不是绝对必要的，例如背景图片、JavaScript 小部件、一些 CSS 重置等等。

考虑网络字体。谷歌的网络字体 CDN 是一个伟大的系统，如果服务变得不可靠或失败，你不会遇到什么问题。如果字体无法加载，网站可以回退到普通字体。

## 包扎

cdn 是一个非常有用的资源，但是记住要考虑后果。实际上，如果从公共 CDN 加载 jQuery、HTML5 shim 和字体文件，大多数网站都会受益。对于更繁忙的网站来说，私有 CDN 的速度提升和成本节约是不容忽视的。

## 分享这篇文章