# 重新审视持续部署

> 原文:[https://www.sitepoint.com/continuous-deployment-revisited/](https://www.sitepoint.com/continuous-deployment-revisited/)

在之前的一篇文章中，我谈到了什么是持续部署，以及它如何适应现代编程过程。我们稍微分析了一下它的工作原理，但是有些人(好吧，只有一个人)认为我可以讲得更详细一些，他们是对的。因此，这里更详细地描述了持续部署如何在战场上发挥作用，以及它如何改变你的生活。

持续部署的本质是您使用自动化工具来完成大量繁重的工作。这意味着当你第一次开始时，可能会有一点学习曲线，也可能没有。许多软件元素都发挥了作用，如果你已经知道如何使用它们，那太好了。如果你没有，只要记住这是一个学习曲线，而不是一个障碍。

## 版本控制

您要做的第一件事是建立一个基线系统，通常通过使用版本控制。随着持续的部署过程每天都会产生新的软件版本，拥有一个人们可以测试的通用更新版本是至关重要的。您可以自己跟踪您的代码修订，就像您可以构建自己的汽车一样，但是大多数人选择版本(或修订)控制系统。每个人都有自己特别喜欢的，尽管现在 Git 似乎是最受欢迎的。

我不会在这里讨论 Git，但是 SitePoint 上已经有十几篇文章了，比如 Mark Cippola 的 [Git: A Designers Primer](https://www.sitepoint.com/git-a-designers-primer/) 和 Sean Hudgston 的 opus[Git 简介](https://www.sitepoint.com/introduction-to-git-1/)。哦，我差点忘了杰斯·吉纳维芙·布朗的[Git](https://www.sitepoint.com/get-started-with-git/)入门。我喜欢突出使用中间名的作者。我总是在想，如果薇拉·凯瑟在出版《啊，拓荒者》之前没有放弃她的中间名伊维特，会发生什么事情呢？。

当然，您还需要一个环境，一个生产系统的克隆，应用程序可以在其中运行和测试。我们大多数人可能已经有了一个可靠的测试系统，但是如果你没有，那么你需要一个。

底线是:获得一个版本控制系统，并找到一种定义基线系统的方法。这将随着每次持续的部署更新而改变，但是您需要一个大家都同意是黄金标准的系统。

## 致力于自动化测试

接下来你需要的是做一些大联盟测试的能力。持续部署的本质是让代码随时更新，而不仅仅是在一个季度末。但是另一个方面是不仅要产生代码，还要产生好的代码，基本上是没有错误的代码。为此，你需要测试。

我不是在说像我和孩子们过去那样的测试，做我们能想到的任何事情，并希望这就足够了(当然，这从来都不是)。不，我说的是一些真正的精细测试，自动测试来测试你的代码。

PHPUnit 包含大量可以在代码上执行的标准测试(断言)。如果有问题，会生成一条异常消息，让您知道问题。

断言是您将实际构建到软件中的检查。在 PHPUnit 拥有的非常优秀的文档中，它讲述了如何通过简单地打印出代码产生的值来检查代码的有效性，但这是一种非常手工和原始的测试代码的方式。从那以后，您就可以开始编写代码了，这样代码本身就可以确定是否有问题，并打印出适当的消息。这不需要您查看值，自动化程度更高。最后一步是增加测试的复杂性，并且只在出现问题时才生成消息。

SitePoint 上也有很多与 PHPUnit 相关的文章，从 Michelle Sanver 的[入门 PHPUnit](https://www.sitepoint.com/getting-started-with-phpunit/) 开始。其他的包括 Matt Turland 的[用 PHPUnit 进行错误条件测试](https://www.sitepoint.com/testing-error-conditions-with-phpunit/)，Chris Cornutt 的《用 PHPUnit 和[在 PHP 中进行单元测试简介:了解 PHPUnit 断言](https://www.sitepoint.com/be-more-asssertive-getting-to-know-phpunits-assertions/)。还有一些文章涉及 PHPUnit 如何与各种框架和其他软件交互。

## 构建软件

最后，您需要一个通常称为“构建软件”的软件，它可以自动将新代码与现有代码放在一起，运行测试脚本，通知您任何问题，然后，如果一切顺利，将新代码推入您的生产和测试环境。这方面的例子包括巡航控制，詹金斯，BuildBot，竹等。

Jenkins 很受许多开发人员的欢迎，SitePoint 上有几篇与它相关的文章，从 J. Armando Jeronymo 的两部分系列文章[持续集成 Jenkin](https://www.sitepoint.com/continuous-integration-with-jenkins-1/) 开始。这也是一篇非常好的关于连续材料的文章。

不管你用什么，这里的关键词是“自动”。如果需要五个人花两天时间来更新你的网站，那么每晚更新并没有什么好处。速度很重要，但缺少人的参与也很重要。简单的好，自动的更好。

## 结论

持续部署/交付/集成不适合胆小的人。它要求很高，有很多规则和要求，必须遵守，或者你能拼写 D-I-S-A-S-T-E-R 吗？但是对于有许多开发人员的团队，特别是远程开发人员，并且业务需要在非常快速和持续的基础上更新代码，这可能是唯一的游戏。

## 分享这篇文章