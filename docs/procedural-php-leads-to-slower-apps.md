# 过程化 PHP 导致应用程序变慢

> 原文：<https://www.sitepoint.com/procedural-php-leads-to-slower-apps/>

在读完 [OOP 和 Performance](https://www.sitepoint.com/blog/) 之后，克里斯托弗·汤普森理所当然地说我虚张声势(见[评论](https://www.sitepoint.com/blog/))，引发了进一步的讨论，迫使我更加努力地思考。

在“面向对象和性能”中，我并没有试图说什么绝对的东西，而是描述了我的一般直觉。虽然我挑选了两个个人的例子，其中效果可以并且已经作为实现细节被忽略，但直觉实际上来自于多年来对开源 PHP 应用程序源代码的总体印象和记忆，这些应用程序主要是用过程代码编写的。这并不是说没有任何狗一样慢的面向对象应用——肯定有。

无论如何，我不想再废话了，我要大胆地说*过程化 PHP 导致应用程序变慢*(所以我可以把它砍掉；)).我感到自信的原因是我认为我已经接受了挑战，这将有助于事情变得不言自明。任何 Perl / Python / whatever 程序员都要注意——在某种程度上，这是 PHP 特有的*,其中脚本本身不定义单独的变量范围，类是构建抽象的唯一干净的方式。*

 *所以现在开始。我将通过提供顶部和底部来定义单个脚本的输入和输出。如果你有时间/兴趣，迁就我一下，实现中间的部分，第一次不使用类，第二次使用类/ OO。

在这个脚本的顶部我们有:

 `array(1,2),
'y'=>array(3,4),
'z'=>array(5,6),
);
}`

`// This variable controls how the output is rendered
// Allowed values 'html','xml', 'plain'
$output_type = 'html';`

(您的代码放在这里)

…然后在底部我们有；

 `// output place in this variable
echo $result;`

当然有一些规则和要求…

**需求**

–＄dataset 1 应向用户显示在＄dataset 2 上方的

 *–根据输出变量的值，脚本必须能够呈现 HTML、XML 和纯文本(空白格式)

–每个数据集都应该显示某种标题(如表格标题),告诉用户它是什么。

**规则**

–您可能不包括任何外部 PHP 脚本–它必须都在一个脚本中

–您不能读取或写入任何外部文件(特别是您不能使用模板或代码生成)

–在变量中放置函数名属于“hack”的范畴，使用 PHP 的 create_function()也是如此

–在最后一条语句之前，不应输出任何内容:echo $ result

–尽可能快地编写代码–不要花太多时间考虑解决方案。

–在完成之前，不要进行任何基准测试

尽管有规则，我认为这个例子很好地代表了构成典型 PHP 应用程序大部分的代码类型。

事实上，我希望有人能提出一个程序性的解决方案，总体来说基准测试最快，但不会太快。同时，我认为这将说明为什么过程代码更有可能以交付相对较差的性能而告终。** 

## **分享这篇文章**