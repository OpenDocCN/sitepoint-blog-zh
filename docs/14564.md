# 使用 Webmin 进行 Linux 管理，第 1 部分和第 2 部分

> 原文:[https://www.sitepoint.com/webmin-linux-administration-1/](https://www.sitepoint.com/webmin-linux-administration-1/)

管理基于 Linux 和 Unix 的服务器不一定是你工作中的灾难。作为你的武器库的一部分，有一个叫做 Webmin 的便利工具，你可以通过网络浏览器重新获得对你的服务器的完全控制。

这是一个由两部分组成的系列。在第 1 部分中，我们将回顾 Webmin 的范围以及它如何帮助 Web 开发人员进行域管理的服务器管理。在从这里开始的[第 2 部分中，我们将看看 Webmin 用于服务器维护的几个附加特性，以及一些使用它的技巧。](https://www.sitepoint.com/webmin-linux-administration-1/)

[直接跳到第 2 部分](https://www.sitepoint.com/webmin-linux-administration-1/)，或者继续阅读第 1 部分…

由 Jamie Cameron 开发的 Webmin 充当服务器上底层应用程序的综合接口，包括支持配置 ftp、ssh、邮件、Web、数据库等应用程序。与其他控制面板不同，核心 Webmin 界面面向对其服务器具有 root 访问权限的系统管理员，并包括一个基于用户的包，使您的用户(或客户端)能够在有限的范围内访问他们自己的域、电子邮件等。Webmin 支持在 SSL 下运行。

该应用程序运行在自己的小型 Web 服务器上，因此即使您的主要 Web 服务器软件没有运行(如 Apache 等),也可以使用。)，由许多基于 Perl 的应用程序提供支持，这些应用程序直接与您的系统配置文件交互。根据 Webmin 的说法，整个解决方案构建在 Perl 5 之上，没有使用非标准的 Perl 模块。

开源在实践中的魅力在 Webmin 的模块系统中得到了体现。尽管核心系统是由卡梅伦构建的，但除了 Webmin 附带的基本组件之外，许多人还贡献了补丁、非英语翻译和大量第三方模块。这些额外的模块可以在 http://webmin.thirdpartymodules.com 找到。

##### 入门指南

要开始，请到[www.webmin.com](http://www.webmin.com)下载最新版本。您可以为 Red Hat 和支持二进制安装的相关系统使用 rpm，或者您可以从源代码构建 Webmin。webmin 支持大量 Unix 变体，包括 OS X。要安装 rpm，只需打开一个终端会话，并在下载 Webmin 的目录中键入 rpm-IVH Webmin *(作为根用户)。

##### 从源安装

如果您是从源文件开始工作的，请从 Webmin 主页上的下载链接中选择 tar.gz。下载完成后，打开终端会话并运行以下命令:

```
Shell prompt # gunzip webmin-1.130.tar.gz 

Shell prompt # tar -xvf webmin-1.130.tar 

Shell prompt # cd webmin-1.130
```

您可以通过向该目录中包含的 setup.sh 脚本添加选项来自定义安装过程，然后在脚本执行时选择您的设置。要选择特定的目录(我推荐/usr 或/var 下的目录)，请使用:

```
Shell prompt /webmin-1.130]# ./setup.sh /var/webmin
```

系统将要求您选择以下设置(您可以接受显示的默认值，也可以对每个选项进行更改):

*   Webmin 配置目录
*   Webmin 将存储日志的位置
*   Perl 的路径
*   您的服务器操作系统(Webmin 在自动检测方面做得很好，会询问)
*   Webmin 将运行的端口(默认为 10000)
*   登录 Webmin 的用户名和密码
*   您的服务器的主机名——同样，Webmin 会尝试检测它
*   使用 SSL——应该只提示是否安装了 Perl 的 SSL 库(该作者没有在 SSL 下运行 Webmin)
*   是否希望 Webmin 用系统引导启动(强烈推荐)

##### 登录 webmin

一旦 Webmin 安装完毕，将你的浏览器指向运行 Webmin 的服务器。当然，这可以是本地或远程服务器。只需提供您选择的主机名和端口，即 http://hostname:10000。系统将提示您输入刚刚设置的登录信息。

一旦你进入，你会看到 Webmin 的欢迎屏幕和应用程序控制菜单。第一组选项允许您在 Webmin 中设置访问和安全权限。Webmin 配置选项使您能够全面、精确地控制 Webmin 在您的环境中的运行方式。

Webmin 包括一个内置模块，它检查系统的更新(从 Webmin 站点或您选择的站点)，并在执行时自动执行这些安装。

##### 用户最小

同样在这个欢迎屏幕上，您会看到一个名为 Usermin 的选项。如果您选择初始化 Usermin，您的用户(客户端)将可以基于浏览器访问他们在服务器上的帐户。如果没有安装 Usermin，Webmin 会提示您，并为您安装。它会将 Web 浏览器要访问的端口设置为 20000(即 http://hostname:20000)。

您决定您将提供的访问级别，这包括启用和/或禁用您的用户可用的模块，例如:

*   访问一个简单的网络邮件界面，并访问设置 Fetchmail
*   修改登录选项，包括密码、命令外壳、登录脚本等
*   应用程序访问 MySQL、Apache htaccess 文件、GnuPG 的有限视图，并能够从用户的帐户目录上传和下载
*   其他选项，比如浏览器中基于 Java 的文件管理器，访问系统上的帮助文档，以及以访问者的用户名访问 cron。

同样在 Webmin 屏幕下，您会发现可以链接到网络上运行 Webmin 的多个服务器。结合集群工具，该工具使您能够从一个界面跨多个服务器分发设置。

##### 进入你的系统

当您访问系统选项卡时，Webmin 的威力是显而易见的，如下所示。

![1349_webmin_system](../Images/fc4e458e84fdc0660f52d161542b5f10.png)

您可以控制在系统启动和关闭期间启动和停止哪些守护程序，可以访问所有运行级别，并且能够在启动和关闭时添加自定义应用程序。

此外，您还可以访问系统上任何用户的密码重置控件、cron 作业、运行进程的图形视图以及备份文件系统的工具。对于那些基于 RPM 系统的人来说，访问软件包将节省时间。在这里，您可以搜索安装在系统上的软件，搜索要安装在系统上的 rpm，甚至设置 Red Hat 网络来按计划实现关键更新。

可以在 Webmin 的这一部分配置和查看系统日志。它们提供了在终端中使用的 grep 和 tail 命令的图形视图，以查看诸如引导、邮件和用户之类的日志。

最后，添加和删除用户和组的能力，包括多个用户的批量导入，应该可以节省大量时间。我们将在本文后面的示例域设置中介绍这一点。

##### 驯服守护进程

对于 Web 开发人员来说，真正让 Webmin 变得无价的是 Servers 选项卡。如下图所示，您的控件包括:

*   街头流氓
*   绑
*   CVS
*   FTP (ProFTPD 和吴-)
*   邮件(Postfix、QMail 和 Sendmail，以及 Fetchmail、Procmail 和 Spam Assassin)
*   MySQL 和 PostgreSQL 数据库服务器
*   总监邮件列表管理器
*   SSH 服务器
*   用于网络流量分析的网站化器

![1349_webmin_servers](../Images/e12c20fc5831eeee1878eb587d45e5fb.png)

控制级别很高，包括对每台服务器的所有配置文件的完全访问，这可以节省大量命令行时间。

##### 添加新域

为了将 Webmin 付诸实践，我们将向服务器添加一个新的域。本节假设您使用基于名称的主机(一个 IP 用于多个域)。如果您正在添加一个新的 IP 地址，坚持住——我们将在本系列的第 2 部分中讨论这个问题。

##### 添加用户

首先，我们访问“系统”选项卡，并通过转到“用户和组”添加一个新用户。在这里，我们选择创建新用户。新屏幕让您可以完全控制用户名、密码、主目录和用户所属的组(即用户、邮件、FTP 等)。

设置新域时的常见做法是为域的基本主目录创建一个用户名。例如，所有站点都进入/home/sites，因此用户是 newdomain，路径是/home/sites/newdomain.com。该用户名将用于对域的 ftp 访问。

创建后，您可以返回用户和组屏幕，添加将拥有电子邮件帐户的用户。或者，正如我们稍后将看到的，如果该域不需要单独的 POP 帐户，您也可以简单地使用 Sendmail 将发送到该新域的所有电子邮件别名化为外部电子邮件帐户。

##### 将域添加到 Apache

在 Servers 选项卡下，单击 Apache(如下所示)将域添加到 httpd.conf 文件中，并设置标准或定制选项。

![1349_webmin_apache](../Images/f26fd259423f71e3d336a30c62a093b9.png)

为您提供了一个填空表格来添加您的新域。完成后，您可以直接单击列表中的域名来编辑特定的指令，如自定义日志文件路径、cgi 目录和其他特定于该域的选项。

完成后，只需在 Apache 主屏幕上单击 Apply Changes，Web 服务器就会正常重启。

##### 添加 MySQL 数据库

也许您的新领域将需要数据库服务。在本例中，我们可以向 MySQL 服务器添加新数据库“newdomain_db ”,并确保用户 newdomain 有权访问该数据库。在 Servers 选项卡下，只需点击 MySQL 即可访问 MySQL 管理工具。

![1349_webmin_mysql](../Images/c09b3b9d7cf7d1853ddba5178c6523a0.png)

按照屏幕提示创建新数据库；此外，访问用户权限部分，确保将 newdomain 的权限限制在 newdomain_db 数据库。

##### 正在完成 Sendmail

图形访问非常有用，尤其是对于新管理员。要在 Sendmail 中添加我们的新域(菜单如下所示)，我们只需将 newdomain.com 添加到本地域和垃圾邮件控制，并将用户添加到地址映射部分。

![1349_webmin_sendmail](../Images/dd095b5c4ee1f85b44517903df815fcb.png)

地址映射部分允许我们做两件事:

1.  确保发送到 newuser@newdomain.com 的所有邮件都发送给服务器上的新用户。

3.  允许用户将发送到多个电子邮件地址(newuser、sales、support、info @newdomain.com)的邮件全部转发给一个用户名，在本例中为 newuser。

输入所有这些更改后，需要重新启动 Sendmail——只需进入 Sendmail 主屏幕，停止并启动服务器。

正如您所看到的，Webmin 提供了对您的服务器的广泛的图形化访问，可以减少管理日常任务的压力和时间。在从下一页开始的本系列的第 2 部分[中，我们将继续查看 Webmin 的服务器配置和维护等内容。](https://www.sitepoint.com/webmin-linux-administration-1/)

##### 第二部分

Webmin 是一个强大的图形用户界面，用于*Nix 服务器的根访问、配置和管理。正如我们在本系列的第 1 部分中所讨论的，Webmin 对于需要管理系统管理员任务的 Web 开发人员来说非常有用，例如设置域和根据需要向客户端提供对服务器的有限访问。

在接下来的文章中，我们将深入探讨系统管理的几个方面，包括在服务器迁移期间使用 Webmin，以及微调您对系统安全性和资源的控制。我们还将讨论一些额外的技巧和技术来充分利用 Webmin。

##### 使用您的服务器

***调优你的网络服务器***

使用图形界面管理系统的好处之一是效率。然而，一个经常被提到的缺陷是 GUI(图形用户界面)和底层配置文件以及根级访问之间的脱节。

当以 root 用户身份登录 Webmin 时，您可以享受两个世界的好处。作为一个真实的例子，让我们来看看如何优化服务器的性能。显然，机器的初始构建是调优 Web 服务器的第一个关键。然而，很可能您使用的是一个专门为您构建和部署的服务器，没有您的干预。在这种情况下，服务器上可能会运行不必要的服务，从而消耗内存和处理器资源。

登录 Webmin，选择系统图标，你会看到一个启动和关闭菜单。在此部分中，您可以查看服务器上安装的所有已知服务，这些服务可能被安排在引导时启动。通过进一步点击并选择列出的服务之一，您将意识到 Webmin 中的控制是多么精细。在 Bootup and Shutdown 菜单中的每一项下，您可以对服务器启动时启动的选项进行根级控制，并对每个服务的启动脚本进行完全控制。

只选择那些确保您的 Web 服务器正常运行所需的服务，您将释放额外的系统资源，并可能提高系统的整体性能。例如，关闭打印、Samba 和 NFS 的守护进程，这可能与您的 web 托管需求不相关，会减少服务器生产时运行的服务数量。

***给 Webmin 添加新模块***

除了 Webmin 安装中包含的默认模块之外，还有许多第三方模块可用于适应 Linux 服务器上的定制应用程序和服务。

这些模块附件可以在 Sourceforge 找到[；其中包括 270 多个模块和众多主题。](http://webadminmodules.sourceforge.net/)

一旦你下载了一个新的模块作为一个. wbm 文件，点击 Webmin 图标，和 Webmin 配置访问 Webmin 模块。然后，使用页面顶部的表单从运行 Webmin 的服务器的本地文件系统安装模块，或者从运行浏览器的客户端上传模块。

如果你绝对找不到一个满足你需求的模块，你可以[构建你自己的模块](http://webmin.com/modules.html)，或者，你可以[直接从 Webmin 组承包定制开发](http://webmin.com/custom.html)。

***服务器上的时间和日期***

一个简洁的时间和日期工具允许你确保你的硬件和系统时间在你的服务器上同步。它还为您提供了添加网络时间服务器的能力，网络时间服务器是一个已知的、精确的时间源，您可以将系统与它同步。

设置起来很简单——访问硬件图标并选择系统时间。菜单是不言自明的。时间服务器可以作为 IP 地址或完全限定的域名输入。

***Perl 模块***

向您的服务器添加新的特性或功能经常会涉及到标准 Perl 安装中不包含的 Perl 模块的应用。通过 Webmin 的 Others 图标，您可以访问 Perl 模块选项。这不仅允许您查看系统中已经存在的非标准模块，还允许您:

*   从 CPAN.org 搜索并安装模块
*   从远程 url 安装模块
*   上传并安装模块
*   安装驻留在系统上的模块

***服务器上的多个 IP***

网络图标使您可以对服务器可能提供的局域网和广域网功能进行强大的控制。此图标允许您控制 Linux 防火墙(iptables)以及 DSL、VPN 选项，并使用您的以太网配置。

在网络配置下，您可以向系统上的主 IP 添加虚拟接口。如果你有独立 IP 地址的主机(也许他们使用匿名 FTP 或 SSL)，这是很有用的。添加 TCP/IP 配置很容易—单击网络配置，然后单击网络接口。单击添加接口并填写提供的表格。请记住，虚拟接口是从您的主物理接口(通常是 eth0)构建的，因此这个第一个新的虚拟接口将被命名为 eth0:1。在继续之前，请确保您拥有正确的 IP、子网掩码和广播地址。

Webmin 可以优雅地重新启动您的网络服务，并立即初始化新的接口。

***管理 Cron*T3】**

Webmin 中简化的一个强大工具是 cron 管理。Cron 是一个自动化守护进程，可以在指定的时间运行命令、脚本和程序。在系统图标下，在计划的 cron 作业中，您可以管理 cron 作业，创建和删除 cron 任务，以及控制对 Cron 的用户级访问。

***垃圾邮件刺客和 Procmail***

如果您在您的服务器上使用这些工具中的任何一个，Webmin 再次通过基于 gui 的管理访问提供了对垃圾邮件和一般邮件过滤工具的控制。

更多关于垃圾邮件刺客的信息请点击[这里](http://eu.spamassassin.org/index.html)。

您可能已经知道，Procmail 是一种邮件处理工具，可以根据发件人、主题行、邮件长度、邮件中的关键字等过滤邮件。更多关于 procmail 的信息可以在它的官方主页上找到。

##### 使用服务器上的用户

***多个管理员&登录 Webmin 活动*T3】**

那些拥有多台服务器或多名管理员的用户将从一些有用的功能中获得真正的好处，这些功能记录了 Webmin 中执行的操作，并且能够使用 Webmin 的配置为管理员设置有限的权限。

默认情况下，Webmin 中启用了基本日志记录。要修改日志选项，请转到 Webmin 图标和 Webmin 配置模块。选择“记录”并打开“记录每个操作对文件所做的更改”选项。通过启用详细日志记录，您将能够通过 Webmin 操作日志模块查看您在系统上执行的每一个操作。

位于 Webmin 图标下的 Webmin 用户选项允许您为单个 Webmin 用户分配特定的模块权限。例如，您可以设置一个可以访问 Apache、FTP、Sendmail 和系统日志的网站管理员，让系统管理员可以使用 Webmin 的其余模块。

Webmin 还为您提供了同步系统上所有*Nix 用户的选项。如果您选择这个选项，我建议您指定 Webmin 组—这将允许您为各种类型的用户建立权限，从最终用户到管理员，再到 root 访问用户。

***添加多个用户和组***

在使用 Webmin 管理 Linux 的第 1 部分(第一篇文章的链接)中，我们介绍了手动添加用户作为添加域过程的一部分。在这里，我想讨论一个通过 Webmin 接口批量添加、编辑或删除的技巧。

单击系统图标，然后选择用户和组，您将看到批量处理用户的选项。这些说明也可以在 Webmin 的批处理用户处理页面上找到。

该表单允许您从上传的或本地的文本文件中同时创建、修改或删除多个用户。文件中的每一行都指定一个动作，这取决于它的第一个字段。线条格式如下:

```
create:username:passwd:uid:gid:realname:homedir:shell:min:max:warn:inactive:expire
```

```
modify:oldusername:username:passwd:uid:gid:realname:homedir:shell:min:max:warn:inactive:expire
```

```
delete:username
```

如果在创建行中 uid 字段为空，Webmin 将自动分配一个 UID。如果 gid 字段为空，Webmin 将创建一个与用户同名的新组。必须为每个用户提供 username、homedir 和 shell 字段，但允许所有其他字段为空。如果 passwd 字段为空，则不会为用户分配任何密码。如果它只包含字母 x，帐户将被锁定。否则，字段中的文本将被视为明文密码并被加密。

在修改行中，空字段表示不修改相应的用户属性。

***为用户生成 SSH 密钥***

如果您的服务器用于或允许 shell 帐户，您可能会发现 SSH 服务器下的服务器图标中的这个小功能很有帮助。

您可能已经知道，在不需要密码交互的情况下启用 ssh 访问需要生成一个 ssh 密钥。此密钥使客户端和服务器之间的安全握手能够自动发生，如果您的 shell 帐户需要按照固定的时间表将数据文件放入您的服务器，此密钥尤其有用。

此配置页面允许您为添加到服务器的新用户配置 SSH 的自动设置。一旦配置完成，新用户在使用 ssh 之前就不必运行 ssh-keygen 了。

***同步用户和 MySQL 用户***

如果您为添加到系统中的每个域或用户提供 MySQL 数据库，您可以利用服务器图标下的一个易于使用的功能和 MySQL 数据库服务器来设置用户同步。

在 User Permissions 下，您可以将 Webmin 配置为在 Webmin 中的 System: Users and Groups(将 Linux 用户添加到系统中)下创建用户时，自动生成具有特定数据库和主机权限的 MySQL 用户。

***进一步探索 Webmin***

正如我们在这个由两部分组成的系列文章中所看到的，Webmin 是一个强大的 Linux 管理工具。要了解更多关于 Webmin 的信息，你当然可以浏览 www.webmin.com 的 Webmin 站点。以下是您可能也想访问的一些附加链接:

***网名之书***

乔·库珀写了一本关于使用 Webmin 的深度指南，名为《Webmin 之书》,在这里可以找到。您还可以在那里找到一个下载 Webmin 信息的 PDF 的链接。

***Webmin 邮件列表***

有几个 Webmin 邮件列表可供用户使用，包括公告、开发者等等。在[Webmin.com](http://webmin.com/index2.html)停留。另请参见 http://webmin.us/phpBB2T2 的 Webmin 论坛。

## 分享这篇文章