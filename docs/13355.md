# CSS:在背景图像中使用百分比

> 原文：<https://www.sitepoint.com/css-using-percentages-in-background-image/>

上周你可能已经注意到，我们正在图书区测试一个新的实验性屏幕小工具——[一个 JavaScript 驱动的图书](https://www.sitepoint.com/books/)，它允许你翻阅图书，快速获得布局和感觉。

虽然我可能稍后会直接讨论这个问题，但我想我会分享一些我对 CSS 背景图像的研究。

像最近很多基于 CSS/JS 的动画一样，我使用了'[背景图像精灵【T1 '——一个包含所有帧的大背景图像，背景位置用于控制显示哪个帧(或动画单元)。每次点击都会将背景位置下移一帧。使用一个图像的主要优点是你可以保证在你的动画准备好的时候所有的帧都会被缓存。](https://www.sitepoint.cimg/books/javascript1/10page.jpg)

有三种可行的方法可以用来控制`background-position`，你是**而不是**不允许混合搭配它们(即`background-position: top 50%;`)。

**1)关键词:即`background-position: top right`**

关键字可能是最常用的方法，因为它们非常容易理解，并且在所有浏览器上都完全可靠。你甚至不必担心它们的顺序——“右上”和“右上”一样好用。

关键词定位的主要缺点是缺乏粒度。三个垂直(上、中、下)和三个水平(左、中、右)给你绝对最多九个帧位置。不能有'*顶居中的*或'*右和一点点的*。此外，关键字不能像其他两种数字定位方法那样容易地进行数学操作。

2)像素:即`background-position: 0px 0px`

像素定位可能是目前最有用的方法。首先，这个概念很容易理解。一旦我们知道我们总是从容器和图像的左上角开始测量，就不难准确预测图形在呈现之前会出现在哪里。

像素也很容易被数学处理。事实上，如果你有一个循环动画(像书动画)，你可以让你的精灵图形平铺，并简单地移动你的背景一个“帧高”。当动画到达最后一帧时，平铺将自动呈现第一帧，循环将自动重新开始。

**3)百分比:即`background-position: 80% 50%`**

百分比在理论上是伟大的，但是尽管有一些非常好的 [解释](http://archivist.incutio.com/viewlist/css-discuss/83051)它的微妙之处，我得到的印象是它们(百分比)没有被很好地理解。我当然没有。

乍一看，百分比似乎很有前途，因为它们可以很容易地用数学来处理，并且对它们可以显示的位置(即帧)的数量没有实际限制。真正让我对使用它们感兴趣的想法是，它们可以让你调整图像的大小，而不必重写所有的像素定位设置——不管图像尺寸如何，20%就是 20%。理论上，你应该能够给你的脚本一个图像，告诉它有多少帧，它会计算出其余的。

这在理论上听起来很棒，但一些快速测试让我困惑。虽然 0%、50%和 100%给我的感觉相当于“顶部”、“中间”和“正确”，但像 37%、61%和 88%这样的百分比似乎在疯狂地变化。

理解背景图像中百分比的关键是理解不同于像素设置，它的参考点是移动的。任意百分比是指图形 ***和*** 在包含对象上的百分比位置。

因此，当我们将背景图像设置为“10% 10%”时，我们会将图形左上角 10%处的一个点与 HTML 元素左上角 10%处的一个点对齐。

我必须承认这一开始让我很困惑，但是我画了这个图来帮助我自己解释。

这意味着在实践中，如果你的图形和你的 HTML 元素一样大，改变百分比不会有任何影响。“0%”将等同于“73.5%”和 100%。

即使你理解了总的概念，它仍然不是特别直观。如果给某物一个 150%的 X 位置会怎么样？我们大多数人都很难想象结果。

如果你有一个四帧的垂直精灵呢？四个 Y 轴位置是什么？

我开始猜测 25%和 75%一定在混合中，但是，[正如你在这个测试用例](https://www.sitepoint.com/examples/jquery/test.php)中看到的，四个垂直帧位置被设置为三分之一——0%、33.333%、66.666%和 100%。

好吧，..所以这有点奇怪，但是一旦你明白了，它就真的有用了，对吗？

理论上是的，但现实并不那么乐观。老实说，我厌倦了抱怨 IE，但这真的很糟糕。

据我所知，IE6 和 IE7(可能也是早期版本)都有某种舍入误差，这种误差有效地阻止了这种基于 sprite 的工作使用百分比。像 0%、50%和 100%这样简单的百分比是完全可靠的，但最终不会比顶部/中心/底部更有用。

更复杂的百分比似乎是一种抽奖。该误差很小，但足以通过迫使动画偏离中心来破坏动画，循环动画会在每次通过时增加该误差。试图预测错误并在 IE 中进行补偿也被证明是不可能的，我想不出任何其他解决方案，只能坚持像素定位

可以说，非常令人沮丧的东西。在这里插入‘翻白眼表情’。

## 分享这篇文章