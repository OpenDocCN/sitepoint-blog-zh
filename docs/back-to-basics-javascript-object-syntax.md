# 回到基础:JavaScript 对象语法

> 原文：<https://www.sitepoint.com/back-to-basics-javascript-object-syntax/>

对象是 JavaScript 语言的基石。许多内置的数据类型，如错误、正则表达式和函数，在 JavaScript 中都表示为对象。为了成为一名成功的 JavaScript 开发人员，您必须对对象的工作原理有一个牢固的理解。本文将教你用 JavaScript 创建和操作对象的基础知识。

对象是由[原语](http://cjihrig.com/blog/javascript-data-types/ "JavaScript Data Types")和其他对象构建的复合数据类型。一个对象的构建块通常被称为它的*字段*或*属性*。属性用于描述对象的某个方面。例如，属性可以描述列表的长度、狗的颜色或人的出生日期。

## 创建对象

用 JavaScript 创建对象很容易。该语言提供了称为*对象文字符号*的语法，用于快速创建对象。对象文字用花括号表示。下面的示例创建一个没有属性的空对象。

```
var object = {};
```

在花括号内，属性及其值被指定为键/值对的列表。键可以是字符串或标识符，而值可以是任何有效的表达式。键/值对列表用逗号分隔，每个键和值用冒号分隔。下面的示例使用文本表示法创建一个具有三个属性的对象。第一个属性`foo`包含数字 1。第二个属性`bar`是使用一个字符串指定的，它也存储一个字符串值。第三个属性`baz`存储一个空对象。

```
var object = {
  foo: 1,
  "bar": "some string",
  baz: {
  }
};
```

注意前面例子中空格的使用。每个属性都写在单独的一行上并缩进。整个对象可以写在一行中，但是这种格式的代码可读性更好。对于具有许多属性或嵌套对象的对象来说尤其如此。

## 访问属性

JavaScript 提供了两种访问对象属性的表示法。第一种，也是最常见的，被称为*点符号*。在点符号下，通过给出宿主对象的名称，后跟一个句点(或点)，再后跟属性名来访问属性。下面的示例演示如何使用点标记法读取和写入属性。如果`object.foo`最初持有值 1，那么在执行该语句后，它的值将变为 2。*注意，如果`object.foo`还没有值，那么它就是`undefined`。*

```
object.foo = object.foo + 1;
```

访问对象属性的另一种语法称为*括号符号*。在括号符号中，对象名后面是一组方括号。在方括号内，属性名被指定为字符串。下面重写了前面的点符号示例，以使用括号符号。虽然代码可能看起来不同，但在功能上与前面的示例是等效的。

```
object["foo"] = object["foo"] + 1;
```

括号表示法比点表示法更有表现力，因为它允许变量指定全部或部分属性名。这是可能的，因为 JavaScript 解释器自动将方括号中的表达式转换为字符串，然后检索相应的属性。以下示例显示了如何使用括号符号动态创建属性名。在这个例子中，属性名`foo`是通过将变量`f`的内容与字符串`"oo"`连接起来而创建的。

```
var f = "f";

object[f + "oo"] = "bar";
```

括号符号还允许属性名包含点符号中禁止的字符。例如，以下语句在括号符号中是完全合法的。但是，如果您试图用点标记法创建相同的属性名，就会遇到语法错误。

```
object["!@#$%^&*()."] = true;
```

### 访问嵌套属性

通过将点和/或括号引用链接在一起，可以访问嵌套对象的属性。例如，下面的对象包含一个名为`baz`的嵌套对象，该嵌套对象包含另一个名为`foo`的对象，该对象具有一个名为`bar`的属性，该属性保存值五。

```
var object = {
  baz: {
    foo: {
      bar: 5
    }
  }
};
```

以下表达式访问嵌套属性`bar`。第一个表达式使用点符号，而第二个表达式使用方括号符号。第三个表达式结合了这两种记法来达到相同的结果。

```
object.baz.foo.bar;
object["baz"]["foo"]["bar"];
object["baz"].foo["bar"];
```

如果使用不当，类似上例中所示的表达式可能会影响性能。评估每个点或括号表达式需要时间。如果同一个属性被多次使用，那么访问该属性一次，然后将值存储在一个局部变量中以备将来使用更有意义。下面的例子在一个循环中多次使用了`bar`。然而，`bar`被存储在一个局部变量中，而不是浪费时间反复计算同一个值。

```
var bar = object.baz.foo.bar;
var count = 0;

for (var i = 0; i < 100000; i++) {
  count += bar;
  // better than count += object.baz.foo.bar;
}
```

## 作为方法的函数

当一个函数被用作对象属性时，它被称为一个*方法*。像属性一样，方法也可以用对象文字符号来指定。下面的例子说明了这是如何实现的。

```
var object = {
  sum: function(foo, bar) {
    return foo + bar;
  }
};
```

也可以使用点和括号符号来调用方法。下面的示例使用这两种表示法调用前面示例中的`sum()`方法。

```
object.sum(1, 2);
object["sum"](1, 2);
```

## 添加属性和方法

对象文字表示法对于创建新对象很有用，但是它不能向现有对象添加属性或方法。幸运的是，向对象添加新数据就像创建赋值语句一样简单。下面的示例创建一个空对象。然后使用赋值语句添加两个属性`foo`和`bar`以及一个方法`baz`。注意，这个例子使用了点符号，但是括号符号也同样适用。

```
var object = {};

object.foo = 1;
object.bar = null;
object.baz = function() {
  return "hello from baz()";
};
```

## 结论

本文介绍了 JavaScript 对象语法的基础。对这些材料有一个坚实的理解是至关重要的，因为它是语言其余部分的基础。他们说你必须先走，然后才能跑。好吧，在 JavaScript 的世界里，你必须先理解对象，然后才能理解面向对象编程。

## 分享这篇文章