# 数据类型介绍:静态、动态、强和弱

> 原文:[https://www.sitepoint.com/typing-versus-dynamic-typing/](https://www.sitepoint.com/typing-versus-dynamic-typing/)

本文解释了什么是数据类型，当我们谈论数据类型时，术语“静态”、“动态”、“强”和“弱”的含义是什么，以及我们为什么要关心这些。

## 什么是数据类型？

在编程中，数据类型是我们告诉计算机它正在处理的数据的类型，例如字符串、数字或对象。当定义一个变量时，计算机在存储和处理它之前需要数据的名称和类型。这样，它就知道要留出多少内存，如何访问以及如何改变它。

您可能会发现更容易翻转这个术语，并将其视为我们正在处理的“数据类型”。例如，在 JavaScript 中，`let name = "sitepoint";`创建一个名为“name”的变量，其类型为“string”。

```
let name = "sitepoint";
console.log(typeof name);
// "string" 
```

每种编程语言都有不同的方式来处理如何分配数据类型(静态与动态)以及在试图改变数据类型时有多灵活(强与弱)。您可能读到过关于“静态”和“动态”数据类型以及“强”和“弱”数据类型的相互矛盾的信息。它们不是一回事，一种语言可以包括静态/动态和强/弱数据类型的组合:

*   [**静态与动态**](#staticvsdynamicdatatypingsystems) 定义了一种语言期望你如何声明数据类型。静态类型语言在创建一段数据时需要明确定义数据类型(例如变量、参数、返回值)。动态语言则相反，它可以推断，或者至少尝试猜测，我们正在使用的类型。
*   [**强与弱**](#strongvsweakdatatypingsystems) 定义了一种语言允许数据类型之间操作的灵活程度。例如，强类型语言不允许你将一个`float`加到一个`integer`上，除非你先转换它，即使它们都是数字。另一方面，弱语言会尽力适应程序员的要求并执行这些操作。

选择静态对动态或强对弱没有最佳选择。严格的语言将确保一致性，并减少代码中的错误。作为一种折衷，您可能会发现自己编写了更冗长的代码，并且定义和转换了对人眼来说似乎显而易见的类型。

## 我们为什么要关心数据类型？

每种编程语言都有一个数据类型系统。没有类型系统，计算机就不知道如何在我们的程序中表示数据。他们不知道如何将这种类型的数据添加到另一种类型的数据中，甚至不知道如何存储这些数据。通过将变量指定为整数，计算机知道它需要多少字节来表示该值，更重要的是，知道如何用它来执行操作。将两个整数相加与将两个字符串相加是不同的操作。计算机知道如何处理数据的唯一方法是知道它正在处理的数据的类型。

您可以在不太了解底层类型系统的情况下开始编程。这就是这些高级语言的魅力所在。但是了解您正在处理的数据类型，以及如何最好地表示您正在处理的数据，会带来巨大的优势，如下所示。

*   你将拥有更高效的程序，更好地利用内存和存储。因为知道整数数组比双精度数组占用的空间少，所以在处理内存或硬盘上非常大的数组时，可以节省千字节甚至兆字节的空间。
*   它将帮助您解读调试消息，并更好地理解与数据类型相关的问题。当程序抱怨不能将两个数相加，因为其中一个数是字符串时，你就明白为什么了。了解这一事实将有助于您避免一开始就试图向字符串添加数字的错误。
*   一旦你知道了类型是如何工作的，你就可以像电影《黑客帝国》中的尼奥一样，知道如何变通规则。当把一个整数加到一个字符上时，你会知道如何得到另一个字符，以及为什么会这样。

## 静态与动态数据类型系统

静态数据类型语言是那些要求程序员在创建数据时显式定义数据类型的语言(无论是变量、参数、返回值等等)。通常，这些类型在程序的生命周期中也是固定的，它们不会改变自己的类型。让我们来看一个例子:

```
int myNumber = 42;              // integer data type
string name = "Rocky Balboa";   // string data type
final double PI = 3.141592;     // double data type

// Function takes two integer data types, returns an integer data type
public int add(int a, int b) {
    return a + b;
} 
```

上面的例子显示了一些被定义的变量，以及一个将两个数相加的函数的例子。如您所见，我们明确地告诉语言(在本例中是 Java)我们正在处理整数、字符串和双精度数。如果没有这些对编译器的提示，编译器将不知道如何处理`myNumber`。这只是一个对我们有意义的名字，而不是计算机。

一些静态类型的语言包括 Java、C#、C++和 Go。但这只是许多例子中的一小部分。

让我们将这与动态数据类型语言进行对比。下面是一个例子:

```
$myNumber = 42;           // integer data type
$name = "Rocky Balboa";   // string data type
$PI = 3.141592;           // float data type

// Function takes two integer data types, returns an integer data type
function add($a, $b) {
    return $a + $b;
} 
```

那么，所有类型都去了哪里？在上面的例子中，我们看到 PHP(一种动态类型语言)中的变量没有明确说明它们是什么类型的数据。如果我们不告诉 PHP 数据类型，它怎么知道呢？嗯，它根据分配给它的值进行猜测。它可以正确地猜测出`$myNumber`是一个整数，因为值 42 是一个整数。

功能呢？它也根据传递给它的值进行猜测。这意味着`add()`可以接受两个整数并返回一个整数，也可以接受两个浮点数并返回一个浮点数。类型是推断出来的，甚至可以在运行时改变。稍后，在同一个程序中，我们可以说`$myNumber`等于`Tom`，这将让我们把变量转换成一个字符串。

许多动态语言中的一些包括 JavaScript、PHP、Python 和 Ruby。

## 为什么你更喜欢静态而不是动态，反之亦然？

在静态数据类型语言的情况下，通过预先明确告诉编译器您正在处理的数据类型，它可以在部署之前很久就捕捉到代码中的常见错误。如果您将一个值定义为整数，将另一个值定义为字符串，编译器会在编译时捕捉到一个附加错误，并且不会让您完成程序的构建。这很好，因为你越早发现错误，你的代码就越强大，你和你的客户修复它的成本就越低。在部署之后，尽早修复要比事后修复容易得多。

静态是正确的方法吗？好吧，代价是你必须在使用它之前明确地定义一切。您必须键入更多的代码，您必须事先知道您要处理的数据类型(并不总是您知道的东西)，并且您必须知道在您的操作中将会发生什么。你必须知道`1 / 3`会给你`0`而不是`.33333`之类的东西。

动态语言在这方面给你增加了灵活性。他们经常被程序员描述为“更有表现力”。例如，在 PHP 中，您可能会得到`.3333...`。然而，问题是如果解释器对数据类型做出了错误的猜测，您必须知道这一点。否则它会偷偷溜走。由于我们不能捕捉所有的东西，动态语言中的代码更容易出错，也更脆弱。这些动态语言中的数据类型通常在运行时确定。这使得在许多错误到达生产环境之前很难捕捉到它们。它可能在您的本地开发机器上运行良好，但是生产运行时环境可能会稍有不同，解释器会产生一些不同的猜测。

JavaScript 是一种被认为是动态的语言。随着 JavaScript 超集 [TypeScript](https://www.typescriptlang.org/) 的引入，程序员引入了显式声明变量数据类型的思想，以使语言更加静态。随着 JavaScript 越来越受欢迎——甚至超越了使用像 [Node.js](https://nodejs.org/) 这样的工具的浏览器——程序员希望增加静态数据类型的好处，以消除 JavaScript 在处理数据类型时的一些错误猜测。JavaScript 因其在处理数据及其类型时的糟糕猜测而臭名昭著。这是将 JavaScript 这种动态语言转变成更像静态类型语言的一个例子，以便及早发现错误，并产生更健康的代码。鉴于 JavaScript 正在 Node.js 的帮助下进入服务器端应用程序，这一点就更加重要了。

简而言之，静态数据类型为您提供了一个严格的环境，通常会生成更强大的代码。动态语言为您提供了灵活性和更快地编写代码的能力，但是如果您不仔细检查您的类型，可能会导致更容易出错的代码。

## 强与弱数据类型系统

强/弱数据类型是一种语言处理它所操作的值的方式。这种语言会在处理数据类型时悄悄地做出一些假设并帮你解决问题，还是会停下来抱怨它不知道该做什么？让我们来看一个如何工作的例子:

```
int main() {
    int a = 5;
    std::string b = "5";

    // Houston, we have a problem!
    std::cout << (a + b);
    return 0;
} 
```

在这个 C++例子中，我们试图将一个整数和一个字符串相加。是的，这种语言是静态类型的，但它并没有试图通过将`b`变成一个整数来为程序员掩饰，这样它就可以将两个数字相加。它只是立即标记问题并放弃。这种检查是在我们试图编译程序时进行的(有时是在您编写程序时由 IDE 进行的)。这里，我们试图以一种与字符串定义相反的方式使用类型。强类型语言在某种程度上包括 C#、Java、Go、Python 和 C++，它们都会标记类似这样的东西。

现在 C++有办法削弱它的强类型系统，但这超出了本文的范围。我们将讨论弱数据类型，然后一起讨论强/弱类型，以及事情为什么不像静态/动态类型那样一目了然。

弱数据类型语言试图帮助程序员完成操作。让我们来看看 JavaScript，看看它如何执行与我们在上面的 C++示例中所做的类似的操作:

```
const a = 5;
const b = "5";

console.log((a + b)); 
```

如果你对 JavaScript 及其怪癖有所了解，你就会知道上面的代码会毫不费力地工作。它不会向程序员指出任何东西。但是它不会像您预期的那样将 10 记录到控制台。你可能会认为它会看到一个整数和一个字符串，然后说“哇，等一下，我不知道该怎么处理它！”相反，JavaScript 试图强制或转换其中一个值，使其与另一个值相似，进行计算，给出结果，然后继续前进。这里的结果是`"55"`，因为它将变量`a`的值转换成一个字符串，然后将它们连接起来。结果将是字符串数据类型。

正如你所看到的，一种语言的优势在于它有多强烈地试图使用它的类型来理解程序员的意图并继续前进。

使用这些术语，我们可以说像 Python 这样的语言是动态的，也是强类型的。在创建值(动态部分)时，您不需要显式定义类型，但是如果您尝试然后以它不期望的方式使用该类型，它将立即标记该问题并退出(强类型)。

## 为什么你更喜欢强者而不是弱者，反之亦然？

强语言是严谨的语言。同样，他们确保自己确切地知道程序员打算做什么。如果出现错误，通常是由于程序员不理解操作而导致的。这些错误也潜在地指出了对问题缺乏理解的方式。如果你试图把数字加到字符串中，那么你可能没有意识到这对计算机来说是没有意义的。它迫使你了解操作的真相，并让你明确地告诉计算机你想做什么(通常使用某种形式的转换/转换机制)。这往往会在生产中产生更强大、更不容易出错的代码，但会增加开发过程中的时间和障碍。

弱语言又一次更倾向于灵活性和表达性，它去掉了强语言的严格性，允许程序员启动并运行他们的代码。但不利的一面是，计算机做出了程序员可能无意的假设。

JavaScript 是一种弱类型语言(碰巧也是动态的)，再次用 TypeScript 增强了它的功能。TypeScript 对数据类型的处理允许程序员使用显式类型编写 JavaScript，并获得强类型语言的好处。它在编译时捕捉许多错误，并帮助防止模糊的 JavaScript 假设进入生产系统。但是同样，这是以在开发过程中对编码格式更加正式和严格为代价的。即使了解 TypeScript 的代码编辑器也可以在您编写错误时标记它们。 [VS Code](https://code.visualstudio.com/) 就是一个很好的例子。

## 强度等级

我们现在已经了解了强类型和弱类型。值得注意的是，不同于静态/动态类型的明确界限，语言可以表现出不同程度的强弱。这就把语言放在了一个光谱上。这就是为什么你会发现有些文章说 C++很弱，而有些文章说它很强。这是关系。使它成为一个谱系的是一些语言提供工具来帮助动态转换和改变类型。有些使用指针之类的东西。这就是为什么你可能会听到有人说 Java 比 C 或 C++更强类型化，而显然 C++比 JavaScript 更强类型化。

我发现理解语言强弱的每一个细微差别并不重要。只要你知道一些基础知识，并能区分不同水平的优势，你就能为一个给定的项目及其需求选择一种语言。

## 选择适合您项目的风格

在下一个项目中，你可能会选择一种语言而不是另一种语言，原因有很多。类型系统往往在大多数人的列表中排名靠后，被更大的考虑因素所压倒，例如:

*   开发人员最熟悉的语言
*   哪种语言提供了更多适合项目范围的特性
*   可用于更快开发的工具

但是当谈到类型系统时，请记住，如果您正在进行一个任务关键型项目，该项目需要内存高效、严格，并且可以在早期发现错误，那么您可能希望查看静态类型的东西。如果语言不应该做假设，并且需要明确的指令来帮助关键的算法，也要考虑强类型的东西。举例来说，这些是你在“AAA”级游戏中容易找到的语言。

然而，如果你想快速灵活地得到一些东西，这给程序员提供了一些表达能力，那么动态或弱类型语言可能是更好的选择。

或者你可能更喜欢混合两者的语言。这也是很多人选择 Python 这样的语言的部分原因。

## 结论

本文试图介绍静态和动态类型系统之间的差异，以及强/弱类型系统之间的差异。我们已经讨论了它们之间的比较，为什么你会选择一种而不是另一种，哪些语言适合这些系统，以及你如何利用这些差异为你的下一个项目选择语言。

我希望这篇文章对你有所启发。如果你从这篇文章中只学到一件事，那就是静态不一定意味着强，动态不一定意味着弱。语言可以展示每种语言的不同组合。在强类型和弱类型的情况下，彼此之间可以有不同程度的强度。

祝你下一个项目好运，感谢你的阅读！

## 分享这篇文章