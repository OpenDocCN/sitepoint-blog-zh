# 黑仔臭虫的攻击！

> 原文:[https://www.sitepoint.com/attack-killer-bugs/](https://www.sitepoint.com/attack-killer-bugs/)

毫无疑问，Perl 是一种非常复杂的编程语言。最微小的打字错误都会产生一个错误信息，科学家们可能要花数年时间来解码。然而，大多数人不知道的是，Perl 提供了专门用于消除最常见错误的工具。

你可以做成千上万的事情来消灭虫子，但是在这里我要强调三个最有效的技巧。您必须准备好稍微改变您的编码风格，但是在您的代码中使用 Perl 的内置 bug 查找特性是绝对必要的:正是这一点将初学者与专业人员区分开来。

即使你认为你目前的风格适合你，退一步想一想。你会在每个 bug 上花费数小时吗？你会在睡梦中梦见踩扁虫子，只因为白天没有时间去寻找并消灭它们吗？如果是这样，你是这些建议的最佳候选人。不要只是阅读这篇文章，要付诸行动。如果您是 Perl 高手，那么总有改进的余地，不是吗？

##### 明智地选择你的编辑

并非所有的代码编辑器都是平等的。有些只是文本编辑器，比如记事本。有些包含了语法突出显示，但其他的就不多了。一些平衡速度和舒适。其他的似乎遭受功能过载。

你要慎重选择。没有语法突出显示的编辑器会给你带来很大的缺点。语法突出显示显示您是否完成了括号、引号和任何其他类型的定界字符。使用正确的编辑器几乎不可能出现引用错误，但是如果您选择使用记事本或类似的编辑器，它们可能会困扰您。

语法突出显示并不是您在编辑器中需要寻找的唯一特性。检查能力:

*   要打开多个文件，
*   要更改字体，
*   自动缩进，以及
*   匹配大括号(在关闭代码块时突出显示左大括号)。

就正确编程而言，合适的编辑器比其他任何东西都重要。编辑可以防止太多可能的错误，以至于使用一个过时或功能低下的程序来编写像样的代码是毫无意义的。

##### 使用严格；

Perl 的“严格”编译指示，正如它的名字，是一个告诉 Perl 对你的代码更加挑剔的文件。挑剔的 Perl 会在发现任何潜在的错误时发出警告。您可能会发现 strict 会阻止您以您习惯的方式编写代码——起初看起来肯定是这样。

为了让您的程序受益于严格，只需添加 use strict 到顶部，在任何`#!/usr/bin/perl` 行之后，但在任何其他代码之前。因此，您的代码应该如下所示:

```
#!/usr/bin/perl 

# weather.pl by Perl F. Anatic 

use strict;
```

严格执行的主要规则是变量的显式声明。你不能再简单地开始使用一个变量，因为你现在需要事先告诉 Perl。这需要使用 my，如下所示。

```
my $fruit = fruit_of_the_day();
```

通常情况下，这将被写成如下形式。

```
$fruit = fruit_of_the_day();
```

为什么使用这种新样式有优势？严格是好的，因为它使得不可能拼错变量名。嗯，不是不可能，但如果你这样做，它会给你一个非常明确的警告，防止你变得更加困惑。考虑下面的例子，第二次使用`@input`变量时，我们拼错了。

```
my @input = <>; 

print join(":", @inpt);
```

看到我们做了什么吗？Perl 解释器没有，这是肯定的！它沿着我们的代码突突前进，丝毫没有意识到有什么地方出错了。如果我们在 Perl 代码的顶部添加了`use strict;` ,我们就会看到这个警告。

```
Global symbol "@inpt" requires explicit package name at -e line 1\. 

Execution of -e aborted due to compilation errors.
```

因为每个变量在使用前都要声明，而且我们还没有告诉解释器关于`@inpt`的事情，它告诉我们我们的错误。编码能简单到什么程度？如果没有来自 Perl 解释器的这些有用的提示，我们可能会花费数小时来查找问题的原因。在一个有数百行代码的文件中(与这个两行代码的例子相反)，它使得查找 bug 变得更加容易。

##### 使用警告

另一个类似的有用工具是 Perl 的内置警告。和 strict pragma 一样，它们会对任何可能是错误、也可能不是错误，但很可能是错误的怪癖提前发出警告。同样，就像使用 strict 一样，您可以通过添加使用警告将它们添加到您的程序中；到顶端。如果您希望添加严格警告和警告，代码文件的顶部现在应该是这样的。

```
#!/usr/bin/perl  

# weather.pl by Perl F. Anatic  

use strict;  

use warnings;
```

但是这些警告到底有什么作用呢？例如，如果你试图在一个 if 块中使用`=`而不是`==`，或者你试图给一个数字添加一个字符串，比如`print "fish" + 4;`，它们会显示你的输入错误。这些似乎是愚蠢的错误，但它们真的很常见。如果你想一想你在调试时犯的错误，你会发现大多数错误都是“愚蠢的”，你只是在编写代码时没有正确思考。

##### 把一切都包起来

调试总是会花费更多的时间。不管是花你两倍的时间编写新特性，还是每周只花你几秒钟(幸运的事情！)，这些建议将大大减少你在寻找错误时感到沮丧的时间。有了可用的工具，你没有理由不使用它们！

对于你犯的每一个错误，想一想当你测试了你的代码后，你是如何避免它的。自动化可以自动化的 bug 修复。让 Perl 解释器做脏活，把棘手的问题和新特性留给我们人类。编程是做软件，不是 bug！

*T1】链接 T3】*

`use strict;`文档，访问[http://perlmonks.org/index.pl?node=strict](http://perlmonks.org/index.pl?node=strict)

关于`use strict;`和`warnings`的更多信息，请访问[使用严格；不是 Perl](http://perlmonks.org/index.pl?node=%27use%20strict%27%20is%20not%20Perl) 和[使用严格和警告](http://perlmonks.org/index.pl?node_id=111088)。

## 分享这篇文章