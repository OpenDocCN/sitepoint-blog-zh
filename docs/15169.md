# 采访——PHP 的创造者，拉斯马斯·勒德尔夫

> 原文:[https://www.sitepoint.com/phps-creator-rasmus-lerdorf/](https://www.sitepoint.com/phps-creator-rasmus-lerdorf/)

SitePoint 社区论坛的成员最近聚在一起，向 PHP 的创始人拉斯马斯·勒德尔夫提出了一堆问题。在回顾他的回答时，我很高兴地发现，这个最初推动 PHP 机器运转的人对开源运动的意义保持着清晰的认识。

他很快淡化了他对 PHP 今天的贡献，而是将 PHP 的大部分成功归功于多年来签署了该项目的广大开发人员社区。从某种意义上说，今天的 Rasmus 是 PHP 最大的粉丝。

但是够了；让我们听听拉斯莫斯是怎么说的！

##### 开始的时候…

***SP:你第一次接触开源运动是什么时候，是开源的什么让你着迷？**T3】*

RL:嗯，在 90 年代早期和中期,“开源”这个术语并不存在。

“自由软件”当然是存在的，而且几乎从 1991 年第一次发布开始，我就一直在玩 Linux。以前我使用 QNX 和 Xenix，然后开始摆弄 Minix，直到 Linux 拯救了我。

我不认为我曾经真正被“运动”所“吸引”。当你没钱买 SCO Unix 时，你可以下载一些有用的东西，甚至找到可以帮你安装和运行的人，你怎么能打败它呢？宗教从来没有真正发挥作用。

***SP:是什么促使你去开发 PHP？你认为这种语言有什么是别人没有的？**T3】*

RL:PHP 的第一个版本是我为我的网站和几个项目组装的一套简单的工具。一个工具对 mSQL 数据库进行一些奇特的日志记录，另一个充当表单数据解释器。在我厌倦 C 语言之前，我用 C 语言写了大约 30 个不同的小 CGI 程序，并把它们合并成一个 C 库。然后我编写了一个非常简单的解析器，它可以从 HTML 文件中挑选标签，并用 C 库中相应函数的输出替换它们。

简单的解析器慢慢发展到包括条件标签，然后是循环标签，函数等等。我从来没有想过我在写一种脚本语言。我只是给宏替换解析器增加了一点功能。我还在用 c 写我所有的真正的业务逻辑。

最后，我认为 PHP 在早期的与众不同之处，今天仍然如此，是它总是试图找到解决 Web 问题的最短路径。它并不试图成为一种通用的脚本语言，任何想要解决 Web 问题的人通常都会通过 PHP 找到一个非常直接的解决方案。许多声称能解决网络问题的替代方案都太复杂了。当你需要一些东西在周五前准备好并投入使用，这样你就不必花整个周末去翻阅 800 页的手册，PHP 开始变得非常好。

SP:看看使用数字，现在有超过 900 万个域名在使用 PHP。你知道 PHP 会变得这么大吗？当你知道你的产品可能是微软网络解决方案的最佳替代品时，你有什么感觉？T3】

RL:首先，澄清一下，我并没有开发我们今天所知道的 PHP。几十人，如果不是几百人，开发了 PHP。我只是第一个开发者。

PHP 在很大程度上是一个协作项目。这样想:你有一个网络问题。你可以去商店买一个昂贵的收缩包装的产品，它可能会也可能不会解决你的大部分问题。或者你可以和几千个和你有同样问题的人聚在一起，想出一个适合你们所有人的解决方案。

你不仅会得到一个解决你的确切问题的解决方案，你还会成为一个想法和经验自由交流的志同道合的社区的一部分。这比你能在商店里买到的任何商业产品都要好，对我来说，这是开发这类软件的最好方法。

所以当人们问我开发了一个被数百万人使用的东西是什么感觉时，这真的不符合我对事物的看法。最后，我只是围绕着一种解决网络问题的方法而出现的社区中的第一个成员。

你会把谁称为你的英雄？有哪些圈内或圈外的人给了你启发？T3】

理查德莱杰特:我真的没有从形而上学意义上的人那里得到灵感。但我绝对欣赏和尊重一个棘手问题的巧妙解决方案。

SP:在你从事 PHP 开发的这些年里，你认为你必须做出的最重要的决定是什么？你做过哪些决定，现在你希望自己当初做出了不同的决定？T3】

很难让我对 6、7 年前做出的决定进行第二次猜测，当时只有一个人使用 PHP。不要忘记，我坐下来并不是为了写一个将被 900 万个域名使用的脚本语言:我坐下来是为了解决一个问题。在下午 5 点前解决问题，这样你就可以和你的女朋友去看电影，这会导致 7 年后的一些不理想的方面，那时成千上万的人不得不围绕你增加的深夜黑客工作。

我一路走来做的最重要的决定，大概就是放弃控制。开放这个项目，给任何人提供 PHP 源代码的完全访问权。这带来了许多优秀的人才，人们倾向于感受到一种真正的主人翁感。就对代码和文档所在的 CVS 存储库拥有提交权限的人数而言，PHP 项目可能是最大的项目之一。

##### 开源运动

***SP:开源运动仍然被很多人描绘成“无政府主义”和某种“对社会的威胁”。你觉得它会被主流接受吗？如果是的话，开源社区将如何应对呢？**T3】*

理查德莱杰特:我想这个问题有两个部分。

就主流而言，这场“运动”的产物绝对是主流。这场“运动”建立了我们今天所知的互联网。它建立了人们使用的大多数操作系统(是的，甚至是 Windows)中使用的 TCP/IP 协议栈。它建立了世界上最受欢迎的网络服务器，以及使互联网运转的 DNS 和 MTA 系统。见鬼，如果你往回看一点，它建立了整个行业。第一代操作系统都是开源的，因为这是唯一明智的做事方式。你不可能在不向大脑提供源代码的情况下向某人出售大型主机。只是到了后来，才引入了不提供源代码的概念。

但我猜你真正的问题是我对微软试图让世界相信大群人合作解决问题在某种程度上威胁到我们生活的社会结构的看法。我不认为有“很多”人会做出这种断言，因为这完全是废话——我愿意认为这个世界是一个好地方，不会充满传播这种荒谬想法的人。当我们在开会时，让我们结束所有大群人的会议。他们可能是邪恶的无政府主义者，想要毁灭世界。

最终，主流接受并不是目标。大多数从事自由软件和开源项目的人的目标是技术本身。它正在构建一个解决问题的工具。对我们大多数人来说，这与意识形态无关，因此，主流接受只涉及技术的主流使用。这已经在许多方面实现了，还会有更多的方面。

SP: PHP 在主流 IT 媒体中很少被提及。你觉得 PHP 在开源圈子之外被故意忽略了吗？T3】

理查德莱杰特:PHP 并不令人兴奋，实际上也没什么特别的。它是您的 web 服务器和您可能希望您的 Web 服务器与之对话的各种事物之间的一层薄薄的粘合剂。

在 UNIX 的老传统中，我们依靠小型的专用附加库来完成所有繁重的工作，尽可能少地受到 PHP 的干扰。ASP、JSP 和 Cold Fusion 背后都有大公司的巨额广告预算，产品本身也随着每一次发布而变得更大、更复杂，因此客户会觉得他们的钱花得值。谁会花 10，000 美元买一张软盘和一本两页的手册呢？

那张软盘和两页手册可能正是他们解决问题所需要的，因此花 10，000 美元购买这样一个小的有针对性的解决方案是非常值得的。大型软件公司对小型目标解决方案不感兴趣。这个概念不可扩展。没有广告预算的小型定向解决方案不会引起同业的兴趣。

所以不，我不认为 PHP 很少受到关注是故意的。PHP 就像你的牙刷一样令人兴奋。你每天都在使用它，它完成了工作，它是一个简单的工具，那又怎样？谁会想看关于牙刷的书？

SP:从 PHP v3.0 到 v4.0 的 GNU 公共许可证的迁移在开源社区引起了轩然大波。你觉得新的许可模式现在已经被接受并理解为 PHP 的最佳发展方向了吗？T3】

RL: PHP 3 实际上是双重许可的。所以我们实际上并没有从 GPL 转移到别的东西上，我们只是简单地放弃了 GPL 部分。

我真的看不出双重许可有什么意义，而且它会引起很多混乱。通过将 PHP 完全置于 Apache 风格的许可之下，这种混乱就解决了。

据我所知，双许可并不真正起作用——两个许可中限制较少的一个是人们无论如何都要使用的。当人们可以简单地选择在限制较少的 Apache 风格的许可下使用软件时，GPL 提供的各种保护是毫无意义的。所以选择两个许可证中限制较少的一个是有意义的。

如果你环顾四周，没有重要的脚本语言是 GPLed 的。我说的 GPLed 指的是单一许可证意义上的严格 GPLed。Perl 是完全不受限制的艺术许可证的双重许可。Python 有自己的许可证。Ruby 是双许可的，有自己的许可。Tcl 受 BSD 风格的许可。我不明白为什么 PHP 不在 GPL 之下会让任何人不高兴。

像其他脚本语言一样，GPL 并不是真正需要的。我不反对微软放弃 ASP，完全转向 PHP。当然，他们可能会接受并扩展它，但那时我们将与他们进行纯粹的技术竞赛。这是一场我们可以赢得的战斗，最终，让 PHP 无处不在对 PHP 社区来说是一件很酷的事情。

##### 今天的 PHP

你认为 PHP 的成功归功于什么？你觉得 PHP 有什么主要的弱点吗(与其他语言相比)？T3】

RL:人们喜欢 PHP，因为它解决了他们的网络问题。因此，我看不到任何弱点。它完成了它的设计任务。

有些人可能会认为 PHP 的某些方面不如其他语言成熟。PHP 中的 OOP 支持就是一个例子。但归根结底，这与解决网络问题关系不大，更多的是与美学和语言纯粹性有关。

***SP:你今天还在积极参与 PHP 开发吗？**T3】*

我还是很投入的。我不会像前几年那样每天花 20 个小时在上面，但我仍然会修复 bug，与其他开发人员讨论特性，并偶尔加入一些奇怪的新内容。

***SP:哪个 Web 服务器运行 PHP 最好？阿帕奇——还是别的什么？还有哪个平台运行 PHP 最好？Linux/英特尔，Solaris/SPARC，还是其他？**T3】*

理查德莱杰特:我认为这都归结于什么最受关注。大多数人用 Linux/Intel 配 Apache。这意味着该平台上的错误是由开发人员自己在早期发现的，最终用户不太可能遇到开发人员还没有遇到的问题。其他主流 UNIX 平台，如 Solaris/SPARC 和 FreeBSD/Intel with Apache 也在上面。

***SP: PHP 通常与 MySQL 配对使用。两个团队在开发方面有多少合作？**T3】*

理查德莱杰特:我们非常了解 MySQL。PHP 中的第一个数据库代码是为 MySQL 的前身 mSQL 编写的。MySQL API 问世时与 mSQL 完全兼容，所以从 MySQL 的早期开始，PHP 就对它有很好的支持。这种配对之所以有效，是因为 PHP 和 MySQL 倾向于采用极简且非常直接的方法来解决问题。

就发展层面的合作而言，实际上没有那么多。但是不需要太多。PHP 提供了一个薄薄的层，简单地向 PHP 用户公开 MySQL API。我们将 MySQL 客户端库与 PHP 捆绑在一起，但是该库完全由 MySQL 团队维护，我们很少参与——当然，除非他们中断构建。

SP:你认为 PHP 正在成为 Perl 的替代品吗？T3】

不，Perl 是一种通用脚本语言。PHP 是专门针对网络问题的。

***SP:你对魔术报价和注册全局有什么看法？**T3】*

RL:注册全局变量是吸引人们使用 PHP 的特性之一。当表单和其他变量自动可用时，创建 Web 应用程序的简单性是无可匹敌的。

我个人不赞成默认关闭注册全局。它对应用程序的整体安全性增加很少。如果人们不检查来自用户的数据，那么无论是否启用注册全局，应用程序都将是不安全的。

关闭注册全局变量唯一有帮助的时候是当你在使用一个变量之前忘记初始化它，而知道你的代码的人会利用这一点。通过改变错误报告级别，您可以让 PHP 自动找到这些情况。所以最后，我认为关闭注册全局变量只会让编写 PHP 应用程序变得更加复杂。

当然，它也每天从对这一变化感到困惑的用户那里产生 10-20 个问题/错误报告。

Magic Quotes 源于 PHP 几乎只用于数据库驱动的应用程序的时代。这些应用程序将接受表单输入，并将其粘贴到数据库中。即使在今天，大量的 PHP 脚本也只能做到这一点。

在将字符串插入数据库之前，您必须对引号进行转义。如果不这样做，您将得到一个难看的 SQL 错误，并且您的应用程序无法工作。在向人们解释了 50 次这个简单的事实后，有一天我终于受够了，让 PHP 在运行中进行转义。这样应用程序就能工作，最坏的情况是，当有人直接输出数据而不是把数据粘贴到数据库中时，会在屏幕上看到一个额外的内容。

通常人们甚至不会注意到这个额外的错误，因为它不会导致任何致命的 SQL 错误，因此我不会收到困惑的电子邮件问我发生了什么。这是一件非常好的事情。

即使在今天，您仍然可以看到一些奇怪的站点，很明显，作者没有意识到数据在被插入到数据库之前需要进行转义，您还可以看到一些奇怪的额外内容。每一条都是我们不必回复的支持信息。

不喜欢这个功能的人可以简单地关闭它，自己处理所有的转义。编写可移植应用程序的人可以简单地使用 get_magic_quotes_gpc()检查设置，并在适当的时候添加一个 addslashes()调用。

***SP:你认为 PHP 社区的商业和开源元素之间有成功的平衡吗？**T3】*

理查德莱杰特:我认为结果还不错。各种商业实体付钱给个人来开发 PHP 的部分——这对每个人都有好处。

SP:你在互联网上看到的 PHP 最令人惊讶或创新的用法是什么？T3】

RL:我不断看到新的和奇怪的东西，最新的是 Wez Furlong 的 [ActiveScript SAPI 模块](http://chora.php.net/cvs.php/php4/sapi/activescript/)，它让你像这样做客户端 PHP:

```
<html>   

  ...   

  <script language="ActivePHP">   

    function clickit() {   

      $GLOBALS["window"]->open("http://www.php.net");   

    }   

  </script>   

  ...   

  <img src="..." onclick="clickit();" />   

</html>
```

Alan Knowles 用 PHP-GTK 编写的 PHPMole IDE 也令人印象深刻。还有很多其他很酷的 PHP 东西，但这些可能是我最开始做的。

##### PHP 的未来

***SP:PHP 中有没有服务器端、有状态变量的计划？将实例化的对象放在共享内存中会很有用，这样用户就不会因为类实例化而产生大量开销。**T3】*

RL:[Alternative PHP Cache(APC)](http://apc.communityconnect.com/)项目已经可以把实例化的类粘在共享内存中，这样就有一个被 APC 等人解决了。

我个人认为，如果你真的有性能问题，你应该简化你的代码，或者看看用 C 写关键部分。在 C 层扩展 PHP 实际上比大多数人想象的要容易得多。

***SP:当前的‘会话’变量使用磁盘空间(如`/tmp`)，这对高流量的站点没有好处。有没有补救的计划？***

RL:从 PHP 支持会话的第一天起，我们就提供了共享内存后端会话处理程序。只需将`php.ini`中的`files`设置为`mm`即可。然而，对于高流量的网站来说，这不是解决方案。真正的解决方案是在多台服务器上实现站点的负载平衡。

将会话数据存储在一台机器的内存中并不能解决任何问题。为此，您自己编写一个会话保存处理程序，并将会话数据放入某种中央数据库中。参见[http://php.net/session_set_save_handler](http://php.net/session_set_save_handler)。

***SP:数据库连接池呢？持久连接还远远不够——有计划在未来实现连接池吗？**T3】*

RL:连接池必须由单个进程拥有。由于大多数人使用 Apache Web 服务器，这是一个多进程预分支服务器，所以 PHP 根本无法实现这种连接池。它必须由一个专用的独立进程来完成，这完全超出了 PHP 本身的范围。 [SQLRelay](http://www.firstworks.com/sqlrelay.html) 和 [SRM](http://www.vl-srm.net) 都可以用来解决这个问题。

如果/当 PHP 的通用架构是单进程多线程 Web 服务器时，我们可能会考虑将该功能放入 PHP 本身，但直到那一天，它真的没有多大意义。即使 Apache 2 仍然是一个多进程服务器，每个进程都能够承载多个线程。所以我们可能在每个进程中都有一个连接池。

***SP:有改进 OOP 的计划吗？用户认为实例化类的开销应该更少；以及提供封装，以便它们可以隐藏成员变量(促进更好的编程)。是否有这方面的计划正在酝酿之中？**T3】*

理查德莱杰特:是的。

***SP: Sybase 和 MS SQL Server 为 SQL 存储过程返回的多个结果集提供支持。PHP 不支持这个！用户什么时候能期待？**T3】*

RL:当有人贡献代码去做的时候。

***SP:数据库查询在对客户端可用之前，当前缓存在内存中。PHP 程序员能期望这种行为改变吗，以便当服务器发送行时，查询立即可用，这样他们就不必等待了？**T3】*

RL:当各种数据库 API 支持这一点时，它们当然可以。我们已经通过 mysql_unbuffered_query()调用在 MySQL 中支持这一点，并且已经支持了很长时间。

SP: ZendEngine2 计划推出许多令人兴奋的新功能，比如异常处理和成熟的 OOP 支持。你能给我们一个粗略的估计吗，PHP 用户什么时候可以期待一个发布——至少是几个月或者几年？T3】

理查德莱杰特:没有。准备好了就发布。

SP:随着流行的桌面应用程序用 PHP 编写，你认为 PHP-GTK 有前途吗？T3】

RL:我看到 PHP-GTK 主要用于需要为同一个应用程序提供 Web 界面和 GUI 界面的情况。能够为两者使用相同的后端代码是一个巨大的胜利。

***SP:现在 PHP 和 Apache 的开发是并行的吗？在未来，这两个项目有可能以某种方式合并吗？**T3】*

RL: PHP 和 Apache 总是紧密联系在一起，因为它们都是解决网络问题的拼图的一部分。因此，有许多开发人员同时从事这两个项目。但是不行，项目肯定不会合并。那没什么意义。

你认为大公司会在他们的环境中使用 PHP 而不是 J2EE 和微软吗？未来的 NET？T3】

理查德莱杰特:有些人会，所以是的。

***SP:你会对考虑自己开始一个开源项目的年轻开发者说些什么？**T3】*

理查德莱杰特:我不确定在这个意义上这是可能的。有点像坐在那里看着你的手机，试图让它响起来。它总是在你洗澡或其他不方便的时候响起。

我不认为你真的坐下来决定开始一个开源项目。这个“运动”有点像神话，人们喜欢美化它，并赋予它各种不切实际的特征。如果你只有一个很酷的想法，没人会加入你的项目。每个人都有很酷的想法。

如果你构建了足够有用的东西，人们会聚集在你的周围，他们会发现更容易获取你的代码并稍微扩展它来解决他们的问题。如果你的东西是半生不熟的，那么人们可能会忽视你所做的，而只是自己解决他们的问题，或者使用其他东西。

因此，要开始一个开源项目，首先假设你完全依靠自己的力量解决一些困扰你一段时间的问题。这意味着月复一月的工作，以获得实际工作和解决问题的东西。在这一点上，你可以开始考虑你是否想要放弃控制，让别人加入你的努力。

这里的关键词是“放弃控制”。开始一个开源项目并不意味着你突然有了一群可以使唤的程序员。事实上，要让它起步，你必须非常乐于接受早期采用者的建议，尽你所能让你的工具对更广泛的受众更有用。然后你把它全部放弃，让人们对你的代码为所欲为。现在你已经开始了一个开源项目。

SP:你还计划了哪些开源项目？给你无限的时间(和 100 双手)，你想做什么？T3】

理查德莱杰特:嗯，我没有计划 PHP。我认为是从解决问题的角度，而不是从软件项目的角度。我其实讨厌编程，但是我喜欢解决问题。如果我有大量的时间和资源，我想解决什么问题？

最近刚做了父亲，我有一个建造智能婴儿床的宏伟计划。现场视频，音频和各种其他小工具，可以远程观看和控制，让远程朋友和家人与孩子互动。当然，一旦婴儿真的出生了，找到足够的时间坐下来看书几乎是不可能的，更不用说建造一个智能婴儿床了！

另一个非常酷的项目是终极分布式建筑系统。其中我可以指定我有一个带有 80486 处理器的设备，一种特定类型的 NIC，以及任何其他硬件细节，还有介质和 ram 的类型，这个东西将生成一个专门为我的设备定制的小型 Linux 发行版。

然后，扩展一下，可以说我想让它充当防火墙、mp3 服务器、浏览站或其他什么。基本上，你可以把几乎任何硬件设备都装上 Linux，让它变得有用。我家里有很多设备，我知道只要给它们安装更强大的软件，我就可以更好地利用它们，我想找到一种方法来做到这一点，而不必在每台设备上花费 6 个月的时间。

Â

SitePoint 社区和我想借此机会感谢 Rasmus 抽出时间和详细回答我们社区中的问题。他可能不再是 PHP 背后的控制力量，但作为团队中的一员，他肯定会大放异彩，这个团队正在全世界范围内共同努力，将 PHP 推向一个新的高度。

## 分享这篇文章