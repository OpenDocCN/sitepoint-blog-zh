# 比较 Haskell 和 Ruby，第一部分

> 原文:[https://www . site point . com/comparising-haskell-and-ruby-part-I/](https://www.sitepoint.com/comparing-haskell-and-ruby-part-i/)

自从我开始告诉计算机做什么(也称为编程)，我已经学会了几种语言。其中一些语言我不喜欢(C++和 Boost)，一些我“处于中间状态”(Perl)，一些我喜欢*很多* (Ruby、Python、Haskell，也许还有 JS)。

乍一看，Ruby 和 Haskell 似乎相差甚远，几乎没有相似之处。

Ruby 是一种命令式语言(尽管内置了一些函数元素)，但是没有 currying(Haskell 的核心概念之一)，也没有任何尾部调用优化的规定，这使得递归在许多情况下成为一种轻率的选择。此外，它是一种非常实用的语言——速度排在程序员效率之后。它是由 Ruby on Rails 推广的，作为一个 web 框架，Ruby on Rails 可能是最实用的。

另一方面，Haskell 是一种纯粹的函数式语言(如果你不知道这是什么意思，请继续阅读)。函数对于编写语言是绝对必要的，并且是第一类对象。这种语言并不能立即投入使用——比如说，在你可以构建一个小型 HTTP 服务器之前，你必须做大量的阅读工作(这实际上很容易[用 Ruby，用赛璐珞](https://www.sitepoint.com/series/an-introduction-to-celluloid/))。

看得更深一点，并对这两种语言都有所了解(我假设你们都懂 Ruby 如果不是，那就比 Haskell 容易多了:)，我们开始看到非常有趣的相似之处。

## 功能范式

传统或命令式编程有点像烹饪指南。你告诉计算机做这个，然后做那个，然后是其他的事情。函数式编程的工作方式完全不同。

Ruby 是一种命令式语言。这可能不会立即显而易见(如果你没有想过)，但是，编写 Ruby 代码看起来就像是完成某种目标的一系列指导。

在尝试写这些方向的时候，有一些对“状态”的改变和把握。这可能意味着，例如，改变一个变量的值。令人震惊的是，函数式编程没有状态这种东西。所以，没有变化的变量！

现在，回想一下你刚学编程的时候，看到类似“x = x + 1”这样的语句。

当我看到这个的时候，我的第一个想法是——“等等，什么？你就不能取消两边的 x 吗，但是，这样你就得到了一个不可能的方程……”

这样一来，你所学的所有数学知识都变得毫无用处。

但是，有了 Haskell(一种纯粹的函数式语言)，它就把数学还给你了！既然变量不能改变，像上面这样的赋值语句就不可能发生！

命令式语言很自由，但有副作用。副作用是发生在方法的“工作环境”之外的事情。例如，它意味着通过打印一行来改变方法中屏幕的状态。

但是，副作用真的很可怕。当用命令式语言调用一个方法时，你不能保证它会做你想要它做的事情。当稍后用相同的参数调用时，该方法可能会返回完全不同的结果，因为它可能会受到某些外部状态的影响。

在纯函数式语言中(还是 Haskell)，副作用*几乎*不可能发生。这也给了我们一种叫做**的参照透明性**。引用透明性意味着我们调用的函数将对一组参数给出相同的结果，不管外部世界发生了什么。但是，如果副作用不会发生，我们怎么能把东西打印到控制台上呢？嗯，这是通过一些叫做单子的魔法来完成的，单子基本上试图把副作用塞进一个完全纯净的，没有状态和副作用的环境中。

纯函数式语言的一个很好的例子是数学。数学中没有副作用这种东西，因为没有副作用会影响到什么！都是定义和使用这些定义。

这个和 Ruby 比怎么样？这就是语言差异巨大的地方。Haskell 是令人难以置信的纯净，在那里一切都是干净的，不允许你制造混乱。而在 Ruby 中，如果事情处理不当，代码可能会变成状态变化的一团乱麻。Ruby 还使得在需要的地方执行副作用变得容易得多，而对于 Haskell 来说，这是一件痛苦的事情。

## 排版系统

众所周知，Ruby 有一个动态类型系统，这意味着类型检测是在运行时执行的。因此，如果变量类型不匹配存在某种问题，我们只能在运行时发现这一点(即它会崩溃或抛出异常)。

这看起来很糟糕，因为我们可能一直有程序崩溃。然而，如果你能在整个程序中跟踪你的类型，这将大大加快开发速度。

如果你对 Java 有任何经验，Java 有一个*静态*类型系统，你应该知道像 Java 这样的类型系统会引起的问题。

Haskell 有一个非常严格的静态类型系统。起初，这让大多数 ruby 爱好者畏缩不前，而且看起来肯定更令人恼火。但是，让我告诉你，这是一个救命恩人。

Haskell 类型系统有一个叫做*类型推理*的东西。因此，在几乎所有的情况下，你实际上不必“写下”任何函数的类型。正因为如此，Haskell 的类型系统令人难以置信的简洁和快速，同时提供了严格的静态类型系统的便利性和安全性。

在这方面，Ruby 和 Haskell 初看起来有很大的不同。一个是高度动态和流动性，另一个是刚性和难以置信的强大。但是，来自两种类型系统的最终结果是一种非常敏捷和快速的体验，让您在很大程度上避免考虑类型。

然而，作为个人偏好，我更喜欢 Haskell 类型系统。我几乎从来没有注意到排版系统。它还提供了额外的好处，即在编译时进行出色的类型检查，如果编译成功，它可能不会崩溃。

一个重要的考虑因素是数据模型。像几乎所有其他流行语言(除了 JS)一样，Ruby 有一个 OOP 模型。Haskell 使用了一种叫做代数数据类型的东西，这需要花相当多的时间来解释(特别是对于已经有 OOP 概念的人。)基本上，这些数据类型没有太多的层次结构，如果使用得当，会非常强大。

## 暂时结束了

希望这篇文章能让你对什么是函数式编程有一个大致的了解，并开始对 Haskell 和 Ruby 进行比较。

有一点是肯定的。如果你是个 Rubyist，学一点 Haskell 也无妨。它甚至可能改变你写代码的方式(对我来说就是这样)。

在下一篇文章中，我们将讨论 Haskell 和 Ruby 的更多相似和不同之处，比如内置方法(和函数)以及两种语言的社区是如何工作的。

LYAH 指南是一个很好的开始方式！

## 分享这篇文章