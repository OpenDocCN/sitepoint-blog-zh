# URL 重写初学者指南

> 原文:[https://www.sitepoint.com/guide-url-rewriting/](https://www.sitepoint.com/guide-url-rewriting/)

这篇文章写于 2002 年，至今仍是我们最受欢迎的帖子之一。如果你渴望了解更多关于 URL 的知识，你可能会对克雷格·巴克勒最近写的这篇关于“www”前缀的文章很感兴趣。

所以你是一个网站开发人员，你的网站上有所有的花里胡哨的东西，你创建的基于网络的应用程序既漂亮又好用。但是这些问题呢？

## 应用程序必须安全

用户不能通过修改指向您的应用程序的 URL 来损害您的站点。为了确保你的站点的安全，检查所有来自你的访问者的 GET 变量(我认为提到 POST 变量是必须检查的是微不足道的)。

例如，假设我们有一个简单的脚本，显示一个类别中的所有产品。

一般是这样叫的:

```
myapp.php?target=showproducts&categoryid=123
```

但是，如果 ScriptKiddie(tm)在他的浏览器中输入以下内容，这个应用程序会做什么呢:

```
myapp.php?target=showproducts&categoryid=youarebeinghacked
```

嗯，我见过的许多网站都会抛出一些错误消息，抱怨使用了错误的 SQL 查询、无效的 MySQL 资源 id 等等。这些网站不安全。谁能保证一个昨天就要完成的站点将拥有所有的参数验证——即使在只有两三个人的程序员团队中？

## 应用程序必须对搜索引擎友好

这不是众所周知的，但许多搜索引擎不会索引你的网站的深度，如果它包含像上面提到的动态页面的链接。它们只是获取 URL 的“name”部分(即问号之前的所有内容，其中包含大多数脚本正确运行所需的参数)，然后尝试获取页面的内容。为了清楚起见，这里有一些来自我们虚构页面的链接:

```
myapp.php?target=showproducts&categoryid=123 myapp.php?target=showproducts&categoryid=124 myapp.php?target=showproducts&categoryid=125
```

不幸的是，很有可能一些搜索引擎会尝试下载以下页面:

```
myapp.php
```

在大多数情况下，像这样调用脚本会导致错误，但如果不是这样，我敢肯定它不会显示链接指向的正确内容。试试在 google.com 上搜索:

<q>“您的 sql 语法有错误”。php 论坛</q>

在列出的脚本中既有巨大的错误也有安全威胁——同样，这些脚本对搜索引擎不友好。

## 应用程序必须对用户友好

如果您的应用程序使用如下链接:

```
http://www.downloadsite.com?category=34769845698752354
```

那么你的大多数访问者会发现，每次从你的网站主页开始，很难回到他们最喜欢的类别(如网络工具/信使)。相反，他们希望看到这样的 URL:

```
http://www.downloadsite.com/Nettools/Messengers
```

当用户在位置字段中键入时，从浏览器的下拉列表中找到(选择)URL 甚至更容易(当然，这只有在用户以前访问过的情况下才有效)。

## 那你呢。

现在，您已经具备了回答以下问题所需的一切:

*   你的网站真的足够安全吗？
*   你能保护你的网站免受黑客攻击吗？
*   你的网站搜索引擎兼容吗？
*   你网站上的网址是否“用户友好”——它们容易记住吗？你希望他们是吗？

(所有五个问题都回答“是”的人:来杯啤酒！)

## 优雅的解决方案

好吧，好吧，我想你想知道解决办法。好吧，我们开始吧。你需要:

*   安装了每个人最喜欢的 Apache 服务器(1.2 版或更高版本)
*   或者，为 Apache 配置您最喜欢的 CGI 脚本。是的，我说的是可选的，因为我们要做的事情将发生在 Apache 中，而不是 PHP 或 Perl 等。
*   因为(几乎)Apache 中的一切都是通过它的配置文件(httpd.conf。htaccess 等。)，熟悉这些文件可能会对您有所帮助。您还需要对该文件具有写访问权限，并且能够重新启动 Apache。我强烈建议您首先在私有的测试服务器上做所有的事情，而不是在您自己或您公司的生产服务器上！

你们大多数人都读过和/或听说过 mod _ rewrite——是的，它是一个 Apache 模块，而且它甚至是默认安装的！去检查你的模块目录(注意，在*nix 操作系统下，你的 Apache 编译时可能缺少 mod_rewrite，在这种情况下，请咨询你的系统管理员)。

我们将使用这个小模块来实现上面提到的所有功能。要使用这个模块，我们首先必须启用它，因为它最初在配置文件中被禁用。打开 httpd.conf 文件，取消对以下行的注释(删除尾部的#s):

```
#LoadModule rewrite_module modules/mod_rewrite.so #AddModule mod_rewrite.c
```

第一行告诉 Apache 加载 mod_rewrite 模块，而第二行允许使用它。重启 Apache 后，mod_rewrite 应该被启用，但还没有运行。

**Go to page:** [1](/guide-url-rewriting) | [2](/guide-url-rewriting-2/) | [3](/guide-url-rewriting-3/) | [4](/guide-url-rewriting-4/)

## 分享这篇文章