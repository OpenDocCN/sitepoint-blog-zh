# 元素什么时候取焦点？

> 原文：<https://www.sitepoint.com/when-do-elements-take-the-focus/>

当你用鼠标点击元素时，它们会成为焦点吗？它们是否显示焦点指示，如虚线边框或焦点环？

答案总是<q>是</q>——在我看来，当然应该是这样——然而浏览器的行为在最近几年发生了微妙而重大的变化。

现在，如果你快速搜索*抑制*焦点轮廓的方法，你会得到成千上万的结果。<q>我怎样才能去掉那难看的虚线边框，它破坏了我漂亮的设计？</q>哭声来了。网络行业总是充斥着那些认为这没什么的人——他们认为他们武断的审美观比可访问性更重要；他们不仅想移除焦点的*视觉指示*，还想阻止链接和表单域一起占据焦点。

相当多的开发人员甚至不明白其中的区别，所以我想我可以同情那些被卖给这样的解决方案的人:

```
<a onfocus="this.blur()">
```

他们真正想要的是这个:

```
a:focus { outline:none; }
```

这两者都是可访问性的灾难，但从设计的角度来看，后者是可以理解的；或者至少，这是可以理解的关于*鼠标触发的*焦点。让我澄清一下——**你永远不应该阻止元素获得焦点，也不应该在用户切换到一个元素**时移除焦点指示(当然，除非你用别的东西替换它)。

但是甚至我也被这样的解决方案所吸引:

```
a:focus:not(:hover) { outline:none; }
```

**那么当用户用鼠标点击**时阻止焦点指示可以吗？越来越多的浏览器厂商似乎是这样认为的，在这种情况下，许多厂商不再添加原生大纲。事实上，在某些情况下，他们根本不关注元素。

为了弄清楚这一点，[我做了一系列测试](http://jspro.brothercake.com/focus/results.html "focus test results")。以下是头条新闻:

*   在 Firefox 中，当用鼠标点击时，链接不会显示原生焦点轮廓，除非你在当前页面浏览期间已经使用了`Tab`键。
*   在 Opera 和 IE10 中，当用鼠标点击时，链接从不显示原生焦点轮廓。
*   在 Chrome 和 Safari 中，链接在用鼠标点击时根本不会占据焦点，除非它们有`tabindex`。
*   在 Firefox for Mac、Chrome 和 Safari 中，一些类型的表单字段在用鼠标点击时根本不会占据焦点；这种行为仅限于没有键入输入的字段，如单选按钮、复选框、按钮、颜色选择器和滑块。

像`<span>`这样的元素也有一些有趣的地方需要注意，它们通常是不可聚焦的，但是添加了`tabindex`后就可以聚焦了。请记住，带有`tabindex="0"`的元素会像链接和表单域一样添加到 tab 键顺序中，而带有`tabindex="-1"`的元素只能通过*编程获得*焦点。

除了，那不是真的:

*   在所有浏览器中，带有负 tabindex *的元素可以通过用鼠标点击它们来聚焦*，它们只是没有按 tab 键顺序排列。

我发现其中最奇怪的异常——键盘可访问的元素不能用鼠标聚焦，而鼠标聚焦的元素却不能用键盘访问！

那么，这一切是怎么回事呢？坦白说，很难确定。这些行为并不完全是新的，但它们是最近才出现的。例如，如果我们回到 Firefox 3.6，我们会发现上面提到的警告都不适用——当你用鼠标点击它们时，所有可聚焦的元素都获得焦点，并且都显示本地焦点指示。

如果我们看一下**平台约定**，也许我们可以把它放在某种背景下。例如，在 Mac 对话框中，当你用鼠标点击文本框和菜单时，它们会成为焦点，而按钮、收音机和滑块则不会。这与我们之前提到的 Mac 版、Chrome 版和 Safari 版 Firefox 的行为一致。我们在 Firefox for Windows 中没有看到这种行为，事实上，当你点击窗口中的所有对话框窗口小部件时，它们都会获得焦点。然而，在 Chrome for Windows 中，我们得到了与 Mac 相同的行为，所以 Chrome 不能像 Firefox 那样声称遵守平台约定。

但是平台惯例对 web 应用程序到底有多重要呢？网络有它自己的惯例，我不认为把平台惯例强加给它是个好主意。让开发人员关心可访问性已经很难了，不需要从特定于平台的角度去考虑！

我个人觉得这些都不是什么好事。我认为所有可聚焦的元素都应该通过任何交互方式获得焦点，并且在获得焦点时应该总是显示一个本地焦点轮廓(除了带有`tabindex="-1"`的元素，它根本不应该是用户可聚焦的，因为这就是它的用途)。但我对设计师的愿望也不天真，我确实对专注与设计的冲突有一定的同情。

然而，**最重要的是用户的需求，用户的易访问性需求在所有需求中排名最高**。我们当中有谁曾经被用户抱怨过，说他们不喜欢那些虚线或者亮蓝色的环？用户并不像我们一样珍惜这些东西，他们只是希望它能工作。

## 分享这篇文章