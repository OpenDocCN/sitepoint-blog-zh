# 使用 Rails 片段缓存的效果

> 原文：<https://www.sitepoint.com/the-effect-of-using-rails-fragment-caching/>

Rails 提供了一些缓存技术，其中之一是片段缓存。片段缓存是一种非常简单的缓存视图位的方法。

在检查了您的查询是否做了明智的事情之后，Rails 堆栈下一个最慢的部分通常是视图呈现，尤其是在涉及大量 URL 生成的情况下。通常情况下，你不希望将整个页面缓存为静态 HTML 并绕过 Rails，相反，你希望保留 web 应用程序的动态优点，只缓存较慢的部分。

我最近在 toolmantim.com 主页上添加了片段缓存。在我添加片段缓存之前，我的`production.log`看起来有点像这样:

```
 Completed in 0.12385 (8 reqs/sec) | Rendering: 0.10077 (81%) | DB: 0.02210 (17%) | 200 OK [http://toolmantim.com/] 
```

在对应用程序布局的两个部分和主页的主体进行片段缓存后，my `production.log`看起来有点像这样:

```
 Completed in 0.00615 (162 reqs/sec) | Rendering: 0.00583 (94%) | DB: 0.00000 (0%) | 200 OK [http://toolmantim.com/] 
```

渲染速度提高了 17 倍，代价是 2 个简单的缓存清理器模型、4 行控制器代码和 6 行视图代码。我认为花 30 分钟来实现它是值得的。

除了片段缓存，我还可以使用其他一些东西来提高性能——通过只选择所需的列来优化 DB 调用，或者编写一个助手来生成文章和评论 URL，而不是依赖 Rails 来为我解决所有问题——但我想看看我能以多快的速度制作页面，同时仍然保持它在 Rails 堆栈中，并保持灵活性。

请关注明天的帖子，届时我将展示在您自己的应用程序中利用片段缓存是多么容易。

## 分享这篇文章