# 实用代码重构，第 1 部分——什么是好代码？

> 原文:[https://www.sitepoint.com/practical-refactoring-1/](https://www.sitepoint.com/practical-refactoring-1/)

重构是为了让你的代码更好，重新思考你的代码，其中的一切。在这个关于代码重构的系列中，我将向您展示重构的原因、时间、内容、地点和方式，因为重构与其说是一门科学，不如说是一门艺术。在这一部分中，我将解释是什么让代码变得优秀，这是我在后面的系列文章中构建的基础。

## 什么是好代码？

重构的主要目标是干净的代码，更好的代码，或者你可以称之为什么。但是什么才是真正的好代码呢？好的代码是闻出来尝出来的。如果你写过很多代码，你就会明白我的意思；凭经验你很容易辨别代码是好是坏。但是，如果您是编码新手，但仍然想把事情做好，该怎么办呢？

我们可以用这三条准则来总结好代码的各个方面:

*   易读的
*   可扩张的
*   高效的

## 可读性

当您的代码遵循一些标准的、众所周知的语法、风格和文档实践时，或者换句话说，当您和您的开发同事能够以最小的模糊性轻松地解释代码时，您的代码就被认为是可读的，因此在风格和外观方面是可维护的。为了实现这一点，您应该遵循一个编码标准。如果您愿意，您可以使用一些公共标准或创建自己的标准，但是无论您选择哪种标准，您的同事都应该发现您的语法、风格、代码文档和注释都是直截了当的、清晰的，并且尽可能不需要进一步的解释。我更喜欢使用公共标准，因为它可以缩短以后加入我的开发团队的新人的学习曲线。

当您尽可能将编程语言的基本结构用于它们的预期用途时，可读性和可扩展性是重叠的，并且为了解决众所周知的问题，您使用众所周知的模式(设计模式)。但是如果你有一个新的问题呢？或者，如果你刚刚为一个老问题精心设计了一个更好的解决方案呢？太棒了。如果你不正确地记录它，其他程序员将不能理解你的新的十亿美元的解决方案！保持你的思维处于最佳状态，想飞多高就飞多高，但是记住要花时间在你的代码中描述你是如何以及为什么要这样做的。

## 展开性

可读性和扩展性都有助于代码的可维护性，并且在某些时候会重叠。但是为了突出区别，可读代码就其风格而言是可维护的，而可扩展代码就其逻辑而言是可维护的。同样的观点也适用于设计模式，因为它们对可读性和可扩展性都有贡献。

当您的代码遵循一些可重用的、逻辑的、众所周知的模式时，它是可扩展的，无论是定义的标准设计模式还是正常的逻辑流程。例如，一些开发人员喜欢使用 Singleton 设计模式来处理数据库连接。作为另一个例子，我们大多数人会使用标准的 foreach 来迭代数组，这是一个标准的流程。在类似的情况下，人们可能会使用 for 循环，甚至 while 循环，但是这在 PHP 中相当少见，所以应该记录为什么这样的结构对于 each 是必要的，以避免混淆。

可扩展性的主要方面是解耦和封装。解耦意味着你的代码(主要是函数/方法和类)不应该互相依赖或重叠；代码应该尽可能的“纯净”，去掉任何重叠的功能和其他不相关的实体。如果您正在编写过程代码，那么您的函数应该只包含其名称所暗示的逻辑；不要让函数做太多！编写代码时使用“工具箱”方法——小的基本例程一起工作来构建大的复杂系统。

封装是解耦不可或缺的一部分。每当您解耦组件时，您已经完成了一些封装。要封装组件，继续将其内部从全局范围中分离出来，并使所有与它的交互都发生在它的接口层。这是一种模块化的方法，它使得以后移除或更新系统的任何部分变得更加容易，这与使您的代码变得杂乱无章的整体设计相反。

## 效率

您应该从任何项目的第一行代码开始就牢记效率，因为众所周知，瓶颈来自于对语言结构的一些非常不明智的使用，例如嵌套几个循环和不明智地使用递归，以及对逻辑模式的一些不明智的使用，例如没有使用缓存和在没有适当缓冲的情况下向/从流发送/接收数据。效率很重要，但不要为了效率而牺牲前两条规则。事实上，牺牲可读性和可扩展性实际上会降低效率！在大多数情况下，效率与应用前两条规则成正比。当出现异常情况时，尽最大努力确保你有其他方法保持你的代码良好。

## 摘要

在本文中，我向您介绍了什么使代码变得优秀。我将讨论限制在三个主要方面:可读性、可扩展性和效率，并描述了每个方面的含义。

现在您已经知道了什么是好的代码，我们可以继续本系列的下一部分了。在第 2 部分中，我将向您展示重构时需要注意的一些事情，以获得更好的可读性。

<small>图片 via[Fotolia](http://us.fotolia.com/?utm_source=sitepoint&utm_medium=website_link&utm=campaign=sitepoint "Royalty Free Stock Photos at Fotolia.com")T3】</small>

## 分享这篇文章