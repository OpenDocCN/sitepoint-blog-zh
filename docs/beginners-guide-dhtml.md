# DHTML 初学者指南

> 原文：<https://www.sitepoint.com/beginners-guide-dhtml/>

作为一名自称的网站管理员，我尽力跟上网络技术的最新发展。我目前的努力方向是动态 HTML。在听到很多关于这项技术以及它将如何最终彻底改变互联网的消息后，我想我必须离开沙发，开始了解它，在我失去称自己为“网站管理员”的权利之前。如果你和我一样对 DHTML 一无所知，这篇教程就是为你准备的。请尽情享受，如果有任何问题，请随时给我发电子邮件。

这是一个很好的问题，我承认我很难找到一个直接的答案。我记得在 JavaScript 新闻组上看到一个帖子，试图回答这个问题:

<q>“DHTML 是 HTML 和 JavaScript 的结合”</q>

我对自己说“那不就是一个上面有 JavaScript 的网页吗？”至少可以说，我很困惑。在搜索引擎上翻遍了数百个搜索结果来寻找这个难以捉摸的答案后，我还是没有找到。所以我想，管他呢，我先学 DHTML，再搞清楚它是什么！现在，我已经是一名 DHTML 程序员了，我想我已经准备好向您展示 DHTML 这个词的一行定义了:

<q>“DHTML 是第四代浏览器中几种内置浏览器功能的组合，使网页更加动态”</q>

你看，DHTML 不是一种脚本语言(像 JavaScript 一样)，而仅仅是一种浏览器特性——或增强功能——使你的浏览器具有动态能力。你真正想学的不是 DHTML 本身，而是使用 DHTML 所需的语法。在做任何事情之前，你可能想快速访问动态驱动来看看这种语言的能力。

就像我说的，DHTML 是一个特性的集合，这些特性一起使你的网页成为动态的。我认为现在重要的是定义 DHTML 的创建者所说的“动态”是什么意思。“动态”是指浏览器在文档加载后改变网页外观和风格的能力。我记得当我学习 JavaScript 时，我被告知可以使用 JavaScript 的 document.write()方法动态创建网页。例如:

document.write("这是动态创建的文本！")

“不错”，我记得我对自己说。但是，如果我不仅想即时创建内容，还想按需创建内容，那该怎么办呢？那时我很天真，我试着这样做了，将上面的代码嵌套在一个函数中，并通过一个表单按钮调用它:

<input type="button" onclick="writeconent()" value="text">

按下按钮无异于大失所望。我的整个网页都被删除了，只剩下这个函数生成的文本。

那是过去的事了。现在，随着 DHTML 的引入，我可以随时根据需要修改网页上的内容，而不用让浏览器删除其他内容。这就是 DHTML 的意义所在。即使在文档加载后，浏览器也能改变外观和样式。

既然我让你们都兴奋起来了，我想我应该给它浇浇冷水。DHTML 技术目前正处于发展阶段，NS 4 和 IE 4 在实现这项伟大的技术上有很大的不同。目前不可能编写一个 DHTML 代码并期望它在两种浏览器中都正常工作。此外，这两种浏览器处于 DHTML 开发的不同阶段；从我自己的了解和听到的情况来看，IE 4 中的 DHTML 远比 NS 4 的强大和通用，我不想帮忙传播什么宣传，就到此为止吧。

这可能是件好事，也可能是件坏事，取决于你的看法。NS 4 中的 DHTML 非常简单，本质上可以归结为一个字层。我自己也很惊讶，但是它的 true- NS 4 完全依赖于一个新标签，叫做<layer>标签，来增强它的 DHTML 魔力。这个新标签是动态的，因为它可以放置在网页上的任何位置(与其他内容无关)，可以四处移动，其内容可以按需更新，等等。</layer>

##### 基本语法

<layer>标签的基本语法不能再简单了(好像 HTML 中的任何标签都很复杂！):</layer>

<layer>层内文本</layer>

<layer>标签是一个内容标签，这意味着您可以向其中添加内容(就像)。继续，试着将上面的代码插入到你的页面中…你会注意到层中的文本浮动在其他文本之上，并与它们重叠。将图层想象为一张纸，它位于页面其余部分的顶部，不占用文档流中的空间。</layer> 

##### 图层属性

一层本身就不能再无聊了，更何况没用。幸运的是，还有更多。层支持的属性允许您使用 x，y 坐标系定位它，给它一个背景，裁剪它(仅使层的特定区域可见)，隐藏它，等等。我在下面列出了最重要的图层属性:

图层属性 id 图层的名称，用于在脚本中识别图层左侧图层相对于 x 坐标的位置顶部图层相对于 y 坐标的位置宽度图层的宽度，单位为 px 或% height 图层的高度，单位为 px 或% bgColor 图层背景的背景颜色图层的背景图像 src 图层内部包含的外部 html 文档

以你喜欢的方式混合搭配不同的属性。

[点击此处查看使用上述属性的样本层](http://www.webmasterbase.com/static/example1.php3)

注意我没有指定 left 和 top 属性。如果没有，图层将定位在您定义它的位置。

##### 脚本层

这是学习图层最重要的事情之一——如何编写它们的脚本。毕竟，是脚本让层活了起来。要访问图层，您需要使用以下语法:

document.layername

访问图层只是第一步。一旦你访问了一个层，你就可以继续操作该层的一个属性来产生动态效果。

点击此处查看图层背景色在红色和蓝色之间互换的示例。

所有层的属性都是读/写的，所以一定要试验每一个属性！

当我开始接受和学习 IE 4 的 DHTML 实现时，我意识到它比 NS 有更多的东西。IE 中的 DHTML 不依赖于任何一个标签，而是从你习惯使用的普通 HTML 标签中派生出新的对象和属性，比如

和。它更强大，但同时也更难掌握。

##### IE 4 的样式对象

IE 4 中的 HTML 元素现在都支持一个样式对象，它本质上是一个“动态”对象，用于操作该元素的外观和“感觉”。和<layer>标签一样，元素也可以被赋予一个“id”属性，这个属性可以用来在脚本编写过程中识别它。例如:</layer>

在您的脚本中，访问“adiv”的样式对象所需的语法如下所示:

adiv .风格

style 对象包含许多属性，通过操作这些属性，可以动态地改变元素的外观。我现在将展示其中的一些属性:

style 对象的重要属性

2.  **backgroundColor** 元素的背景颜色
3.  **backgroundImage** 元素的背景图像
4.  **颜色**元素的颜色
5.  **位置**元素的位置类型。可接受的值是“绝对”和“相对”
6.  **像素宽度**元素的宽度
7.  **像素高度**元素的高度
8.  **pixelLeft** 元素相对于 x 坐标的位置
9.  元素相对于 y 坐标的位置

上述属性仅代表全部受支持属性的子集，但却是最常用的属性。操作任何样式属性的基本语法都是相同的，我将在一分钟内展示这一点。通过访问这些属性，我们可以改变大多数 HTML 元素的外观和样式(而不仅仅是 Netscape 中的<layer>标签)！</layer>

[点击这里观看简单的演示](http://www.webmasterbase.com/static/example3.php3)

注意我是如何改变文本颜色的:

sometext.style.color='red '

我首先使用元素的 id 来访问它，然后，通过样式对象，最后是样式的颜色属性，我能够根据需要轻松地更改文本的颜色！

所有样式属性都是可读/写的，并且以类似的方式访问:元素 id->样式对象->属性名称。

[点击这里查看另一个例子，当鼠标停留在图片上时，图片会展开](http://www.webmasterbase.com/static/example4.php3),当鼠标移开时，图片会恢复到原来的大小。

是的，我知道这不完全是世界上最实际的例子，但它确实很好地说明了 DHTML 的工作原理。图像根据需要改变尺寸，而不需要重新加载文档。这是单靠 JavaScript 永远做不到的。

如果您还没有被 NS 4 和 IE 4 中 DHTML 在语法和功能上的差异所吓倒，那么您已经准备好学习如何使页面上的内容动态化，或者按需改变！

##### NS 4 中的动态内容

在 NS 4 中改变内容涉及到——你猜对了——层标签。NS 浏览器将所有层视为独立于页面其余部分的独立实体，它们有自己的文档对象(文档对象又包含文档支持的其他对象)。理解这一点非常重要，因为层包含另一个文档对象的事实使得在 ns 中创建动态内容成为可能。我将首先构建一个基础层，然后展示如何更改其中的内容:

<layer id="alayer" width="100%" height="30"></layer>

准备好访问上面层的文档对象了吗？下面是所需的语法:

document.alayer.document

所以，知道了这条信息，我就可以写一个每 3 秒改变图层内容的脚本。

点击此处查看网景公司是如何做到这一点的示例。

文本是动态生成和删除的，不需要重新加载文档！

##### IE 4 中的动态内容

在 IE 4 中，动态内容是通过一个名为 innerHTML 的特殊属性实现的，该属性存在于和

标签上。只需将该属性设置为新的 HTML 值，span 或 div 中的内容就会立即更新为新值！我将通过修改上面的例子来说明如何为 IE 4 用户创建动态内容:

点击此处查看适用于 IE 的示例。

同样的结果，只是不同的方式去那里！

如果你喜欢处理动画，你会很高兴地知道，有了 DHTML，整个网页现在就是你的画板了！你可以创建在屏幕上自由飞舞的内容。在 Netscape 中，这是通过操作<layer>标签的 left 和 top 属性来完成的。在 IE 4 中，同样的事情是通过改变 style 对象的 pixelLeft 和 pixelTop 属性来完成的。</layer>

##### NS 4 中的移动元素

回想一下在第 2 课中，图层支持 left 和 top 属性，该属性控制其相对于文档左上角的偏移量。嗯，通过使用简单的数学和几行脚本，我们可以动态更新这些属性，使层移动！下面的示例更改图层的 left 属性，使其在按下按钮时水平移动。

[点击此处查看示例。](http://www.webmasterbase.com/static/example7.php3)

看，我所做的只是不断地添加到左边的属性“空间”来移动它，并设置属性回到它的原始值，当我想层回到它的初始位置。

##### 移动 IE 4 中的元素

顺便说一句，当 NS 和 IE 就 DHTML 的一个实现达成一致的那一天，就是我可以停止编写任何东西的两个版本的那一天(只是发泄一点沮丧)。在 IE 4 中移动元素基本上包括首先将该元素包装在定位的 span 或 div 中，然后更改 span 或 div 的 pixelLeft 和 pixelTop 属性。这听起来很复杂，但实际上很简单。

[点击此处查看示例。](http://www.webmasterbase.com/static/example8.php3)

我首先做的是将名为“飞船”的外部

设置为相对位置，这是使元素可移动所必需的(您也可以将其设置为“绝对”值)。然后，通过操作其 style 对象的 pixelWidth 属性，元素移动。

在“真正的”跨浏览器 DHTML 变得可用之前(换句话说，当 NS 和 IE 恢复理智时)，跨浏览器 DHTML 基本上意味着使用您在 JavaScript 年代选择的各种脚本技术来嗅出用户正在使用哪个浏览器，并执行针对该浏览器的代码。在这一课中，我将首先演示一种创建“跨浏览器”层的方法，然后向您展示我最近学到的一种脚本技术，它可以让您轻松地嗅出冲浪者的浏览器类型。

##### 创建“跨浏览器”层

好了，我们有了理解<layer>标签的 NS，和理解和</layer>

的 IE。如果我们想要创建一个简单的 DHTML 效果，比如一个移动的图像，我们通常需要使用两个标签——一个用于 NS 4 的 layer 标签，一个用于 IE 4 的 div 或 span 标签。不太漂亮，嗯？嗯，我最近了解到，实际上有一种方法可以创建一个只使用一个标签的“跨浏览器”层，尽管它在 NS 端有一点缺陷。显然，NS 4 将绝对定位的 div 视为层。因此，没有任何进一步的延迟，这里是一个跨浏览器层的例子:

NS 4 对待上面的 div 就像对待一个层一样。像任何其他层一样，要访问它，我们首先要遍历文档对象，然后是层的 id:

文档.跨层

在 IE 4 中，我们可以简单地使用 div 的 id:

交叉层

我发现在 NS 中，以这种方式指定一个层，虽然在跨浏览器兼容性方面很方便，但有一个主要的缺点。这种层并不总是以正常层的方式运行，有时甚至会导致浏览器崩溃。做好准备迎接意想不到的事情吧！

##### 浏览器嗅探-对象检测

直到最近，每当我想确定我的冲浪者的浏览器类型时，我都会像大多数 JavaScript 程序员一样使用 navigator 对象。下面的例子说明了如何使用这个对象来探测 NS 4 和 IE 4:

<q>var ns4 =(navigator . appname = = " Netscape "&&navigator . appversion>= 4)var ns4 =(navigator . appname = = "微软 Internet Explorer "&&navigator . appversion>= 4)</q>

就我个人而言，我讨厌使用 navigator 对象——它使用起来太复杂了(看看上面的混乱就知道了！).嗯，我有好消息要告诉你。实际上有一种更快的方法可以嗅出不同的浏览器，这种方法叫做对象检测。

这个想法是基于 JavaScript 的工作方式。如果浏览器不支持某个特定的对象，当您引用它时，JavaScript 将返回 null。知道了这个事实，我们可以在 if 语句中使用对象引用(代替 navigator 对象)来确定用户的浏览器。

我们来做一个例子。我们知道 NS 3+和 IE 4+支持 document.images 对象。如果我们想嗅出这些浏览器，我们会这样做:

<q>if (document.images) alert("你用的是 NS 3+或 ie4+"</q>

将上面的内容翻译成英语，它是这样的:“如果浏览器支持 images 对象(只有 NS 3+和 IE 4+支持)，提示一条消息。

将对象检测视为确定用户浏览器类型的间接方式。对象检测不是直接确定用户浏览器的名称和版本(通过 navigator 对象)，而是一种更通用、更简单的浏览器嗅探技术。

那么，如何利用物体检测嗅出 NS 4 和 IE 4 呢？嗯，只有 NS 4 支持 document.layers 对象，只有 IE 4 支持 document.all .我们可以利用这些知识很容易地确定用户使用的是 NS 4，IE 4，还是两者都用:

<q>if (document.layers) alert("你用的是 NS 4+"</q>

if (document.all) alert("你用的是 IE 4+")

if(document . layers | | document . all)alert("您使用的是 NS 4 或 IE 4+")

现在你再也不用回到杂乱的 navigator 对象来进行浏览器嗅探了！

##### DHTML 资源

显然，本教程只是作为对 DHTML 的介绍。这里有几个很好的资源可以继续你的 DHTML 努力:

*   [动态驱动 DHTML 示例](http://dynamicdrive.com/)
*   [MSDN 的 DHTML 指南](http://msdn.microsoft.com/workshop/author/default.asp)

## 分享这篇文章