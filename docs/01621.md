# 如何选择完美的图片格式来优化你的网站

> 原文:[https://www . site point . com/how-to-select-the-perfect-image-format-to-optimize-your-website/](https://www.sitepoint.com/how-to-select-the-perfect-image-format-to-optimize-your-website/)

*本文由 [Cloudinary](http://synd.co/2m99d8d) 赞助。感谢您对使 SitePoint 成为可能的合作伙伴的支持。*

当在网站上添加图片时，我们大多数人都会本能地知道避免使用 GIF 格式的照片，避免使用 JPEG 格式的图形。我们当中懒惰的人——也就是我——可能会选择巴布亚新几内亚做任何事情，并希望得到最好的结果。

那么我们为什么要这样做呢？这一切都归结于用于以特定文件格式创建图像的编码。JPEG 适合摄影(“P”代表“摄影”)，因为它模糊了锐利的边缘，但保留了平滑的渐变。使用 JPEG 对具有大的、清晰的颜色块的图像进行编码会导致清晰度损失和编码效率低下。

相反，GIF 适合徽标或简单的方块图，因为它专注于统一颜色区域之间的*变化*。这显然对照片没什么用，因为照片的颜色几乎是逐像素不同的。

作为一个例子，这张图片以 JPEG 格式出现在 **106Kb** :

![JPEG photograph](../Images/a4753fde646f4a856bbfba7cd595ae15.png)

然而，它以 GIF 格式编码，达到了惊人的 517Kb。仅仅通过使用不合适的图像格式，就使**几乎放大了 5 倍**。哦亲爱的。

它设法命中编码为 PNG 的 329 kb。虽然没有那么糟糕，但这仍然比使用最合适的图像内容格式时的**大 3 倍多。**

正如我们在这里可以很容易地看到的，主要的图像格式最适合不同类型的内容，为图像选择错误的格式会导致潜在的显著的、不必要的膨胀。

为了避免不必要的页面膨胀，你必须确保上传到你网站上的每张图片都是以最合适的格式编码的，而不仅仅是你收到时的格式。

## 浏览器支持

到目前为止，我们已经介绍了三种“经典”图像文件格式——每个人都知道和喜欢的原始格式。这就是开始变得棘手的地方:浏览器都在推不同的下一代图像格式。Chrome 有很棒的 WebP，Edge 支持 JPEG XR，Safari 有 JPEG 2000。

**浏览器支持下一代图像格式**

|  | **WebP** | **JPEG XR** | **JPEG 2000** |
| **铬合金** | **是** | X | X |
| **边缘** | X | **是** | X |
| **狩猎之旅** | X | X | **是** |
| **火狐** | X | X | X |

例如，在各种情况下，WebP 可以提供比 GIF、PNG 和 JPEG 更好的结果。对于我们上面使用的测试图像，它的大小为**90.5 kb——比 JPEG 节省了大约 15%** 。但是，如果请求图像的设备是 Chrome、Opera 或 Android 浏览器，目前只能使用这种图像类型。

**JPEG XR** 是微软自己的格式——JPEG 扩展范围——并在基本 JPEG 编码的基础上进行改进，甚至支持透明性(如 PNG 和 WebP)。JPEG XR 格式的测试图像重 **104Kb** : **大约 2%** 削掉了原始 JPEG 图像。自然，这只适用于 IE9+和 Edge，顾名思义，它最适合摄影图像。

*因此，你不仅要确保使用最合适的图像内容格式，还需要考虑最适合请求图像的设备的格式。*你甚至可能需要为每张图片创建四个或五个版本:一个以经典的三种格式中的一种编码(适用于所有设备)，另一个用于新的、浏览器特定的下一代格式(以享受新格式的优化优势)。那要花很多时间和精力。

## 即将推出的图像格式

到目前为止，我们已经介绍了可以在所有浏览器中使用的“经典”格式，以及一些主流浏览器中令人印象深刻的新格式。

不均衡的浏览器支持意味着，如果我们想利用新的格式，我们需要在我们的网站上为每个图像创建多个不同的版本。

现在这里有一个曲线球:迄今为止不支持的图像格式。像 FLIF 和 BPG 这样的格式正在发展壮大，其中一种浏览器推出这种支持只是时间问题。

这对你意味着什么？您可能需要以一两种新的格式重新生成所有现有的图像，这需要更多的时间和精力。

## Cloudinary 的自动格式

令人高兴的是，有一个很好的解决方案: [Cloudinary 的](http://synd.co/2m99d8d)“自动格式”功能可以让你上传一张原始图像——甚至可能是最不适合内容的*格式*——通过使用一个聪明的 URL 参数，你可以以最适合终端用户的*格式*发送它，即使未来出现新的格式。

如果我们将 f_auto 参数添加到图像 URL 中，图像格式现在由 [Cloudinary](http://synd.co/2m99d8d) 自动确定:

**http://RES . cloud inary . com/oto motech/image/upload/w _ 800，f_auto/kite_xikqxa.jpg**

在 Chrome 中查看该 URL 将会得到 WebP 响应；在 Edge 中，它将是一个 JPEG XR 图像。在 Firefox 中，它将是原始风格的 JPEG。

有了图像引用中的这一设置，无论现在还是将来，您都不必担心跨浏览器的图像格式支持。极其强大、经得起未来考验的东西。

如果你还没有这样做，前往 [Cloudinary](http://synd.co/2m99d8d) 获取你的[免费账户](http://synd.co/2nnRYB7)。

**参考文献**

*   [图像格式支持](http://synd.co/2mKfpYm)
*   [FLIF](http://synd.co/2mKd3ZE)
*   [BPG](http://synd.co/2nenAtx)
*   即将推出的对未来格式的支持，[例如](http://synd.co/2msAcxo)。

该内容由[通过辛迪加广告](http://synd.co/1EqdFWZ)赞助。

## 分享这篇文章