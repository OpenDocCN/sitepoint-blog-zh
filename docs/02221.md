# PHP-FIG 的过去、现在和未来

> 原文:[https://www . site point . com/the-past-present-and-future-of-the-PHP-fig/](https://www.sitepoint.com/the-past-present-and-future-of-the-php-fig/)

PHP 框架互操作性小组(PHP-FIG，或简称 FIG)正处于十字路口。许多电子已经被牺牲谈论无花果的磨难最近，但可悲的是，它一直是 FUD，很少努力花在积极的。应 SitePoint 的邀请，我想对 FIG 和 PHP 社区提出一个更积极的观点，并展示为什么 FIG 能够并且应该继续对 PHP 生态系统产生积极的影响。

![Illustration of an ancient War Council](../Images/9e4e08ba5c349552718a009d42327de4.png)

通过介绍，我是 Drupal 的 FIG 代表，从 2009 年 11 月开始就一直是，现在快 7 年了，这使我成为任职时间最长的 FIG 代表之一。我是 PSR-6 的编辑，也是 PSR-13 的现任编辑，还特别帮助了 PSR-3 和 PSR-7 的规范。我和 Phil Sturgeon 一起帮助 PSRs 设计了当前的 FIG 工作流程。在 Drupal 方面，我是 Drupal 8 采用 PSR 0 和 PSR 3 的主要驱动者之一。

## 不愉快的开始

FIG 于 2009 年 5 月在芝加哥 php[tek]召开首次会议后，以“PHP 标准组”的名义成立。最初，它是通过 standards@lists.php.net 的邮件列表建立的，据称目标是建立它的第一个规范——[PSR-0](http://www.php-fig.org/psr/psr-0/)自动加载标准——以及其他可能的社区标准。

不足为奇的“你以为你是谁？”对这一假设的反对是迅速而果断的，该小组很快被赶出了 lists.php.net，转而成立了一个谷歌小组进行协调。在接下来的几年里，除了在 2009 年末接纳一些额外的人/项目(包括代表 Drupal 的真实的你), PHP 标准组几乎没有做其他的事情。在社区的眼中，PHP 标准组还没有赢得这样称呼自己的权利。

## 缓慢但稳定的增长

快进到 2011 年 10 月。这个团体彻底消亡两年后，又开始活跃起来。它将自己重新命名为“框架互操作性小组”，尽管它仍然没有有效的规章制度，也没有明确的使命声明，而是致力于“我们决定从事的任何工作”在那个时期被攻克的规范包括 [PSR-1](http://www.php-fig.org/psr/psr-1/) 编码标准、 [PSR-2](http://www.php-fig.org/psr/psr-2/) 编码风格标准和 [PSR-3](http://www.php-fig.org/psr/psr-3/) 测井接口。

有一些关于接口是否是 FIG 定义的“公平游戏”的争论，因为它没有任务声明。因此，2013 年 3 月，我进行了一项民意调查，以评估参与 FIG 的人(包括项目成员和其他人)是倾向于“软规范”(如编码标准)还是“硬规范”(如接口)，结果[返回了](https://groups.google.com/d/msg/php-fig/yS08ZRvFqdM/HXB3gYnblUUJ)“以上都是，但倾向于接口”。不久之后，[的一项类似调查](https://groups.google.com/d/msg/php-fig/3hPX9N0eru4/TTQelgrPoBAJ)显示出适度倾向于前瞻性的但实践指导的规范(而不是“只记录已经完成的工作”或“从头开始构建新的东西”的极端)。

尽管名称中有“框架”这个词，FIG 也从来不仅仅局限于“框架式”项目。除了一开始是一个定义非常模糊的词之外，FIG 的成员迅速增长到纯框架成员与独立的库、CMSes、Wikis、电子商务套件和其他独立应用程序一样是决定性的少数。协作和互操作性的好处不仅限于“框架”。

对 FIG 的参与也不明确。最初的创始人大多是项目负责人，但不完全是。早期，关于成员是“人”还是“项目”有很多争论；也就是说，国际体联成员是代表他们的项目的大使，还是仅仅因为碰巧领导了一个项目而决定“酷到足以”为生活投票的人？这在 2013 年 4 月进行了投票，章程也进行了明确的修改，让投票代表成为代表他们项目的大使。尽管结果显而易见，但少数人拒绝承认这一决定，并表现得好像从未发生过一样；他们的说法有些道理，因为在实践中，人们总是与一个人互动，而不是与一个“项目”互动，人就是人，但团体和章程已经说话了。

出现的另一个问题是开发中规范的所有权。从技术上讲，没有人对任何事情负责，所以多个规范(后来成为 PSR-4 自动加载标准和 PSR-6 缓存标准)有来自不同人的多个竞争版本，没有人能知道哪个是“真正的”版本。显然，这是次优的。

因此，在 2013 年 7 月，该小组通过了一个新的工作流程细则，主要由 Phil Sturgeon 和我本人撰写，该细则为 PSR 草案定义了一个明确的编辑、协调人和发起人，从而创建了一个工作小组的框架。在那个模型下，小组通过了 [PSR-4](http://www.php-fig.org/psr/psr-5/) 自动加载标准、 [PSR-6](http://www.php-fig.org/psr/psr-6/) 缓存标准、 [PSR-7](http://www.php-fig.org/psr/psr-7/) HTTP 消息标准。

## 社区范围的影响

当然，FIG 发布的各种 PSR 对 PHP 社区的影响远远超出了少数成员项目。真空中定义的标准有办法做到这一点。

*   PSR-0 是 Composer 的关键推动者，它改变了 PHP 生态系统。
*   PSR-1 和 PSR-2 现在是许多 ide 中的预置，这使它们成为几乎所有 PHP 项目的默认编码标准(除了少数几个在 PSR-2 之前就有大量代码库的人，尽管有压力，对他们来说转换是不切实际的)。
*   PSR-3 记录器已经安装了超过 3700 万次。对于 PSR 7 号来说，大约是 1100 万。
*   PSR-7 HTTP 消息传递标准催生了一个试验 HTTP 中间件的家庭手工业，它已经在某种程度上被许多(如果不是大多数)主要项目所采用。

尽管开始时有争议，FIG 实际上已经成为 PHP 的标准团体。它花了很长时间才赢得这个奖项，但它确实做到了，这要归功于几十个人的努力，包括国际体联的成员和非成员。去年一月开始的 Reddit 主题显示，虽然不是普遍的，但 FIG 明显倾向于站出来正式接受这个角色。

今天，FIG 有许多处于不同开发阶段的规范，从刚刚开始到接近完成，包括:

*   [PSR-9](https://github.com/php-fig/fig-standards/blob/master/proposed/security-disclosure-publication.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/security-disclosure-publication-meta.md))和 [PSR-10](https://github.com/php-fig/fig-standards/blob/master/proposed/security-reporting-process.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/security-reporting-process-meta.md))——安全报告和自动化安全咨询。
*   [PSR-11](https://github.com/container-interop/fig-standards/blob/master/proposed/container.md) ( [背景](https://github.com/container-interop/fig-standards/blob/master/proposed/container-meta.md))——依赖注入容器互操作性。
*   PSR-12 ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/extended-coding-style-guide-meta.md))——修改了编码标准，将 PHP 7 考虑在内。
*   [PSR-13](https://github.com/php-fig/fig-standards/blob/master/proposed/links.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/links-meta.md))——超媒体链接处理。
*   [PSR-14](https://github.com/php-fig/fig-standards/blob/master/proposed/event-manager.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/event-manager-meta.md))——赛事经理/调度员。
*   [PSR-15](https://github.com/php-fig/fig-standards/blob/master/proposed/http-middleware/middleware.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/http-middleware/middleware-meta.md))–PSR-7 的 HTTP 中间件。
*   [PSR-16](https://github.com/php-fig/fig-standards/blob/master/proposed/simplecache.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/simplecache-meta.md))——一个简化的、简单案例的缓存接口(旨在轻松包装 PSR-6)。
*   [PSR-17](https://github.com/php-fig/fig-standards/blob/master/proposed/http-factory/http-factory.md) ( [背景](https://github.com/php-fig/fig-standards/blob/master/proposed/http-factory/http-factory-meta.md))–PSR-7 的 HTTP 工厂。

这些提案的大多数编辑本身并不是 FIG 成员。不管最初六个人的意图是什么，FIG 早已超越了它卑微的开始。

## 成长的烦恼

然而，FIG 的内部流程并没有随着团队一起成长。最初是模仿 PHP 内部的混乱状态，它根据需要采用了 process。(尽管更准确的说法是，它最初除了“我们有一个邮件列表”之外，没有模仿任何其他东西。)最近几年很多人都指出了 FIG 的结构问题。

*   作为一名项目领导并不一定能让某人成为设计标准的佼佼者，无论是接口标准还是更“软”的规范。
*   大多数项目领导，或者他们的代表，除了 FIG 之外还有很多事情要做，所以经常只在投票时才注意，即使那时也是如此。由于法定人数不足，几次投票都失败了，许多平凡的行政工作都没有得到解决，因为没有人知道谁应该去做这些工作。
*   尽管单一的编辑有助于建立一个明确的权威点，但这个人可能不是特定规范主题的唯一或最好的权威。在理想的情况下，许多直接参与规范或受规范影响的人在谈判桌上拥有平等的席位。
*   这个过程对外人来说仍然太不透明，甚至对一些内部人士来说也是如此。有时很难判断在一个给定的规范中从哪里着手，因为根本没有一致性。
*   成员规则仍然赋予项目领导比其他任何人更高的特权；PHP 社区有几十个聪明、熟练的开发人员，他们对规范的制定很有价值，但因为他们不是项目领导或项目领导的副手，他们从来没有投票权。
*   尽管如此，如上所示，认为 FIG 的工作只影响成员项目的想法已经变得近乎可笑的天真。然而，只有少数人在餐桌上受到欢迎。

2015 年末，FIG 增加了一个由项目代表选举产生的 3 人秘书职位，处理管理任务，但不参与技术任务。我个人认为，这种变化是一个巨大的成功，因为管理任务现在实际上正在完成，秘书们已经能够帮助标准化和正式化许多围绕创建规范的必要文书工作。(不仅仅是说一点点！)尽管如此，FIG 还是不完整。

这在 2015 年 12 月和 1 月达到了顶点，几个[线程](https://groups.google.com/d/msg/php-fig/RK9UuZjt8j4/-fC76gPRCAAJ)讨论 FIG 的各种缺点。12 月中旬，我试图将他们聚集到一个更广阔的视角中，来看待“图 T5”的“T4”状态，这引发了一场漫长而活跃的对话，在很大程度上就问题达成了一致。这包括对其他标准团体遵循的过程的讨论，包括 ISO 和 IETF。这反过来促使我在一月中旬发布了一个受 IETF 启发的提案概念，我称之为“图 3.0”。(图 2 是 2013 年的编辑/协调员/赞助商模式，图 1 是之前的完全免费模式。)我鼓励那些对这个主题感兴趣的人至少阅读一下这些帖子的开头部分，以了解背景知识。

这项提议得到了广泛的赞同，尽管并非普遍赞同。因此，在迈克尔·库勒姆的大力帮助下，我着手将这个“头脑风暴”转变为对章程的一个更正式的修改，这个修改在 4 月份被发布到了名单上。

## 图 3.0

在[拉动请求](https://github.com/php-fig/fig-standards/pull/752)中可以看到完整的提案，迈克尔已经为其主要变更写了一份[非常好的摘要](https://medium.com/@michaelcullumuk/fig-3-0-91dbfd21c93b)。我将在这里简单地总结一下。

首先，也是最重要的，它为 FIG 增加了一个真正的使命陈述:

> PHP 框架互操作性小组(PHP FIG)旨在通过将项目和人员聚集在一起进行协作来推进 PHP 生态系统并推广良好的标准。它开发和发布标准，通过真实世界的经验以及自己和他人的研究和实验来形成 PHP 标准建议(PSR)。

这实际上不是一个新概念。它以书面形式正式确定了国际体操联合会已经在做的和已经做了一段时间的工作，并得到了以前进行的民意调查的支持。

第二，工作组变得更大，最小规模为 5 人。这些工作组成员可以是项目成员，也可以不是项目成员，但是应该是与给定规范有直接利害关系的成员。例如，缓存库的缓存库作者，或者 PSR 的异步库实现者。那些直接受影响的人有一个明确的“席位”,并且在 PSR 被批准之前在工作组中有一票，即使他们不是项目的成员。此外，直到至少有两个实现证明一个提议是可行的并且有可能被某人采纳，最终投票才会发生。这一变化直接来源于 IETF。

第三，在工作组完成后，由选出的 12 人核心委员会对规范进行最终投票。核心委员会的工作是保持 FIG 所有工作的一致性和卓越性，平衡既定模式和前瞻性发展，并作为工作组工作的半外部审查者。他们可能是项目代表，也可能不是；这使得 FIG 的参与进一步向许多不是项目领导者的 PHP 专家开放。此外，他们不仅是由项目代表选举产生的，也是由任何积极参与 FIG 的人选举产生的；这包括所有工作组成员，他们可能是也可能不是项目代表。

然后，项目代表只需要在选定的时间参与核心委员会的投票，并且当他们的项目与工作组相关时，他们就可以加入工作组。如果不是，那么他们的沉默或不参与不会影响 quorum 或者阻碍一个与他们无关的规范的开发。

秘书职位基本上保持不变；核心委员会和秘书是对等的，相当于处理 FIG 的不同部分。秘书保持机器工作，而核心委员会为工作组提供技术监督，并对给定的规范提供“局外人的观点”。

我相信，这解决了当今 FIG 的大部分结构性挑战，同时创建了一个环境，在这个环境中，PHP 社区可以为了每个人的利益而更有效地工作。

## 太有远见？

尽管这个提议在早期得到了广泛的赞同，但最近却遭到了一些反对。主要的反对意见是，它与 FIG 的最初目的“相差太远”,因此它要么被放弃，要么被用作一个新团体的基础，FIG 本身可能会因此而关闭。特别是保罗·琼斯[一再声明](http://paul-m-jones.com/archives/6384)它违背了 FIG 的“创始愿景”,即只对会员项目的现有实践进行标准化。

然而，PHP 标准组的“创建愿景”，根据最初会议的主持人所说，是一个没有公众参与的封闭团体。同时，影响新的、尚未创建的、非成员的项目显然是一个目标:

> 如果宣布新代码的博客帖子或邮件列表消息的第一个评论是“哇，太棒了，但是你应该通过 phpcs 运行它”，我会很高兴

列表中的第一篇[非测试帖子来自 David Coallier，明确指出:](http://news.php.net/php.standards/2)

> 每个项目可能都有特定的标准，这些标准可能会扩展并进一步定义这些标准应该如何使用，但是目标是一组 PHP 标准**作为资源提供给所有 PHP 开发人员**。

(着重部分由作者标明)以及

> 有人提议在 lists.php.net 上建立一个集中的、有节制的邮件列表来讨论 PHP 编码标准。该名单应具有公共档案，并且**具有发布特权的人员将通过选举授予**无特权发布特权。每个主要项目可以有一个以上的成员，但是每个项目对于标准决策和成员资格只有一票。

(着重部分由作者标明)。

只是在最初的 [php 标准列表](http://news.php.net/php.standards/start/1)和其他地方的遭到强烈反对之后*，党的路线才转变为“只为我们”。然而，如果我们想寻找创始人的愿景，它就在那里:创建标准的封闭列表“作为所有 PHP 开发人员的资源”在这些陈述中，没有一处声称只是将“已经做的事情”标准化。*

封闭列表的想法很早就被放弃了。“只为我们”这一行主要是对越权指控的辩护。也没有提到仅仅是向后看。

显然，声称“创始人”的愿景是一个严格的向后看，只为我们的组织是修正主义的历史。

## 一个新团体？

许多人建议国际体联不要采用图 3 的变化，而应该由一个新成立的组织来采用。论点是 FIG 的工作已经完成，一个新的团体将能够继续前进，而没有 FIG 已经累积的任何业力，无论是好是坏。我觉得这也是一个奇怪的论点。

今天，国际体操联合会没有使命宣言。那么如何才能宣布“完成”呢？没有定义验收标准！我们最接近的是网站上常见问题解答中的一个条目，其中指出 FIG 的存在是为了“讨论我们项目之间的共性，并找到我们可以合作的方式”。考虑到目前处于发展阶段的 PSR 的数量，似乎还有很多值得讨论的地方。

FIG 在过去 7 年中建立起来的任何好的业力都不是少数人的财产。它是每一个为已经被采用和正在使用的任何规范工作的人的血汗的结果，包括项目代表和非项目代表，在会议上或在他们的项目中谈论 FIG 的每一个人，以及 FIG 的工作使开发人员的生活变得更好的每一个人。这些人中的大多数都不是这个组织的创始人。事实上，大多数最初的创始人早就不再活跃于 FIG 了。

相反，FIG 建立起来的任何不好的业力不会因为给一个新团体使用不同的名字而神奇地消失。如果它显然是 FIG 的延续(任何关心它的人都会这么认为)，很少有 FIG 的批评者会突然重新反对它。那些与国际体操联合会无关，而是与国际体操联合会某些成员有关的人只会关心这些人是否参与其中。

一个新的组织能工作吗？只要 FIG 自己关闭并公开声明新的组织是它的继承者，它很可能可以。然而，仅仅为了保护一个虚构的“愿景”,这似乎是过多的废话和政治。

最糟糕的情况是一个新的组织成立了，而 FIG 还没有关闭。那么 PHP 最终会有两个相互竞争的标准体，这与拥有一个标准体的目的背道而驰。

## 结论

诚然，FIG 有过一段混乱的历史。然而，历史有一个非常清晰的轨迹:走向更多的社区参与和支持这种参与的更强大的结构。它作为“PHP 标准组”成立，包括公开声明的对整个 PHP 社区有用的目标。在实践中，不可能不这样；PHP 项目不再是孤岛，因此许多项目采用的标准最终会对几乎所有项目产生影响。如果只有成员项目“酷孩子”采用它们，互操作性的整个概念就不可能成功。

图 3 是这一发展的下一步，也是重要的一步。在过去的 7 年里，FIG 作为事实上的 PHP 标准组织赢得了一席之地。是时候让 FIG 接受这一现实，为所有人建立一个更好的 PHP 生态系统了。

## 分享这篇文章