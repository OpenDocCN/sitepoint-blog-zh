# Groovy，一个开源的成功故事

> 原文:[https://www.sitepoint.com/groovy-open-source-success-story/](https://www.sitepoint.com/groovy-open-source-success-story/)

![Open Source Week](../Images/31a22f613e5e7d0c22f753b2e51b5549.png)

SitePoint 的开源周到了！整整一周我们都在发布关于开源、自由软件和社区的文章，所以请继续查看 ***[OSW 标签](https://www.sitepoint.com/blog/)*** 获取最新更新。

Apache Groovy 是一种面向 Java 平台的多方面通用编程语言。虽然它主要是一种具有许多动态语言特性的面向对象语言，但它也支持函数式编程、静态类型检查和静态编译。本文着眼于 Groovy 历史中一些有趣的方面，以及一些有助于它成为一个充满活力的开源项目的重要指导原则。

## 什么是 Groovy，我为什么要关心？

有许多可用的编程语言，也有几种流行的 Java 替代语言是专门为在 JVM 上运行而设计的，那么 Groovy 有什么特别之处呢？Groovy 尤其以其:

*   与 Java 紧密集成，学习 Java 的难度低
*   对函数式和面向对象风格的多范例支持
*   灵活的语法和高效的库
*   通过元编程的可扩展性
*   脚本功能
*   支持领域特定语言(DSL)

它也是 JVM 使用最广泛的替代语言之一，每年大约有 1200 万次下载，并且还在稳步上升。但是这篇文章并不是向你推销 Groovy 的特性，而是描述开源在 Groovy 的发展中所扮演的角色。

Groovy 从一开始就是一个开源项目。它[的诞生](http://radio-weblogs.com/0112098/2003/08/29.html)源于这样一种愿望:能够像使用 Ruby、Python 或 Smalltalk 一样，使用更少的样板代码进行编程，但在 JVM 平台上，使用 Java 程序员会觉得自然的语法。没有灵感的火花，Groovy 就不会存在，但是仅凭这种灵感并不能将 Groovy 带到今天的位置。其他一些因素也至关重要，需要克服各种障碍。让我们看看其中的一些因素——支持一个成功的开源项目的不同支柱。

## 建造一个更好的灯泡，但是站在巨人的肩膀上

Groovy 许多早期特性背后的一个关键驱动力是项目成员认为 Java 中需要但缺少的东西。然而，Groovy 团队比 Java 背后的工程团队要小得多。因此，制定了一个基本策略，让 Java 做它擅长的事情，Groovy 将关注差距:*不要做所有的事情，而是做你擅长的事情*。

这两者之间的集成将比其他 JVM 语言所尝试的更加紧密。当新版本的 Java 出现时，有时是受 Groovy 几年前添加的特性的启发，Groovy 会试图用下一轮缺失的特性将标杆移得更远。

话虽如此，但值得注意的是，Groovy 添加静态类型检查和静态编译以获得更好的编译时错误并显著提高性能的功能确实与 Java 有些重叠。尽管 Groovy 允许混合的 Java 和 Groovy 代码库之间的无缝交互，但许多用户只是不想离开 Groovy，不得不返回到 Java，还想从 Java 的静态类型和类型检查中获得一些好处。当然，Groovy 总是希望进一步提高标准，使类型检查器可扩展，这样，如果您愿意，您可以添加自己的自定义检查器来进行比 Java 更严格的检查。

除了构建在 Java 之上之外，许多早期的 Groovy 特性也深受 Python、Ruby、Smalltalk 和其他语言中的特性的启发——不需要重新发明概念，只需为具有 Java 开发思维的人提供一个 JVM 友好和直观的版本。这些特征的例子包括:

*   Groovy 的元编程能力和范围数据类型大量借鉴了 Ruby 的思想
*   列表和地图文字符号以及默认参数的语法受到 Python 的启发
*   收集处理方法`collect`和`inject`遵循 Smalltalk 的命名方案
*   闭包来自函数式编程的世界

近年来，一个很好的观察是，Groovy 特性已经回到了 C#、Swift、Scala、Kotlin、Frege 甚至 Java 等语言中。一些例子包括:

*   Java 的 lambda 表达式可以被认为是 Groovy 闭包的有限版本
*   作为 project Coin 的一部分，Java 添加了字符串来切换语句(Groovy 允许字符串、正则表达式、类表达式和闭包作为 case 语句的可能目标)
*   Elvis 操作符`?:`的语法现在用于 PHP、Fantom 和 Kotlin，尽管它们测试的是 null，而不是应用 Groovy 真理；许多语言，包括 C#和 Swift，已经为空合并增加了一个`??`操作符
*   安全导航操作符`?.`现在在 C#、Swift、Kotlin、Fantom 和 Ruby 中(作为`&.`)
*   宇宙飞船操作员`<=>`现在有 PHP、Ceylon 和 Ruby 版本
*   许多动态语言都在寻找增加静态类型检查的方法

Groovy 是开源的，它的设计和实现都是公开的，这使得这种思想交流成为可能；*鼓励创新，提高所有开源语言的门槛*。

## 专业前沿发展

许多(但不是所有)开源项目的一个共同特征是高质量的代码库，并且经常是良好开发实践的先驱使用。对最佳实践技术感兴趣的人通常也是那些寻找最新技术来缓解他们的一些痛点的人。Groovy 确实很幸运，在它的社区中有这样的人参与进来。在这一过程中，大量的技术和方法被整合进来，以保持高质量的代码，提高测试覆盖率，保持适当的兼容性，并采用最佳的 devops 实践，以降低潜在新贡献者的准入门槛，并最大限度地减少现有项目成员的工作量。说明这一点的两个例子是:

*   提交的每个 PR 都在 CI 服务器上自动测试；Groovy 的提交者知道提交是否会破坏测试，而不必自己手动应用和运行测试
*   Checkstyle 是对 Java 代码源的一个重要的附加检查，但对 Groovy 代码不起作用，所以创建了 Codenarc 项目来为 Groovy 代码提供类似的检查框架

听起来这个项目有一套开发人员需要遵循的严格的政策和程序，但事实并非如此。事实上，项目的治理，即如何运行，是非常轻量级的。好的实践被嵌入到项目工件中，并且实践在需要时被鼓励和加强。随着新的贡献者加入团队，现有的提交者给出指导，说明为什么事情在过去以某种方式完成。我们很快会再回来谈论更多关于治理的内容。

经常听到的敏捷口头禅之一是*尽早发布，经常发布*。当然，Java 历史上非常缓慢的发布周期和对新特性的缓慢采用是 Groovy 存在的原因之一。Groovy 试图通过更早地以更快的速度提供新特性来显著改善这一点。话虽如此，有时技术问题甚至拖慢了 Groovy 的发布，但这种情况正在改善。当然，作为一门语言，我们不想强迫我们的用户每周都必须升级，所以我们不需要像其他一些项目那样咄咄逼人。

![groovy-camper](../Images/7361606ccfab9647efedc045640f3936.png)

## 保持乐趣

在努力追求专业性和质量的同时，项目组也采取了实用主义而非理论纯洁性的立场。Groovy 用户希望把事情做完，并从中获得乐趣；语言不应该成为障碍。考虑到这一点，Groovy 在应该如何使用这种语言的问题上采取了某种不可知论的立场。它支持面向对象和函数式风格，命令式和声明式。它强烈鼓励相当多的好实践，但并不妨碍程序员可能选择的特定风格。对于如何对待开发者，它有一个有点儿*成熟的方法。尽量不要让开发人员搬起石头砸自己的脚，但是如果他们真的不怕麻烦，也不要禁止他们这样做。*

项目治理的另一个可能挫伤贡献者热情的方面是一个重量级的批准过程。如前所述，Groovy 项目试图尽可能保持轻量级。它没有像 Java 的 JCP 过程那样复杂的语言进化过程。对这种语言的微小的、没有争议的改进，可能会被提议、讨论并通过邮件列表上的一致同意而被批准，该邮件列表由 Github 上提议的 pull 请求支持。对于语言的较大变化，Groovy 有一个 Groovy 增强建议(GEP)过程，允许进行更精细的考虑。然而，这并非一帆风顺。运行一个开源项目最困难的部分之一通常不是计算出你可能添加什么新特性，而是决定省略什么，或者在完全理解其含义之前抵制过早添加特性的冲动。

当需要时，Groovy 确实有一个正式的治理结构可以依靠，所以我们可以，比如说，对是否应该添加某个特定的特性进行正式投票。该项目遵循典型的 Apache [治理模型](https://www.apache.org/foundation/governance/)，有一个项目管理委员会(PMC)负责管理该项目。因此，总的来说，我们首先努力在更广泛的群体中达成共识，然后是提交者，最后，如果需要，还有 PMC。

最后，Groovy 在整个社区中保持了友好的氛围。有时会有激烈的辩论，人们同意有不同意见，但总的来说，社区内的参与者服从于社区的更大利益。总的来说，事情运行得相当好；Groovy 用户不想无休止地争论理论的学术观点，他们希望在享受乐趣的同时*完成工作*。正是这些因素的结合吸引了个人开始并继续为 Groovy 或 Groovy 生态系统中的其他项目做出贡献。

## 超越任何个人的长寿

个人出于各种原因对开源项目做出贡献。有些人可能完全或部分由他们的公司赞助，其他人可能是志愿者，他们可能只是喜欢与世界各地志同道合的人一起工作。考虑到这些贡献者不同的动机，开源项目对于任何个人贡献者随着他们个人环境的改变何时到来或离去的控制要少得多。这些年来，Groovy 已经见证了一些主要的个人[来来去去](http://melix.github.io/blog/2015/02/who-is-groovy.html)和其他人，他们的环境已经改变了他们做出贡献的方式——但是这个项目已经适应了需要，并继续蓬勃发展。

Groovy 在其生命周期中有超过 300 名代码提交者，在过去的 5 年中平均每年有超过 50 名活跃的代码贡献者。对于那些感兴趣的人来说，前 100 名贡献者的十年历史可以通过 [Github graphs](https://github.com/apache/groovy/graphs/contributors) 在线获得。许多其他的贡献也发生在代码贡献之外，包括邮件列表、论坛和博客等等。

从一门语言中失去的最有争议的人可能是它的创始人之一，当 Groovy 的创始人 James Strachan(一位多产的开源贡献者)离开该项目，将他的时间集中在更高优先级的活动上时，确实引起了很多关注。詹姆斯在 2009 年说过一句著名的话:“我可以诚实地说，如果有人向我展示了 Odersky 等人的书《Scala 编程》。艾尔。回到 2003 年，我可能从来没有创造过 Groovy。多年来，Scala 社区中的许多人一直在引用和错误引用这些词。James 继续澄清他从未后悔创建 Groovy，在深入研究 Scala 之后，他稍微改变了对该语言的喜爱，并转向其他语言。在最近的推文中，他称赞了 Groovy，并在他最近的一些演讲中展示了 Groovy 的幻灯片。他特别喜欢 Groovy 在连续交付管道中的 DSL 功能，例如 [Jenkins pipelines](https://jenkins.io/doc/book/pipeline/overview/) 。或许这条推文抓住了他目前的想法:

> [@米蒂](https://twitter.com/mittie) [@taichi2000](https://twitter.com/taichi2000) 我还是爱 groovy (jenkins 管道太 groovy 了！)，java，go，typescript 和 kotlin。我不再使用 scala 了
> 
> —詹姆斯·斯特拉坎(@ jstrachan)[2016 年 10 月 7 日](https://twitter.com/jstrachan/status/784333918078169088)