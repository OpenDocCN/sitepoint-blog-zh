# 文件上传必需品:速度、可靠性和安全性

> 原文：<https://www.sitepoint.com/file-uploading-necessities-speed-reliability-security/>

如果你正在考虑在你的应用程序中实现一个文件上传工具，你必须考虑三个主要因素:速度、可靠性和安全性。

这些因素直接有助于你的文件上传的可用性和质量，导致用户满意度和保留。没有它们，文件上传将会令人沮丧、令人不快或者具有破坏性。

在大多数情况下，构建理想的[文件上传解决方案](https://www.filestack.com/features/?utm_source=Sitepoint&utm_medium=LeadsAcquisition&utm_content=article)可能会令人困惑、具有挑战性，并且非常耗时。在本文中，我将向您展示这些因素是多么重要，以及您可以做些什么来获得它们。

![Image of hand holding a mobile phone](img/f8b2f42c444f01bdaefbadc5eb44b22d.png)

[图片由 rawpixel.com 在 Freepik 上](https://www.freepik.com/free-photo/hands-holding-downloading-mobile-phone-with-coffee-cup-beverage_2791399.htm)

我们与 [Filestack](https://www.filestack.com/?utm_source=Sitepoint&utm_medium=Leads%20Acquisition&utm_content=article) 合作创作了这篇文章。感谢您对使 SitePoint 成为可能的合作伙伴的支持。

## 现代文件上传的基础

在我们开始如何完善你的文件上传之前，让我们先回顾一下基础知识。最简单的文件上传工具由一个允许用户向服务器发送文件的界面组成。但是要有一个能适应现代用户需求的，你还需要添加一些用户现在期望上传者拥有的功能。其中包括:

*   将文件拖放或复制粘贴到上传程序的选项
*   从社交媒体应用或云存储等其他来源上传
*   预览、编辑和处理上传文件的能力
*   干净、直观、响应迅速的界面

这些特性本身通常是不够的。它们也必须以最好的方式交付。上传必须是无缝的。开发人员必须优先考虑以下文件上传的必要性。

### 速度

我们必须考虑的第一个因素是速度。大多数用户都希望他们的文件上传得相当快，不管文件大小或文件数量。一个主要原因是科技巨头——尤其是社交媒体公司——如何优化他们的文件上传器，使其尽可能快。

速度对文件上传至关重要，因为它影响用户体验。没有人愿意为文件上传等上几分钟。闪电般的文件上传让用户有更多的时间做最重要的事情。对于工作场所，时间是至关重要的。

您可以做几件事来提高应用程序的上传速度:

*   **多方上传**。包括将文件分成小块，上传，然后在上传后将它们拼接在一起。
*   **压缩图像**。通过牺牲一些质量来最小化图像文件的大小。大多数(如果不是全部的话)社交媒体网站压缩图像，从个人资料图片到共享照片。这是因为图像质量越高，上传图像所需的时间就越长。
*   **限制上传大小**。较大的文件需要较长的上传时间。因此，您可能希望设置一个限制，以确保只上传文件大小相当大的文件。
*   **使用 CDN** 。加快文件上传速度的最好方法之一是使用 [CDN](https://blog.filestack.com/thoughts-and-knowledge/accelerating-application-delivery-cdn/) (内容交付网络)。顾名思义，这是一个服务器或数据中心的网络，称为 **PoPs** (存在点)，分布在全球各地。这允许用户与地理上离他们最近的 PoP 进行通信，减少往返时间，从而加速用户的文件上传/访问。

通过实现部分或全部这些实践，您可以显著提高应用程序的上传速度，让用户满意，让您的应用程序无缝运行。

然而，无论你上传文件的速度有多快，如果文件被中断并且无法恢复，用户仍然会失去兴趣。如果发生这种情况，速度的提高将是徒劳的。幸运的是，有一些方法可以防止文件上传被中断。

### 可靠性

无中断或无问题上传文件的能力是每个文件上传解决方案的另一个必备功能。拥有一个可靠的文件上传程序有助于建立客户对你的产品的信心，让他们能够顺利使用它。

可靠性对于个人和专业用例非常重要。你的应用程序应该认识到你的用户是宝贵的，不应该重复地尝试上传文件。你必须确保你的应用可以在最恶劣的网络条件下处理上传。另一件要考虑的事情是你需要处理失败的上传。

提高应用程序文件上传的可靠性可能简单，也可能复杂，这取决于您想要的可靠性水平。例如，通知用户上传失败或显示上传进度很容易做到。另一方面，允许用户恢复失败的上传将需要更多的时间和编码。防止上传失败或减少其发生更具挑战性。

您可以实现以下一些功能来帮助提高应用程序文件上传工具的可靠性:

*   **上传错误处理**。在文件上传错误/中断的情况下，您必须通知用户并向他们展示下一步操作(如重新上传或恢复)。通过适当的错误处理和消息提示，你可以帮助*减轻用户的担忧，并澄清他们的上传状态*。

*   **进度条**。这些提示用户他们的文件上传是否继续，以及他们需要等待多长时间才能完成。

*   **可恢复上传**。与前两个特征不同，这直接有助于文件上传工具的可靠性。它允许用户在上传失败的情况下继续上传。然而，实现这一点并不容易，因为您需要将文件(很像我们之前讨论的多部分上传)分割成更小的块。如果分块上传失败，将重新上传整个文件，直到成功。但这仍然没有解决在恶劣的网络环境下上传的问题。

*   **智能摄取**。这是增加你的文件上传可靠性的最有效的方法，因为这处理了防止上传失败的*。智能接收包括检查网络状况和优化文件区块的分区。这确保了用户即使在网络连接不稳定的地方也能上传。这个特性构建起来非常复杂，但是已经有第三方文件上传解决方案实现了[智能摄取](https://blog.filestack.com/product-updates/filestack-intelligent-ingestion-the-worlds-most-reliable-file-uploading-technology/#:~:text=Filestack%20Intelligent%20Ingestion%20is%20additive,congestion%2C%20or%20limited%20bandwidth%20infrastructure.)。*

 *一旦你使你的文件上传更快更可靠，还有一个必要的增强:保护文件和你的应用程序。

### 安全性

文件上传是大多数现代应用程序中最普遍的功能之一，但也是最容易受到攻击的功能之一。如今，大量可能的攻击来自易受攻击的文件上传工具。其中包括:

*   上传可以运行命令、篡改文件以及对服务器进行其他重要更改的文件
*   跨站点脚本(XSS)
*   在 web 服务器上更改现有网页或上传有害网页
*   未经授权收集和传播敏感信息
*   DoS(拒绝服务)攻击使服务器资源过载，使它们(以及它们托管的软件)无法使用
*   以及其他许多[漏洞](https://medium.com/purple-team/web-application-analysis-exploiting-file-upload-vulnerabilities-cf48f79d51e#:~:text=Some%20of%20the%20common%20web%20application%20threats%20are%3A)

如果不加控制，这些攻击会损害您的产品和业务。因此，有必要采取安全措施来降低文件上传的风险。为了更好地保护您的应用程序，您可以遵循以下文件安全方面的最佳实践:

*   验证文件或帐户修改请求。
*   实施策略以检查哪些操作得到授权，然后使用签名验证策略。
*   设置要上传的文件数量的最大和最小限制。
*   设置文件大小的最大和最小限制。
*   将允许的文件类型限制为您需要的类型。
*   从文件名和文件扩展名中删除所有 Unicode 或特殊字符。您也可以生成仅由字母数字字符和一个点组成的新文件名。更好的方法是，使用散列算法并结合字母数字字符。
*   设置文件名长度限制。
*   使用 POST 方法。
*   确保重要的服务器文件不能被访问、替换或篡改。
*   要获得完整的列表，您将从 OWASP(开放 Web 应用程序安全项目)的本指南中受益匪浅。

如果您实现了这些安全措施的良好组合，您将有更好的机会防止恶意用户的攻击。您的服务器和应用程序将按预期运行，您的用户将继续乐于使用您的产品。

## 提高文件上传速度、可靠性和安全性的方法

在使你的文件上传工具成为一个理想的工具之前，你必须实现大量的功能和实践。然而，这意味着更多的开发时间、维护，说白了就是更多的压力。

但是现在还不要着急。如果您缺少时间、人员和预算，您可以选择现成的第三方文件上传解决方案。这些是由专门从事文件上传的开发人员精心制作的，具有最新和最先进的文件上传功能。

如果他们有增加这些功能的奢侈，这也意味着他们有接近最佳的速度，高上传成功率，和强大的安全措施。有些甚至是开源的，更强大的有免费计划和免费试用。

Filestack 是这些先进的文件上传解决方案之一，已经具备了速度、可靠性和安全性。它附带了智能摄取、CDN 支持和各种身份验证措施，让您可以专注于最重要的事情，即您的核心功能。有了这样的文件上传器，您可以在交付更高质量的产品的同时，显著减少开发时间。

然而，您选择实施您的文件上传解决方案是由您决定的。重要的是，您可以为您的用户提供快速、可靠和安全的文件上传体验。

## 分享这篇文章*