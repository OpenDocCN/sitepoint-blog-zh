# 持续交付:部署软件的正确方式

> 原文：<https://www.sitepoint.com/continuous-delivery-right-way-deploy-software/>

*本文由[杂志社](https://www.codeship.io/?utm_source=SitePoint&utm_medium=article&utm_campaign=FreeDelivery)赞助。感谢您对使 SitePoint 成为可能的赞助商的支持！*

你如何将你的网站或应用程序部署到你的服务器上？这个过程是不是听起来很熟悉？

1.  获取最新代码库的副本
2.  根据需要添加、编辑和删除代码
3.  测试更新
4.  使用 FTP 将所有/已更改的文件复制到服务器
5.  冲洗并重复

这是许多开发人员使用的简单工作流程。一部分开发人员也将在没有源代码控制(如 Git 或 SVN)的情况下管理更新。

这个过程对于不经常更新的小项目来说已经足够好了。不幸的是，当您的站点或应用程序达到任何复杂程度时，它就会崩溃。

## 传统工作流程的问题

### 1.测试不健全

您的本地系统是否与您的服务器环境完全匹配？

### 2.这很容易出错

文件丢失或数据库记录更新失败可能会导致整个应用程序停止运行。

### 3.你在部署一个实时系统

即使该过程在几分钟内成功完成，用户也可能会遇到访问问题。亚马逊、Gmail、脸书或 Twitter 用户会忍受频繁的不可靠性吗？

### 4.很难恢复原状

你的错误是活的；撤消更改并不总是容易的，即使您正在使用源代码控制。

### 5.源代码管理可能无法涵盖所有可能发生的事情

您可能会丢失不是以文件形式存储的数据库数据或其他资产。

### 6.这不是未来的证明

随着越来越多的开发人员加入项目或添加额外的服务器，工作流将变得越来越困难。

### 7.船运比较慢

手动部署是痛苦的，因此发布错误修复和更新的频率较低。

### 8.发展是不可预测的，失败可能不是你的(直接)过错

Ruby 的新版本、Node.js 更新、框架升级或实时服务器上的数据库更改都可能导致应用程序暂停。我们很少考虑堆栈中的其他软件，但即使是操作系统或基础架构更新也可能存在风险。尽管更新带来了速度、稳定性和安全性方面的好处，但您是否会避免更新以最大限度地降低风险？

### 主要问题:*过程费力*

你可以做更有成效的工作。当软件和服务可以为您完成繁琐的任务时，您为什么要忍受手动更新呢？您可能已经在使用构建工具，例如 [Grunt](https://www.sitepoint.com/automate-recurring-tasks-grunt/) 、 [Gulp](/introduction-gulp-js/) 、 [make](https://www.sitepoint.com/using-gnu-make-front-end-development-build-tool/) 或[Rake](https://www.sitepoint.com/rake-automate-things/)——那么为什么不使用自动化连续交付来完成您的工作流程呢？

## 简而言之，持续交付

持续交付使您和您的团队成员能够快速、可靠和重复地将修复、增强和新功能部署到您的实时服务器上。目的是减少风险和人工干预。您还会遇到术语*持续集成*，它指的是这个过程的测试驱动开发部分。也就是说，这两个术语经常互换使用。

连续交付可以被想象成一个部署管道，软件通过它从开发人员流向实时服务器。如果任何人或系统注意到一个严重错误，就可以阻止流量。该流程通常遵循以下步骤，尽管不同团队的政策会有所不同:

1.  开发人员在本地测试和验证他们的更新之前编写自动化软件测试和代码。任何数量的开发人员都可以从事不同的更新，每个人都创建了自己的当前应用程序分支。
2.  分支被推送到一个中央版本控制存储库，比如 GitHub 或 BitBucket。通常，这会导致一个 pull 请求，该请求在被合并到主软件分支之前可以被另一个开发人员审查。
3.  持续交付系统会自动获取更新的软件，运行构建过程，并再次执行自动化测试。这发生在与活动服务器具有相同环境的临时服务器上。如果出现任何故障，开发人员都会收到通知。
4.  产品所有者和/或客户现在可以在中间服务器上执行额外的用户验收测试和评估。
5.  在最终批准时，所有的更改都被快速、轻松地部署到实时服务器上，无需开发人员的任何努力。

连续交付经常在敏捷开发环境中使用，但是无论您使用什么过程，您都可以采用它。这个过程有很多好处:

*   部署过程是稳健的。在更新安装到实时服务器上之前，您可以确信它会起作用。
*   风险更小。该过程不太容易出现人为错误，并且在发生灾难性故障时，您可以将应用程序回滚到工作状态。
*   保持质量控制。只有经过批准的代码才应该投入使用。
*   您的团队变得更有生产力，开发成本也降低了。最初的设置时间投资将在几天内收回，因为开发人员不需要参与手动部署过程。

但是当您不需要自己管理软件时，持续交付的好处会更大。

## 自动化连续交付服务

安装、配置和管理一套连续交付软件产品可能会令人望而生畏、耗时且昂贵，其中一些产品很难使用。虽然 Slack、Crashlytics 和 Pusher 等应用和服务使其他开发人员的任务变得更简单，但其他人也在为持续交付做同样的事情。

一个这样的例子是 [Codeship](https://www.codeship.io/?utm_source=SitePoint&utm_medium=article&utm_campaign=FreeDelivery) ，一个专注于 UX 的产品，它可以为你处理连续的交付过程。他们的系统被设计成用户友好的，但是如果你需要的话，你可以从一个真人那里得到帮助和建议。平均设置时间？**四分钟**。这比单个 FTP 会话要快，而且你只需要做一次！他们还有[免费计划](https://www.codeship.io/pricing/?utm_source=SitePoint&utm_medium=article&utm_campaign=FreeDelivery)，每月提供多达 5 个私人项目和 100 个构建。

为了学习更多关于持续交付的知识，Codeship 提供了一个为期五天的电子邮件“速成班”，在他们主页的左下方有一个注册链接。

连续交付是将 FTP 部署的苦差事抛在脑后的好方法，希望永远如此，值得研究。

你试过连续交货吗？你对管理部署有什么建议？

## 分享这篇文章