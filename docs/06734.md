# 你真的需要 jQuery 吗？

> 原文：<https://www.sitepoint.com/do-you-really-need-jquery/>

为链接诱饵标题道歉，因为这不是一篇反 jQuery 的文章。同样的观点也适用于任何 JavaScript 库，包括您自己的库。然而，jQuery 是许多开发人员最喜欢的选择，有些人会在开始任何 JavaScript 工作之前添加它。

## jQuery 是一种抽象

如果你认为现在的 web 开发很难，试着在五年或十年前的浏览器中开发 JavaScript 代码。典型问题:

1.  DOM 导航和操作是不同的。例如，Firefox(正确地)在 DOM 中包含空白，而 IE6 没有。因此，你不能指望`node.firstChild`返回同样的东西。
2.  大多数浏览器本身支持 Ajax，但 IE 中支持 ActiveX 控件(尽管微软发明了 XMLHttpRequest)。
3.  IE 有不同的事件模型，但是其他浏览器也有不一致的地方。
4.  CSS2.1 支持变化很大。
5.  动画可能会很困难，尤其是在处理框模型差异、表单控件和 iframe 时(IE6 将选择框和 iframe 放在页面上的最上面)。
6.  开发人员的工具还不成熟。在 Firebug 之前，Firefox 的错误控制台和 IE 笨重的模态错误框是唯一的内置浏览器工具。

开发人员不得不编写抽象函数来解决这些问题。jQuery、Prototype 和 MooTools 都是从原始混沌进化而来的；这些库平滑了裂缝，并提供了有用的缺失特性，比如从 CSS 选择器中选择 DOM。

重要的是要记住，jQuery 和它的替代品都是用 JavaScript 编写的，以使编写 JavaScript 更容易。它们本身并不是语言。

## 裸奔

2013 年，前五大浏览器比以往任何时候都更加接近。供应商已经采用了标准，虽然一些浏览器可能缺少某些 HTML5 APIs，但 DOM 遍历、操作、事件处理、服务器通信和 CSS 效果等核心 JavaScript 原则都得到了很好的实现和记录。如果某些东西在 IE10 或 Firefox 23 中正常工作，你可以(几乎)保证它在 Chrome 27 和 Opera 12 中也正常。

那么，当一个库所解决的问题不复存在时，为什么还要使用它呢？裸 JavaScript 总是比调用抽象本地调用的库要快。在某些情况下，裸替代品也更有用。例如:

```
var i = $(".myclass");
```

使用 jQuery 在运行时查找页面上分配了类“myclass”的所有元素。然而:

```
var i = document.querySelectorAll(".myclass");
```

总是会更快。另外，如果使用了`getElementsByClassname`，返回值是一个活集合。换句话说，当在页面中添加或删除“myclass”类的元素时，`i`中表示的 DOM 节点集合会神奇地改变。jQuery 版本必须重复运行才能获得相同的结果。

jQuery 版本的主要好处是它可以在 IE6 和 ie7 中工作(假设您使用的是 jQuery 1.x)。如果您不是为这些浏览器开发，或者已经迁移到 jQuery 2.x，主要优势是语法更简单——但是请记住，您正在加载和解析 30Kb 的压缩脚本来提供该服务。

## 打破依赖链

我使用 jQuery 和我自己的小型库已经很多年了。为什么？*多半是习惯*。

作为概念验证，我决定在一个简单的站点上重新编写 JavaScript 代码，该站点使用一个小型库实现了一些基本的 DOM 操作、表单验证和效果。IE6 和 7 的支持并不重要，但是 IE8 必须工作，这意味着我不能依赖 HTML5 的表单检查，比如`required`属性。我仍然抽象了一些浏览器特性，但主要是为了简洁，例如

```
function $I(id) {
	return document.getElementById(id);
}
```

结果:使用原始 JavaScript 代码，15Kb(合并并缩小)的 JavaScript 文件减少到 3Kb。80%的节省。

不可否认的是，这并不能证明您在其他项目中也能达到这样的效果，12Kb 的节省几乎不会被注意到。然而，它确实说明了我并不需要我正在使用的最小库所提供的所有功能。即使删除了不必要的模块，您肯定也不会使用 jQuery 提供的所有功能。更糟糕的是，开发人员经常使用多个库，因为他们想要特定的特性和/或插件。

## 永远不要说永远

我并不是说你不应该使用 jQuery。您也不应该低估该库所提供的巨大的开发努力和帮助。无论您如何处理代码，总需要某种程度的本机浏览器抽象。考虑 Ajax——您不希望为每个服务器通信重写 XMLHttpRequest API 调用。大型客户端应用程序将需要一组通用组件，jQuery 或其他库可能是一个不错的选择。

然而，如果你不支持旧的 ie，并且想提供最快、最流畅、最兼容的体验，那么就认真考虑一下你试图解决的问题。例如，如果您正在编写一个 cookie 处理实用程序，那么将它作为 jQuery 插件或者将其绑定到另一个库是没有意义的。尽管创建一个独立的模块更简单、更有效，可以在任何地方工作而不考虑其他代码，但是您会在整个插件库中找到 cookie 处理程序。

jQuery 是一张令人欣慰的毯子，但是有时候，赤裸裸地进入 JavaScript 世界也是一件好事。你将享受这种自由，并学习更多关于浏览器真正如何工作的知识。

即将推出:*jQuery 方法的裸等价体* …

## 分享这篇文章