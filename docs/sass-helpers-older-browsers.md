# 旧浏览器的 Sass 助手

> 原文：<https://www.sitepoint.com/sass-helpers-older-browsers/>

如果您的项目仍然需要对旧浏览器的支持，使用 CSS 的新功能可能会有问题。如果你从简单风格的坚实基础开始，你可以采取渐进的增强方法，在只有现代浏览器才能呈现的新风格上分层。但是，在某些情况下，您可能希望在旧浏览器中对特定样式进行某种形式的回退。这种风格可能不仅仅是装饰性的，因此失去它可能意味着失去背景或理解。旧的浏览器可能会被比正常比例更高的网站受众使用，这使得网站在该浏览器中显得不那么完美，过于显眼。

本文主要关注使用 Sass 混合和函数对旧版本 Internet Explorer 的后备 CSS 支持。旧版本的 Internet Explorer 倾向于停留在原地，因为它在更新企业设置时速度很慢。这些是我们将讨论解决方案的 CSS 功能:

1.  IE 8 中的 REM 单位
2.  IE 8 中的媒体查询
3.  IE 7 中的框大小
4.  IE 8 中的方框阴影
5.  IE 9 中的渐变
6.  8 英寸不透明度

## 要使用的策略

有几种不同的策略可以为 Internet Explorer 中不受支持的 CSS 功能提供回退支持:

### 双重风格规则

在这种情况下，CSS 的另一种格式可以提供后备。现代风格将通过 CSS 继承来否决，但只在支持它的浏览器中。技巧是简单地将新规则放在旧规则之后。这些提供的不是等价的风格，但是比完全没有支持要好。

**优点:**维护非常简单。
**缺点:**给你的主 CSS 文件增加更多的文件大小权重。

### 仅 IE 风格

有几种方法可以为特定版本的 Internet Explorer 提供自己的样式表。在这种情况下，你可以用 IE 样式来否决主样式，但是只能在那些浏览器的上下文中。这有助于更复杂的否决程序。

**优点:**整个文件被非 IE 浏览器忽略。
**缺点:**将规则分割成不同的文件，这会使维护变得复杂。

### IE 黑客

利用旧 IE 版本中的错误来覆盖所有其他浏览器的基本样式。通常这些都与选择器语法有关。

**优点:**在效果上可以非常精准。
**缺点:**难念难守。添加的语法在 CSS 中引入了验证错误。

### 过滤

在某些情况下，一种风格是不受支持的，但有一个等效的或几乎等效的专有 IE“过滤器”可以应用。

**优点:**像双风格规则一样，维护起来很简单
**缺点:**有些过滤器对性能有很大的影响，所以应该明智地应用并测试它们。添加的语法在 CSS 中引入了验证错误。

## 需要注意的特定浏览器怪癖，来自 caniuse.com

### 识别内存(recognition memory)

在字体速记属性中使用时(忽略整个声明)或在伪元素上使用时，Internet Explorer 9 & 10 不支持 rem 单位。
IE 9、10 和 11 在伪元素上:前:后使用时，在“行高”属性[中使用时不支持 rem 单位。](https://connect.microsoft.com/IE/feedback/details/776744)

### 媒体查询

IE9 错误地包含了基于窗口宽度的媒体查询的滚动条宽度。

### 盒子尺寸

当设置为 position: absolute，overflow:auto/overflow-y:scroll
IE9 将滚动条的宽度减去元素的宽度，如果使用了 min/max-width/height，IE 8 将忽略 box-sizing: border-box。

## 可从中收集的现有解决方案

### 版式的 REM w/ PX 回退

来自妮可·沙利文
的 Sass 的简单 Rem 转换，一个只为字体大小创建双样式规则的 mixin。

CSS 诀窍
中的 Rem 字体大小的 Mixins 两种方法获得 PX 回落的双样式规则解决方案。一个只提供字体大小，另一个允许你输入属性，比如边距。

Paul Underwood
的 REM Sass Mixin With Pixel Fallback 另外两个方法，但是在这种情况下，单值版本也可以在属性中传递。

[使用带有 Sass 的 Rems】来自 David Ensinger
一个强大的 mixin，允许指定的属性和混合值，包括 PX、%和 auto。](http://davidensinger.com/2013/03/using-rems-with-sass/)

在这个解决方案中，通过将样式管道化到两个表中，并使用 IE 条件注释将 PX 版本发送到 IE 8 和更低版本，避免了来自大量双样式规则的文件下载负担。

### 媒体查询的回退。

由媒体查询隐藏的“桌面”大小的样式可以通过一个“老 IE”类提供给 IE8 使用。

在这个解决方案中，两个样式表是从一个源生成的。其中一个页面上的媒体提问被压平，任意添加了额外的纯 IE 内容。IE 条件注释是用来喂老的给 IE 8 及以下的。

Stu Robson
的 Mixin 提供了三个功能:一个简写符号，指定转换成 EM 的 PX 值，一个 IE-fallback 标志，它将样式复制到“lt-ie9”类选择器中

### 框大小:IE6/7 不支持边框

Stu Robson
的文章定义一个带有左/右填充的宽度，现代(支持边框)和旧的样式都将被创建并通过条件注释输入。

### 梯度

Nick Piesco
这个混合添加了对 IE 过滤器的支持，该过滤器支持渐变。

## 结论

我们已经研究了旧版本的 Internet Explorer 所支持的现代 CSS 的各种问题。有了 Sass，我们可以看到直接使用预制的解决方案为站点构建提供支持，或者我们可以从这些模式中学习并创建我们自己的变体。你有没有创建一个 mixin 或者函数来帮助修补旧浏览器缺乏 CSS 支持的问题？请在评论中分享。

## 分享这篇文章