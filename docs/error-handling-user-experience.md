# “未找到”不是一个选项:错误处理和用户体验

> 原文：<https://www.sitepoint.com/error-handling-user-experience/>

没有比找不到你想要的东西更令人失望的了。有时，网上冲浪会把我们引向死胡同，通常标题为“错误 404”、“未找到”或“找不到文档”。

您可能已经知道，代码 404 对应于“文件未找到”，可能是超文本传输协议(HTTP)规范中定义的所有[状态代码](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)中最著名的一个。这些代码对应于用户从 Web 服务器请求文档时可能收到的不同响应。在这种情况下，只要用户无法访问文件，Web 服务器就会生成 404 错误。

由于默认机制不能向我们的访问者提供任何相关信息，所以显示定制的错误消息是必不可少的。然而，在我们深入研究他们设计的可用性方面的细节之前，让我们探索一下错误 404 是如何产生的，以及我们如何在它们发生之前避免它们。

##### 找不到文档

让我们检查一下这种性质的响应的所有可能情况:

1.  ***对文档属性的修改***

重组在各种规模的网站中都很常见:文档在网站结构中被重命名、删除或移动。即使网站管理员可能会确保站点内不存在对被移动或删除的文档的引用，但对于来自外部站点(如搜索引擎、缓存服务、链接交换等)的不正确引用，他们也无能为力。

让我们也考虑一下在服务器迁移之后会发生什么——尤其是涉及到操作系统变化的迁移。尽管鼓励使用小写字母命名 Web 文档，并认为这是一种最佳实践，但在大量使用或独占使用 Microsoft Windows 操作系统的工作环境中(文件名不区分大小写)，这一规则并不常见。

在这些情况下，最好的方法是在操作过程中为要移动、重命名或删除的文件设置重定向。虽然配置 Web 服务器以提供定制的错误响应超出了本文的范围，但是您可以在下面的文档中找到关于它的更多信息:

*   [在 Apache](http://httpd.apache.org/docs/mod/mod_alias.html) 上设置重定向。
*   [在微软 IIS](http://www.microsoft.com/resources/documentation/IIS/6/all/techref/en-us/iisRG_TRB_39.mspx) 上设置重定向。

*   ***打字错误***

如果我们的网站在我们的商业活动中起着重要的作用，那么它们的 URL 可能已经印在我们的名片和其他信纸上了。如果是这样的话，人们将会在浏览器的地址栏中输入我们的网址，而且——让我们面对现实吧——并不是每个人都是专业的打字员。有些人的手指很容易打滑，按错键。

另一个与无意拼写错误相关的问题是，当有人引用了我们网站上的一个文档，但在链接中打错了 URL。你可以试着联系维护推荐网站的人，请他们做出改变(祝你好运！)，或者你也可以谨慎行事，在你这边解决问题，尤其是当那个引用对你很重要的时候。

在这些情况下，您可以为最常见的错误设置重定向。然而，Apache 提供了一种更优雅的方法:拼写检查。指令允许在你的站点的特定目录中改正小的拼写错误。关于配置`Checkspelling`的更多信息，请参考[在 Apache](http://httpd.apache.org/docs/mod/mod_speling.html) 上设置拼写检查。

*   ***真正不存在的文件***

事实上，有些文件并不在我们的网站上，而是因为这样或那样的原因被认为是我们收集的一部分。在一些特殊情况下，可以从我们的 Web 服务器请求非常特殊的文件，因为大多数时候它们存在于其他地方。在大多数情况下，重定向是可行的方法。以下是任何网站上最常见的文档名称列表:

*   `**index.html**`在所有应用服务器出现之前，index.html 是任何网站的默认初始页面。然而，如果您在您的服务器上运行 PHP，您最有可能坚持使用一个`index.php`文档作为默认文档；如果你使用 ColdFusion ( `index.cfm`)或者微软 ASP ( `default.asp`)也可能发生同样的情况。
*   `**favicon.ico**`无论何时有人访问我们的网站并将其添加到他/她的收藏夹或书签列表中，浏览器都会尝试在列表中找到一个图标来区分您的页面。如果文档中没有指定，浏览器将尝试从文档的根文件夹中获取一个`favicon.ico`文件。然而，有一个快速的解决方法:你所要做的就是在你的文档中添加下面一行，在`<head>`标签之间:

`<link srcimg/mycompany.ico" rel="shortcut icon" />`

这不仅能帮你避免一些 404 错误，还能让我们的网站与众不同。

*   `**robots.txt**`这是一个文本文件，通常驻留在每个网站的根目录中，包含一系列指令，向来自搜索引擎和其他索引服务的“蜘蛛”或“机器人”指明要扫描哪些目录以及要避开哪些目录。如果找不到`robots.txt`文件，所有的蜘蛛都会索引它们路径中的所有东西，这可能是你想要的，但是会留下一个 404 错误。快速修复:在你的根文件夹里放一个空白的`robots.txt`；不会有什么坏处的。
*   `**Ghost files**`如果我们使用一个二手域名，我们可能会收到一些与该域名上的站点相对应的点击。同样，我们的主机提供商可能会给我们分配一台服务器，它的 IP 地址以前曾被用来直接访问其他网站。这些 404 错误很容易识别，因为它们应该产生与我们网站结构完全无关的文档和目录的引用。

如果这些方法都不能防止错误 404 发生，那么什么也不能。这时，404 页面的设计对于交付良好的用户体验变得至关重要。

##### 设计可用的 404 页

没有一套规则或方法可以让你的错误页面变得完美。相反，我想提出一些建议，帮助您提供更好的用户体验，并在需要时采取行动。请记住，下面的一些建议可能需要根据您自己的实际情况进行调整，考虑您可能拥有的关于访问者的人口统计信息。

1.  ***未经允许不得重定向***

不做任何解释就把人们重定向到主页或者其他地方是不礼貌的，只会让你的访问者感到困惑。这样一个简单的实现似乎是一个好主意，但它实际上只是避免问题的一种手段，而不是真正的解决方案。

3.  ***不称之为“错误 404”***

我们都知道“错误 404”代表什么，但是其他人知道吗？我们不要忘记，对于一些人来说，互联网在很大程度上仍然是一个未知的领域。如果玛丽阿姨点击了一个提供饼干食谱的链接，我们不希望她迷路，对吗？当然不是……这让我想到了下一点。

5.  ***不要以为是客人的错***

随着“错误 404”的出现，我们应该尝试为用户所经历的事情提供某种解释。在这一点上，我们没有办法知道哪里出错了，所以一个通用的、友好的消息是合适的；类似于:

*“不对不对！我们找不到您正在查找的页面。”*
或:
*“找不到您的文档。我们对由此带来的不便深表歉意。”*

诀窍是，如果你不确定错误发生的原因，不要做任何假设。用适合你网站的熟悉程度的语言来写信息。请注意，我们用现在时来描述这个问题(即“你是”而不是“你曾经是”)，这让访问者觉得这个问题还没有结束，你还在努力解决它。这条信息，结合下面的一些资源，将确保用户不会离开你的网站——至少不会马上离开。

9.  ***做网站地图***

许多可用性专家说，网站地图在网站中没有位置，如果一个网站真的需要地图来方便用户浏览，那就存在设计问题。我认为这种说法是有问题的，但如果有一个网站地图的好地方，那就是你的 404 页面。想想看:这个文档会出现在唯一没有提供真实内容的地方。这是提供网站内容结构全局视图的最佳位置，因为它为访问者提供了提示，并帮助他们找到他们想要的内容。

11.  ***尽可能让这个页面脱颖而出***

虽然我们可能想让我们的 404 页面看起来像是我们收藏的一部分，让它分享我们在整个网站上使用的任何品牌，但我们需要让访问者第一眼就知道发生了意想不到的事情。为了实现这两个目标，我们需要根据网站的整体外观和感觉，给错误页面一个极简主义的设计。页面的主要信息也应该是清晰的:例如，给它一个比网站样式表上任何其他标题都大的字体。

13.  ***尽可能提供搜索表单***

如果你有一个内部搜索引擎，在你的 404 页面中放置一个搜索表单是显而易见的。但是，如果更进一步呢？根据您使用的服务器端技术，您可以根据从访问者的查询中提取的任何数据触发自动搜索。

15.  ***做修复那些断掉的链接***

到目前为止，我们已经设法为访问者提供了有用的信息和工具。现在，是时候采取纠正措施了。

当用户跟踪一个丢失文档的引用时，我们可以收集两条信息:丢失文件的声称位置和引用者的 Web 地址。为了说明这种情况，让我们考虑以下情况:

*   www.mysite.com/path/to/missing.html 是被错误引用的文件
*   www.othersite.com/referrer.html 是存在不正确参考的位置

我们可以很容易地使用第一个正斜杠('/')将这些 URL 分成两部分:主机名和文件在主机中的位置。通过比较这些信息，我们可以预计会发生以下情况之一:

***A .用户书签过期或输入错误网址***

如果我们找不到一个有效的 Referrer，可以很有把握地认为丢失的文档是从某人的收藏夹或书签列表(在浏览器的首选项中)中调用的，或者访问者在编写 URL 时犯了一个错误。

在这种情况下，我们的通用消息就足够了，但是不要忘记通知网站管理员这一事件:可以向网站管理员发送一条自动消息，其中包含对本地文档的引用。如果它实际上是一个过时的书签(即该文件存在于我们网站的另一个位置)，应该进行重定向。

***B .该站点有一个断开的链接！***

如果我们找到一个推荐人呢？我们要做的第一件事是将它的主机名与我们自己的主机名进行比较:如果匹配，我们就有麻烦了。

在这种情况下，我们必须承认错误是我们的，并向来访者传达适当的信息。接下来，我们必须向网站管理员发送一条紧急消息，包含丢失文档的捕获位置和引用的本地 URL。

***C .来自外部站点的引用不正确***

如果来自引用站点的主机和我们的主机之间的比较产生了否定的结果，那么我们已经捕获了一个外部断开的链接。

这个类别中的一个特例是搜索引擎中过时的链接，这些链接会带来额外的数据。在这种情况下，我们可以使用使我们的网站出现在搜索引擎结果列表中的搜索词，并尝试使用我们自己的搜索功能提供定制信息。

通常，搜索引擎查询 URL 看起来像这样:

```
www.searchengine.com/action?q=usable+error+pages&lang=en&safe=on
```

这里，`'q'`是包含搜索词的变量！

为了利用这些信息，我们所要做的就是确定引用的页面实际上是否属于一个搜索引擎，隔离搜索词并根据我们的判断使用它们。

第一部分很简单，因为我们已经将主机名与引用 URL 的其余部分分开了；剩下的就是找出它是否包含一个我们知道的搜索引擎的名字。最好的方法可能是使用 indexOf 之类的函数(在许多编程和脚本语言中都可以使用),并将主机名与如下所示的一系列术语进行比较:

```
List = ["google", "yahoo", "msn", "altavista", "hotbot", "lycos"]
```

下一步是识别携带搜索词的变量。在上面的例子中，您可以看到搜索查询不仅包含搜索词，还包含只与特定搜索引擎相关的额外信息。比如 Google、MSN 和 Altavista 用的是变量`'q'`，Hotbot 和 Lycos 用的是更啰嗦的`'query'`；出于某种原因，雅虎更喜欢 T2。

您可能已经注意到，当搜索查询包含两个或更多单词时，它们会使用加号(`'+'`)放在一起。这使得我们可以很容易地将字符串分解成单词，然后输入到我们的内部搜索引擎。

如您所见，我们可以显示大量信息来代替默认的 404 错误。将我们可用的资源与一点创意混合起来，让我们的访问者知道我们关心他们。我们也帮了自己一个忙，不让他们溜走——我们让他们保持兴趣。这是完善你的整体网站体验的一个很好的方式，也是一个不应该被忽视的方式。

## 分享这篇文章